/* empty css             *//* empty css                   *//* empty css                  */import"./el-overlay-f7f710bd.js";/* empty css                  *//* empty css                     *//* empty css                 */import{t as a}from"./index-5f4ce139.js";import{u as B,f as C,h as O}from"./member-a9c007ff.js";import{E as P}from"./index-95693143.js";import{a as R,E as U}from"./index-624573cc.js";import{E as I}from"./index-4862d1b3.js";import{E as S}from"./index-4683bff4.js";import{v as T}from"./directive-a07a10ed.js";import{d as j,r as c,M as k,c as q,b as g,m as V,p as i,f as $,q as n,i as w,v as y,x as h,u as t,L as z}from"./runtime-core.esm-bundler-7c3fd514.js";const A={class:"dialog-footer"},ie=j({__name:"edit-label",emits:["complete"],setup(G,{expose:E,emit:x}){let r=c(!1);const m=c(!1);let p="";const b={label_id:"",label_name:"",memo:"",sort:0},o=k({...b}),_=c(),D=q(()=>({label_name:[{required:!0,message:a("labelNamePlaceholder"),trigger:"blur"}],sort:[{validator:L,trigger:"blur"}]})),L=(d,e,l)=>{console.log("sortVerify",e.toString()),e<0?l(new Error(a("sortVerifyOne"))):e.toString().indexOf(".")!=-1?l(new Error(a("sortVerifyTwo"))):l()},M=async d=>{if(m.value||!d)return;let e=o.label_id?B:C;await d.validate(async l=>{l&&(m.value=!0,e(o).then(f=>{m.value=!1,r.value=!1,x("complete")}).catch(f=>{m.value=!1,r.value=!1}))})};return E({showDialog:r,setFormData:async(d=null)=>{if(m.value=!0,Object.assign(o,b),p=a("addMemberLabel"),d){p=a("updateMemberLabel");const e=await(await O(d.label_id)).data;e&&Object.keys(o).forEach(l=>{e[l]!=null&&(o[l]=e[l])})}m.value=!1}}),(d,e)=>{const l=P,u=R,f=U,v=I,N=S,F=T;return g(),V(N,{modelValue:t(r),"onUpdate:modelValue":e[5]||(e[5]=s=>w(r)?r.value=s:r=s),title:t(p),width:"500px","destroy-on-close":!0},{footer:i(()=>[$("span",A,[n(v,{onClick:e[3]||(e[3]=s=>w(r)?r.value=!1:r=!1)},{default:i(()=>[y(h(t(a)("cancel")),1)]),_:1}),n(v,{type:"primary",loading:m.value,onClick:e[4]||(e[4]=s=>M(_.value))},{default:i(()=>[y(h(t(a)("confirm")),1)]),_:1},8,["loading"])])]),default:i(()=>[z((g(),V(f,{model:o,"label-width":"90px",ref_key:"formRef",ref:_,rules:t(D),class:"page-form"},{default:i(()=>[n(u,{label:t(a)("labelName"),prop:"label_name"},{default:i(()=>[n(l,{modelValue:o.label_name,"onUpdate:modelValue":e[0]||(e[0]=s=>o.label_name=s),clearable:"",placeholder:t(a)("labelNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:t(a)("memo")},{default:i(()=>[n(l,{modelValue:o.memo,"onUpdate:modelValue":e[1]||(e[1]=s=>o.memo=s),type:"textarea",rows:"4",clearable:"",placeholder:t(a)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:t(a)("sort"),prop:"sort"},{default:i(()=>[n(l,{modelValue:o.sort,"onUpdate:modelValue":e[2]||(e[2]=s=>o.sort=s),clearable:"",placeholder:t(a)("sortPlaceholder"),class:"input-width",type:"number"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,m.value]])]),_:1},8,["modelValue","title"])}}});export{ie as _};
