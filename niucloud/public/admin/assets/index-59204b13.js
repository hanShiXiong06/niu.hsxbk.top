import"./base-962c0c23.js";/* empty css                     *//* empty css                        */import{E as j,b as z}from"./el-radio-bfd4b1ad.js";/* empty css                  *//* empty css                 */import{J as A,v as c}from"./event-ff03ec12.js";import{t as o}from"./index-105fbad0.js";import{a as H}from"./vue-router-79053937.js";import{g as K}from"./weapp-494503b1.js";import{u as O}from"./sys-4abedf95.js";import{a as B,d as Q}from"./storage-abe718b1.js";import{b as Z}from"./browser-a1ac24ac.js";import{a as F}from"./index-d57cc47d.js";import{E as ee}from"./index-93f2c618.js";import{E as ae}from"./index-bba9e58c.js";import{a as te,E as oe}from"./index-61c777fa.js";import{E as le}from"./index-190f0dba.js";import{d as re,r as s,M as se,w as ie,b as u,e as I,L as _,f as i,x as n,u as r,q as a,p as l,v,F as L,C as T,m as U}from"./runtime-core.esm-bundler-dc7a07d7.js";import"./common-080b9b9f.js";import"./common-2cf17469.js";import"./index-7525671c.js";import"./el-overlay-60700377.js";import"./index-5d86eb33.js";import"./focus-trap-b8b5a003.js";import"./index-8bcaafa6.js";import"./index-7a123a20.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./el-tooltip-58212670.js";import"./el-avatar-3bb47ce2.js";import"./_Uint8Array-6ff3cafa.js";import"./_initCloneObject-28e6bdaa.js";const pe={class:"main-container"},ne={class:"flex h-[700px] bg-body p-[20px]"},me=["src"],de={class:"w-[375px] border border-slate-100 pt-[20px] px-[20px]"},ce={class:"font-bold text-xl mb-[40px]"},ue={class:"mb-[20px] flex flex-col"},_e={class:"mb-[10px]"},ve={class:"w-[500px] ml-[40px]"},fe={class:"info-wrap mt-[20px]"},we={class:"text-gray-400"},Oe=re({__name:"index",setup(xe){const f=s(""),w=s(""),x=s(""),p=s(""),k=s(!1),b=s(!1),g=s(!1),R=s(0);new Date().getTime(),O().then(t=>{w.value=t.data.wap_domain,f.value=t.data.wap_url,C()});const $=()=>{f.value=w.value+"/wap",C(),B.set({key:"wap_domain",data:f.value}),b.value=!0,g.value=!1},C=()=>{let t=B.get("siteInfo"),e=0;t&&(e=t.site_id),p.value=`${f.value}/pages/index/index?mode=preview&site_id=${e}`,Z.toDataURL(p.value,{errorCorrectionLevel:"L",margin:0,width:100}).then(h=>{x.value=h})},M=()=>{if(p.value){var t=new Date().getTime(),e=t-R.value;e<1e3?(g.value=!0,b.value=!1,p.value="",x.value=""):(g.value=!1,b.value=!0),k.value=!0}},V=H(),E=se({qr_code:""}),y=s("weapp");K().then(t=>{if(t.code==1){let e=t.data;E.qr_code=e.qr_code}}),V.resolve({path:"/decorate/edit",query:{name:"DIY_INDEX"}});const P=()=>{V.push("/decorate/edit?name=DIY_INDEX&back=/diy/index")},{copy:X,isSupported:Y,copied:q}=A(),G=t=>{Y.value||F({message:o("notSupportCopy"),type:"warning"}),X(t)};return ie(q,()=>{q.value&&F({message:o("copySuccess"),type:"success"})}),(t,e)=>{const h=ee,D=ae,N=j,J=z,m=te,S=le,W=oe;return u(),I("div",pe,[_(i("div",ne,[_(i("iframe",{class:"w-[375px] border border-slate-100",src:p.value,frameborder:"0",id:"previewIframe",onLoad:M},null,40,me),[[c,b.value]]),_(i("div",de,[i("div",ce,n(r(o)("developTitle")),1),i("div",ue,[i("text",_e,n(r(o)("wapDomain")),1),a(h,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=d=>w.value=d),placeholder:r(o)("wapDomainPlaceholder"),clearable:""},null,8,["modelValue","placeholder"])]),a(D,{type:"primary",onClick:$},{default:l(()=>[v(n(r(o)("confirm")),1)]),_:1})],512),[[c,g.value]]),i("div",ve,[a(D,{type:"primary",onClick:e[1]||(e[1]=d=>P())},{default:l(()=>[v(n(r(o)("decorate")),1)]),_:1}),i("div",fe,[a(W,{"label-width":"80px",class:"px-[10px]"},{default:l(()=>[a(m,{label:r(o)("preview")},{default:l(()=>[a(J,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=d=>y.value=d)},{default:l(()=>[a(N,{label:"weapp"},{default:l(()=>[v(n(r(o)("weapp")),1)]),_:1}),a(N,{label:"wechat"},{default:l(()=>[v(n(r(o)("wechat")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),y.value=="wechat"?(u(),I(L,{key:0},[_(a(m,{label:r(o)("link")},{default:l(()=>[a(h,{readonly:"",value:p.value},{append:l(()=>[a(D,{onClick:e[3]||(e[3]=d=>G(p.value)),class:"bg-primary copy"},{default:l(()=>[v(n(r(o)("copy")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),[[c,p.value]]),_(a(m,{label:" "},{default:l(()=>[a(S,{src:x.value},null,8,["src"])]),_:1},512),[[c,x.value]])],64)):T("",!0),y.value=="weapp"?(u(),I(L,{key:1},[E.qr_code?(u(),U(m,{key:0,label:" "},{default:l(()=>[a(S,{class:"w-[100px] h-[100px]",src:r(Q)(E.qr_code)},null,8,["src"])]),_:1})):(u(),U(m,{key:1,label:" "},{default:l(()=>[i("span",we,n(r(o)("weappNotSet")),1)]),_:1}))],64)):T("",!0)]),_:1})])])],512),[[c,k.value]])])}}});export{Oe as default};
