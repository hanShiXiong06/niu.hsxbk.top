import"./base-962c0c23.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                     *//* empty css                        *//* empty css                 */import{E as T,b as j}from"./el-radio-bfd4b1ad.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-9977cd4d.js";import{_ as M}from"./index-f4731ae1.js";/* empty css               *//* empty css                  *//* empty css                  */import{D as z}from"./index-7525671c.js";import"./el-tooltip-58212670.js";import{u as G,t}from"./index-105fbad0.js";import{c as H,f as J,h as K,i as Q}from"./article-6bb0e548.js";import{u as W,a as X}from"./vue-router-79053937.js";import{a as Y}from"./index-d57cc47d.js";import{E as Z}from"./index-93f2c618.js";import{a as ee,E as te}from"./index-61c777fa.js";import{a as oe,E as le}from"./index-b933df38.js";import{E as ae}from"./index-fb71f009.js";import{E as re}from"./index-69523418.js";import{E as ie}from"./index-bba9e58c.js";import{v as se}from"./directive-c0c3e9a3.js";import{d as ne,r as h,M as me,c as de,b as c,e as U,f as d,u as a,x as u,q as r,p as i,L as pe,m as C,F as ue,t as ce,v as _}from"./runtime-core.esm-bundler-dc7a07d7.js";import"./event-ff03ec12.js";import"./index.vue_vue_type_style_index_0_lang-d0d31f1b.js";import"./el-overlay-60700377.js";import"./index-5d86eb33.js";import"./focus-trap-b8b5a003.js";import"./attachment-56217309.js";/* empty css                        *//* empty css                      *//* empty css                    *//* empty css                 *//* empty css                    *//* empty css                   */import"./index-cc03da8f.js";import"./index-8bcaafa6.js";import"./sys-4abedf95.js";import"./storage-abe718b1.js";import"./index-50a00d09.js";import"./index-7a123a20.js";import"./index-a9dd5cf5.js";import"./index-190f0dba.js";import"./index-9f244af6.js";import"./index-df51d91a.js";import"./isEqual-c7d5e6d9.js";import"./_Uint8Array-6ff3cafa.js";import"./flatten-d5d1dc97.js";import"./index-100b1469.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./el-avatar-3bb47ce2.js";import"./common-080b9b9f.js";import"./common-2cf17469.js";import"./_initCloneObject-28e6bdaa.js";import"./index-4f5c40a5.js";import"./strings-4868a118.js";import"./index-179d7e6f.js";const _e={class:"main-container"},fe={class:"detail-head"},ge=d("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),be={class:"ml-[1px]"},he=d("span",{class:"adorn"},"|",-1),ve={class:"right"},Ve={class:"fixed-footer-wrap"},ye={class:"fixed-footer"},It=ne({__name:"edit",setup(we){const f=W(),g=X(),b=parseInt(f.query.id||0),m=h(!1),v=h([]),S=z();G();const k=f.meta.title,V={id:"",category_id:"",title:"",intro:"",summary:"",image:"",author:"",content:"",visit:"",visit_virtual:"",is_show:1,sort:0},o=me({...V});b&&(async(p=0)=>{if(m.value=!0,Object.assign(o,V),p){const e=await(await H(p)).data;if(!e||Object.keys(e).length==0)return Y.error(t("articleNull")),setTimeout(()=>{g.go(-1)},2e3),!1;Object.keys(o).forEach(s=>{e[s]!=null&&(o[s]=e[s])}),m.value=!1}else m.value=!1})(b),(async()=>{v.value=await(await J({})).data})();const y=h(),D=de(()=>({title:[{required:!0,message:t("titlePlaceholder"),trigger:"blur"}],category_id:[{required:!0,message:t("categoryIdPlaceholder"),trigger:"blur"}],content:[{required:!0,message:t("contentPlaceholder"),trigger:"blur"},{validator:(p,e,s)=>{!e.replace(/<[^<>]+>/g,"").replace(/&nbsp;/gi,"")&&e.indexOf("img")===-1?s(new Error(t("contentPlaceholder"))):s()},trigger:["blur","change"]}]})),F=async p=>{m.value||!p||await p.validate(async e=>{e&&(m.value=!0,(b?K:Q)(o).then(x=>{m.value=!1,w()}).catch(()=>{m.value=!1}))})},w=()=>{S.removeTab(f.path),g.push({path:"/article/list"})};return(p,e)=>{const s=Z,n=ee,x=oe,I=le,N=M,R=$,E=T,A=j,L=ae,q=te,B=re,P=ie,O=se;return c(),U("div",_e,[d("div",fe,[d("div",{class:"left",onClick:e[0]||(e[0]=l=>a(g).push({path:"/article/list"}))},[ge,d("span",be,u(a(t)("returnToPreviousPage")),1)]),he,d("span",ve,u(a(k)),1)]),r(B,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[pe((c(),C(q,{model:o,"label-width":"90px",ref_key:"formRef",ref:y,rules:a(D),class:"page-form"},{default:i(()=>[r(n,{label:a(t)("title"),prop:"title"},{default:i(()=>[r(s,{modelValue:o.title,"onUpdate:modelValue":e[1]||(e[1]=l=>o.title=l),clearable:"",placeholder:a(t)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("categoryName"),prop:"category_id"},{default:i(()=>[r(I,{modelValue:o.category_id,"onUpdate:modelValue":e[2]||(e[2]=l=>o.category_id=l),clearable:"",placeholder:a(t)("categoryIdPlaceholder"),class:"input-width"},{default:i(()=>[(c(!0),U(ue,null,ce(v.value,l=>(c(),C(x,{label:l.name,value:l.category_id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("intro"),prop:"intro"},{default:i(()=>[r(s,{modelValue:o.intro,"onUpdate:modelValue":e[3]||(e[3]=l=>o.intro=l),type:"textarea",rows:"4",clearable:"",placeholder:a(t)("introPlaceholder"),class:"input-width",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("summary"),prop:"summary"},{default:i(()=>[r(s,{modelValue:o.summary,"onUpdate:modelValue":e[4]||(e[4]=l=>o.summary=l),type:"textarea",rows:"4",clearable:"",placeholder:a(t)("summaryPlaceholder"),class:"input-width",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("image")},{default:i(()=>[r(N,{modelValue:o.image,"onUpdate:modelValue":e[5]||(e[5]=l=>o.image=l)},null,8,["modelValue"])]),_:1},8,["label"]),r(n,{label:a(t)("author"),prop:"author"},{default:i(()=>[r(s,{modelValue:o.author,"onUpdate:modelValue":e[6]||(e[6]=l=>o.author=l),clearable:"",placeholder:a(t)("authorPlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("content"),prop:"content"},{default:i(()=>[r(R,{modelValue:o.content,"onUpdate:modelValue":e[7]||(e[7]=l=>o.content=l)},null,8,["modelValue"])]),_:1},8,["label"]),r(n,{label:a(t)("visitVirtual")},{default:i(()=>[r(s,{modelValue:o.visit_virtual,"onUpdate:modelValue":e[8]||(e[8]=l=>o.visit_virtual=l),clearable:"",placeholder:a(t)("visitVirtualPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("isShow")},{default:i(()=>[r(A,{modelValue:o.is_show,"onUpdate:modelValue":e[9]||(e[9]=l=>o.is_show=l),placeholder:a(t)("isShowPlaceholder")},{default:i(()=>[r(E,{label:1},{default:i(()=>[_(u(a(t)("show")),1)]),_:1}),r(E,{label:0},{default:i(()=>[_(u(a(t)("hidden")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("sort"),prop:"sort"},{default:i(()=>[r(L,{modelValue:o.sort,"onUpdate:modelValue":e[10]||(e[10]=l=>o.sort=l),min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[O,m.value]])]),_:1}),d("div",Ve,[d("div",ye,[r(P,{type:"primary",onClick:e[11]||(e[11]=l=>F(y.value))},{default:i(()=>[_(u(a(t)("save")),1)]),_:1}),r(P,{onClick:e[12]||(e[12]=l=>w())},{default:i(()=>[_(u(a(t)("cancel")),1)]),_:1})])])])}}});export{It as default};
