import{d as ie,r as z,o as ne,E as $,R as de,c as re,V as me,e as x,f as y,Q as ue,g as a,u as o,B as d,y as s,x as n,A as m,F as g,z as q,n as ce,v as _e,H as pe,bl as fe,bm as be}from"./base-d77b0726.js";/* empty css                   *//* empty css                  *//* empty css               *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                *//* empty css                *//* empty css                *//* empty css                 */import"./el-form-item-4ed993c7.js";import{u as xe,t as l}from"./index-ace71ef4.js";import{n as ye,o as ve}from"./tools-f8409f5c.js";import{u as he,b as ge}from"./vue-router-57155f94.js";import{S as L}from"./sortable.esm-be94e56d.js";import{F as we}from"./index-331c6de1.js";import{c as O}from"./cloneDeep-52d1ae6a.js";import{E as G}from"./index-596dc00b.js";import{r as W}from"./range-ed8a9812.js";import{E as Ve}from"./index-c1eb81db.js";import{a as ke,E as qe}from"./index-68c5ad54.js";import{E as Ie,b as Ee}from"./index-ee35aabd.js";import{E as Fe}from"./index-2cf73bf7.js";import{E as ze}from"./index-04ae2ae2.js";import{E as Ne,a as Ce}from"./index-c314892b.js";import{E as Te}from"./index-e37943c3.js";import{a as Ue,E as je}from"./index-a997ab1f.js";import{E as Se}from"./index-91bdda63.js";import{v as Re}from"./directive-08cd03ab.js";import{_ as De}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-1d8e8ddc.js";import"./index-704f0685.js";import"./common-56ee0a80.js";import"./index-9e51ba8b.js";import"./typescript-defaf979.js";import"./aria-60e0cdc6.js";import"./index-de9bede2.js";import"./_isIterateeCall-ff5ab0b5.js";import"./_Uint8Array-2fd72219.js";import"./debounce-8a1738b0.js";import"./event-e06a23af.js";import"./index-d1e433eb.js";import"./index-6245131d.js";import"./_initCloneObject-22d1caee.js";import"./index-45cca80f.js";import"./focus-trap-98fda164.js";import"./index-74352d71.js";import"./index-45469947.js";import"./strings-6a15e170.js";import"./index-a20d1a31.js";import"./index-f2dc9b9f.js";import"./scroll-59301fd6.js";import"./isEqual-030b54ca.js";import"./index-ef0eb7b1.js";import"./validator-7b087194.js";const K=I=>(fe("data-v-54b17ab8"),I=I(),be(),I),Pe={class:"main-container mb-80"},Be={class:"detail-head !mb-[10px]"},Ae=K(()=>a("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1)),$e={class:"ml-[1px]"},Le=K(()=>a("span",{class:"adorn"},"|",-1)),Oe={class:"right"},Ge=["data-id"],We=["data-id"],Ke=["data-id","onClick"],Qe={class:"flex flex-row"},Ze={class:"flex flex-row design-field"},He={class:"text-xs text-gray-500 w-28 items-center justify-end flex"},Je={class:"flex flex-row design-field"},Me={class:"text-xs text-gray-500 w-28 items-center justify-end flex"},Xe={class:"flex flex-row design-field flex-shrink-0 w-40"},Ye={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},el={class:"w-50 m-2"},ll=["onClick"],tl={class:"flex flex-row"},ol={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},sl={class:"flex flex-row"},al={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},il={class:"flex flex-row"},nl={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},dl={class:"flex flex-row"},rl={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},ml={class:"flex flex-row"},ul={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},cl={class:"flex flex-row"},_l={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},pl={class:"flex flex-row"},fl={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},bl={class:"flex flex-row"},xl={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},yl={class:"flex flex-row"},vl={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},hl={class:"flex flex-row"},gl={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},wl={class:"flex flex-row"},Vl={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},kl={class:"fixed-footer-wrap"},ql={class:"fixed-footer"},Il=ie({__name:"edit2",setup(I){xe();const N=he(),C=ge(),Q=N.meta.title,T=parseInt(N.query.id||0),v=z(!0),F=we(),U=z();let j=1;const S={id:"",table_name:"",table_content:"",module_name:"",class_name:"",edit_type:1,table_column:[],editFiledIndex:0},E={common:[{column_name:"id",column_comment:l("pk"),column_type:"int",is_required:1,is_pk:1,is_insert:0,is_update:0,is_lists:0,is_query:1,is_search:0,query_type:"=",view_type:"input"},{column_name:"status",column_comment:l("status"),column_type:"int",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:0,query_type:"=",view_type:"radio"},{column_name:"create_time",column_comment:l("createTime"),column_type:"int",is_required:0,is_pk:0,is_insert:0,is_update:0,is_lists:1,is_query:1,is_search:0,query_type:"BETWEEN",view_type:"datetime"},{column_name:"update_time",column_comment:l("updateTime"),column_type:"int",is_required:0,is_pk:0,is_insert:0,is_update:0,is_lists:1,is_query:1,is_search:0,query_type:"BETWEEN",view_type:"datetime"}],base:[{column_name:"string",column_comment:l("string"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"input"},{column_name:"image",column_comment:l("image"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"imageSelect"},{column_name:"radio",column_comment:l("radio"),column_type:"int",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"radio"},{column_name:"checkbox",column_comment:l("checkbox"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"checkbox"},{column_name:"select",column_comment:l("select"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"select"},{column_name:"editor",column_comment:l("editor"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"editor"},{column_name:"datetime",column_comment:l("dateTime"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"datetime"}]},Z=["=","!=",">",">=","<","<=","LIKE","BETWEEN"],H=[{label:l("formInput"),value:"input"},{label:l("formTextarea"),value:"textarea"},{label:l("formSelect"),value:"select"},{label:l("formRadio"),value:"radio"},{label:l("formCheckbox"),value:"checkbox"},{label:l("formDateTime"),value:"datetime"},{label:l("formImageSelect"),value:"imageSelect"},{label:l("formEditor"),value:"editor"}],J=c=>{e.editFiledIndex=c};ne(()=>{const c=L.create(U.value,{group:"design-field",animation:200,onAdd:t=>{var _,f;const r=(f=(_=t.originalEvent)==null?void 0:_.dataTransfer)==null?void 0:f.getData("name"),u=E[r];if(u&&u[t.oldIndex]){const b=O(u[t.oldIndex]);if(b.is_pk){if(e.table_column.find(V=>V.is_pk))return G({type:"error",message:l("pkRepeatTip")}),t.item.remove();e.table_column.defaultSortField=b.name,e.table_column.quickSearchField.push(b.name)}M(e.table_column,"column_name",b.column_name)&&(b.column_name=b.column_name+j,j++),e.table_column.splice(t.newIndex,0,b)}t.item.remove(),$(()=>{c.sort(W(e.table_column.length).map(b=>b.toString()))})},onEnd:t=>{const r=e.table_column[t.oldIndex];e.table_column.splice(t.oldIndex,1),e.table_column.splice(t.newIndex,0,r),$(()=>{c.sort(W(e.table_column.length).map(u=>u.toString()))})}});F.value.forEach((t,r)=>{L.create(t,{sort:!1,group:{name:"design-field",pull:"clone",put:!1},animation:200,setData:u=>{u.setData("name",Object.keys(E)[r])}})})});const M=(c,t,r)=>{for(const u in c)if(c[u][t]==r)return u;return!1},e=de({...S});T&&(async(c=0)=>{Object.assign(e,S);const t=await(await ye(c)).data;Object.keys(e).forEach(r=>{t[r]!=null&&(e[r]=t[r])}),v.value=!1})(T);const R=z(),D=c=>/^([a-zA-Z_$])([a-zA-Z0-9_$])*$/.test(c),X=re(()=>({table_name:[{required:!0,message:l("tableNamePlaceholder"),trigger:"blur"},{validator:(c,t,r)=>{D(t)||r(new Error(l("tableNameValidata"))),r()},trigger:"blur"}],table_content:[{required:!0,message:l("tableContentPlaceholder"),trigger:"blur"}]})),Y=async c=>{if(v.value||!c)return;let t="";if(e.table_column.find(u=>{if(!D(u.column_name))return t=u.column_name+" "+l("fieldNameValidata"),!0}),t){G({type:"error",message:t});return}v.value=!0;const r=O(e);r.table_column=JSON.stringify(r.table_column),ve(r).then(u=>{v.value=!1}).catch(()=>{v.value=!1})},ee=c=>{e.table_column[c]&&(e.editFiledIndex==c&&(e.editFiledIndex=0),e.table_column.splice(c,1))},le=()=>{C.push({path:"/tools/code"})};return(c,t)=>{const r=Ve,u=ke,_=Ie,f=Ee,b=qe,w=Fe,h=ze,V=Ne,te=me("Delete"),oe=Te,P=Ue,B=je,se=Ce,A=Se,ae=Re;return x(),y(g,null,[ue((x(),y("div",Pe,[a("div",Be,[a("div",{class:"left",onClick:t[0]||(t[0]=i=>o(C).push({path:"/tools/code"}))},[Ae,a("span",$e,d(o(l)("returnToPreviousPage")),1)]),Le,a("span",Oe,d(o(Q)),1)]),s(w,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[s(b,{model:e,"label-width":"90px",ref_key:"formRef",ref:R,rules:o(X),class:"page-form"},{default:n(()=>[s(u,{label:o(l)("tableName"),prop:"table_name"},{default:n(()=>[s(r,{modelValue:e.table_name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.table_name=i),clearable:"",placeholder:o(l)("tableNamePlaceholder"),class:"input-width",maxlength:"64"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(u,{label:o(l)("tableContent"),prop:"table_content"},{default:n(()=>[s(r,{modelValue:e.table_content,"onUpdate:modelValue":t[2]||(t[2]=i=>e.table_content=i),clearable:"",placeholder:o(l)("tableContentPlaceholder"),class:"input-width",maxlength:"64"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(u,{label:o(l)("moduleName")},{default:n(()=>[s(r,{modelValue:e.module_name,"onUpdate:modelValue":t[3]||(t[3]=i=>e.module_name=i),clearable:"",placeholder:o(l)("moduleNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(u,{label:o(l)("className")},{default:n(()=>[s(r,{modelValue:e.class_name,"onUpdate:modelValue":t[4]||(t[4]=i=>e.class_name=i),clearable:"",placeholder:o(l)("classNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(u,{label:o(l)("editType")},{default:n(()=>[s(f,{modelValue:e.edit_type,"onUpdate:modelValue":t[5]||(t[5]=i=>e.edit_type=i),placeholder:o(l)("editTypePlaceholder")},{default:n(()=>[s(_,{label:1},{default:n(()=>[m(d(o(l)("popup")),1)]),_:1}),s(_,{label:2},{default:n(()=>[m(d(o(l)("page")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1}),s(se,{class:"flex mt-4",gutter:15},{default:n(()=>[s(V,{span:6},{default:n(()=>[s(w,{class:"box-card !border-none p-none",shadow:"never"},{default:n(()=>[s(h,{"content-position":"left"},{default:n(()=>[m(d(o(l)("commentField")),1)]),_:1}),a("div",{class:"flex flex-row m-0.5 cursor-pointer flex-wrap",ref:o(F).set},[(x(!0),y(g,null,q(E.common,(i,p)=>(x(),y("div",{class:"border border-dashed border-gray-200 mt-2 text-sm mr-2 pt-1 pb-1 pl-1.5 pr-1.5 dashed-border design-field",key:p,"data-id":p},d(i.column_comment),9,Ge))),128))],512),s(h,{"content-position":"left"},{default:n(()=>[m(d(o(l)("baseField")),1)]),_:1}),a("div",{class:"flex flex-row m-0.5 cursor-pointer flex-wrap",ref:o(F).set},[(x(!0),y(g,null,q(E.base,(i,p)=>(x(),y("div",{class:"border border-dashed border-gray-200 mt-2 text-sm mr-2 pt-1 pb-1 pl-1.5 pr-1.5 dashed-border design-field",key:p,"data-id":p},d(i.column_comment),9,We))),128))],512)]),_:1})]),_:1}),s(V,{span:12},{default:n(()=>[s(w,{class:"box-card !border-none p-none",shadow:"never"},{default:n(()=>[a("div",{class:"flex flex-col",ref_key:"fieldBoxRef",ref:U},[(x(!0),y(g,null,q(e.table_column,(i,p)=>(x(),y("div",{class:ce(["flex flex-row m-0.5 cursor-pointer justify-between items-center border border-dashed border-gray-200 dashed-border p-2 pt-1 pb-1",p===e.editFiledIndex?"activate":""]),key:p,"data-id":p,onClick:k=>J(p)},[a("div",Qe,[a("div",Ze,[a("div",He,d(o(l)("columnName"))+"：",1),s(r,{class:"w-50 m-2",modelValue:i.column_name,"onUpdate:modelValue":k=>i.column_name=k,size:"small",placeholder:o(l)("columnNamePlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),a("div",Je,[a("div",Me,d(o(l)("columnComment"))+"：",1),s(r,{class:"w-50 m-2",modelValue:i.column_comment,"onUpdate:modelValue":k=>i.column_comment=k,size:"small",placeholder:o(l)("columnCommentPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),a("div",Xe,[a("div",Ye,d(o(l)("columnType"))+"：",1),a("div",el,d(i.column_type),1)])]),a("div",{onClick:k=>ee(p),class:"items-center justify-center flex items-center flex-shrink-0 rounded-full bg-red-400 text-white icon-btn w-7 h-7"},[s(oe,null,{default:n(()=>[s(te)]),_:1})],8,ll)],10,Ke))),128))],512)]),_:1})]),_:1}),s(V,{span:6},{default:n(()=>[e.table_column.length?(x(),_e(w,{key:0,class:"box-card !border-none p-none",shadow:"never"},{default:n(()=>[s(h,{"content-position":"left"},{default:n(()=>[m(d(o(l)("fieldAttribute")),1)]),_:1}),a("div",null,[a("div",tl,[a("div",ol,d(o(l)("columnName"))+"： ",1),a("div",null,[s(r,{class:"w-50 m-2",modelValue:e.table_column[e.editFiledIndex].column_name,"onUpdate:modelValue":t[6]||(t[6]=i=>e.table_column[e.editFiledIndex].column_name=i),size:"small",placeholder:o(l)("columnNamePlaceholder")},null,8,["modelValue","placeholder"])])]),a("div",sl,[a("div",al,d(o(l)("columnComment"))+"： ",1),a("div",null,[s(r,{class:"w-50 m-2",modelValue:e.table_column[e.editFiledIndex].column_comment,"onUpdate:modelValue":t[7]||(t[7]=i=>e.table_column[e.editFiledIndex].column_comment=i),size:"small",placeholder:o(l)("columnCommentPlaceholder")},null,8,["modelValue","placeholder"])])]),a("div",il,[a("div",nl,d(o(l)("isPk"))+"：",1),a("div",null,[s(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_pk,"onUpdate:modelValue":t[8]||(t[8]=i=>e.table_column[e.editFiledIndex].is_pk=i)},{default:n(()=>[s(_,{label:1,size:"large"},{default:n(()=>[m(d(o(l)("yes")),1)]),_:1}),s(_,{label:0,size:"large"},{default:n(()=>[m(d(o(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),a("div",dl,[a("div",rl,d(o(l)("viewType"))+"： ",1),a("div",null,[s(B,{class:"m-2",placeholder:o(l)("selectPlaceholder"),size:"small",modelValue:e.table_column[e.editFiledIndex].view_type,"onUpdate:modelValue":t[9]||(t[9]=i=>e.table_column[e.editFiledIndex].view_type=i)},{default:n(()=>[(x(),y(g,null,q(H,(i,p)=>s(P,{label:i.label,value:i.value,key:p},null,8,["label","value"])),64))]),_:1},8,["placeholder","modelValue"])])])]),s(h,{"content-position":"left"},{default:n(()=>[m(d(o(l)("addAndEdit")),1)]),_:1}),a("div",null,[a("div",ml,[a("div",ul,d(o(l)("isInsert"))+"： ",1),a("div",null,[s(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_insert,"onUpdate:modelValue":t[10]||(t[10]=i=>e.table_column[e.editFiledIndex].is_insert=i)},{default:n(()=>[s(_,{label:1,size:"large"},{default:n(()=>[m(d(o(l)("yes")),1)]),_:1}),s(_,{label:0,size:"large"},{default:n(()=>[m(d(o(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),a("div",cl,[a("div",_l,d(o(l)("isUpdate"))+"： ",1),a("div",null,[s(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_update,"onUpdate:modelValue":t[11]||(t[11]=i=>e.table_column[e.editFiledIndex].is_update=i)},{default:n(()=>[s(_,{label:1,size:"large"},{default:n(()=>[m(d(o(l)("yes")),1)]),_:1}),s(_,{label:0,size:"large"},{default:n(()=>[m(d(o(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),a("div",pl,[a("div",fl,d(o(l)("isRequired"))+"： ",1),a("div",null,[s(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_required,"onUpdate:modelValue":t[12]||(t[12]=i=>e.table_column[e.editFiledIndex].is_required=i)},{default:n(()=>[s(_,{label:1,size:"large"},{default:n(()=>[m(d(o(l)("yes")),1)]),_:1}),s(_,{label:0,size:"large"},{default:n(()=>[m(d(o(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])])]),s(h,{"content-position":"left"},{default:n(()=>[m(d(o(l)("listSearch")),1)]),_:1}),a("div",null,[a("div",bl,[a("div",xl,d(o(l)("isLists"))+"：",1),a("div",null,[s(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_lists,"onUpdate:modelValue":t[13]||(t[13]=i=>e.table_column[e.editFiledIndex].is_lists=i)},{default:n(()=>[s(_,{label:1,size:"large"},{default:n(()=>[m(d(o(l)("yes")),1)]),_:1}),s(_,{label:0,size:"large"},{default:n(()=>[m(d(o(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),a("div",yl,[a("div",vl,d(o(l)("isSearch"))+"： ",1),a("div",null,[s(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_search,"onUpdate:modelValue":t[14]||(t[14]=i=>e.table_column[e.editFiledIndex].is_search=i)},{default:n(()=>[s(_,{label:1,size:"large"},{default:n(()=>[m(d(o(l)("yes")),1)]),_:1}),s(_,{label:0,size:"large"},{default:n(()=>[m(d(o(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),a("div",hl,[a("div",gl,d(o(l)("isQuery"))+"：",1),a("div",null,[s(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_query,"onUpdate:modelValue":t[15]||(t[15]=i=>e.table_column[e.editFiledIndex].is_query=i)},{default:n(()=>[s(_,{label:1,size:"large"},{default:n(()=>[m(d(o(l)("yes")),1)]),_:1}),s(_,{label:0,size:"large"},{default:n(()=>[m(d(o(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),a("div",wl,[a("div",Vl,d(o(l)("queryType"))+"： ",1),a("div",null,[s(B,{class:"m-2",placeholder:o(l)("selectPlaceholder"),size:"small",modelValue:e.table_column[e.editFiledIndex].query_type,"onUpdate:modelValue":t[16]||(t[16]=i=>e.table_column[e.editFiledIndex].query_type=i)},{default:n(()=>[(x(),y(g,null,q(Z,(i,p)=>s(P,{label:i,value:i,key:p},null,8,["label","value"])),64))]),_:1},8,["placeholder","modelValue"])])])])]),_:1})):pe("",!0)]),_:1})]),_:1})])),[[ae,v.value]]),a("div",kl,[a("div",ql,[s(A,{type:"primary",onClick:t[17]||(t[17]=i=>Y(R.value))},{default:n(()=>[m(d(o(l)("save")),1)]),_:1}),s(A,{onClick:t[18]||(t[18]=i=>le())},{default:n(()=>[m(d(o(l)("cancel")),1)]),_:1})])])],64)}}});const Ut=De(Il,[["__scopeId","data-v-54b17ab8"]]);export{Ut as default};
