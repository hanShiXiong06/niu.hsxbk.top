import{d as R,r as v,o as L,Q as M,e as h,f,g as s,u as o,B as d,y as r,x as n,v as P,A as y,H as E,F as j,z as I}from"./base-d77b0726.js";/* empty css                   *//* empty css                *//* empty css                *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                  */import{_ as O}from"./index-6cf4d125.js";import"./el-form-item-4ed993c7.js";import{t as e}from"./index-70af0995.js";import{a as Z,b as G,c as H,e as K,d as Q}from"./tools-cb251091.js";import{u as J,b as W}from"./vue-router-57155f94.js";import{E as X}from"./index-5b262c6a.js";import{a as Y}from"./index-9e51ba8b.js";import{E as ee}from"./index-c1eb81db.js";import{a as te,E as oe}from"./index-68c5ad54.js";import{E as le}from"./index-91bdda63.js";import{a as ae,E as re}from"./index-a997ab1f.js";import{E as se}from"./index-2cf73bf7.js";import{v as ie}from"./directive-08cd03ab.js";/* empty css                        */import"./index.vue_vue_type_style_index_0_lang-9f74eab2.js";/* empty css                   */import"./attachment-01140c65.js";import"./index-331c6de1.js";import"./index-e37943c3.js";/* empty css                      *//* empty css                    *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                    *//* empty css                         */import"./index-d7cd2cc3.js";import"./index-45cca80f.js";import"./aria-60e0cdc6.js";import"./index-6245131d.js";import"./index-de9bede2.js";import"./focus-trap-98fda164.js";import"./index-1aa3caaa.js";import"./index-74352d71.js";import"./event-e06a23af.js";import"./index-a20d1a31.js";import"./index-6a54cf26.js";import"./index-b3418ddc.js";import"./scroll-59301fd6.js";import"./vnode-5920e7a9.js";import"./index-f2dc9b9f.js";import"./index.vue_vue_type_script_setup_true_lang-8d43c28e.js";/* empty css                */import"./sys-394b27a4.js";import"./index-45ac90c3.js";import"./index-704f0685.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./common-4a1cac58.js";import"./index-bbf3e154.js";import"./typescript-defaf979.js";import"./index-c314892b.js";import"./index-435afe75.js";import"./index-3b19c3d7.js";import"./debounce-8a1738b0.js";import"./index-d1e433eb.js";import"./position-09adcf79.js";import"./index-294b617f.js";import"./index-52f984e1.js";import"./isEqual-030b54ca.js";import"./_Uint8Array-2fd72219.js";import"./index-f956e728.js";import"./aria-adfa05c5.js";import"./validator-7b087194.js";import"./_initCloneObject-22d1caee.js";import"./index-45469947.js";import"./strings-6a15e170.js";import"./index-ef0eb7b1.js";const ne={class:"main-container mb-80"},pe={class:"detail-head !mb-[10px]"},de=s("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),ue={class:"ml-[1px]"},me=s("span",{class:"adorn"},"|",-1),ce={class:"right"},ve={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},he={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},_e={class:"text-[12px] text-[#a9a9a9] leading-normal"},ge={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},fe={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},ye={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},xe={class:"text-[12px] text-[#a9a9a9] leading-normal"},be={key:0,class:"fixed-footer-wrap"},Ve={class:"fixed-footer"},Qt=R({__name:"edit",setup(ke){const c=J(),_=W(),w=c.meta.title,l=v({title:"",icon:"",key:"",desc:"",author:"",version:"",cover:"",type:"",support_app:""}),x=v([]),m=v(!1),b=v(),q=(u,t,i)=>t!==""?/^[a-zA-Z][a-zA-Z0-9_]*$/.test(t)?i():i(new Error(e("keyPlaceholderErr"))):i(new Error(e("keyPlaceholder"))),C=(u,t,i)=>t!==""?/^([1-9]\d|[1-9])(\.([0-9]){1}){2}$/.test(t)?i():i(new Error(e("versionPlaceholderErr"))):i(new Error(e("versionPlaceholder"))),A=v({title:[{required:!0,message:e("titlePlaceholder"),trigger:"blur"}],icon:[{required:!0,message:e("iconPlaceholder"),trigger:"change"}],key:[{required:!0,validator:q,trigger:"blur"}],author:[{required:!0,message:e("authorPlaceholder"),trigger:"blur"}],version:[{required:!0,validator:C,trigger:"blur"}],cover:[{required:!0,message:e("coverPlaceholder"),trigger:"change"}],type:[{required:!0,message:e("typePlaceholder"),trigger:"change"}]});L(async()=>{let u=await Z();x.value=u.data,c.query.key&&D(c.query.key)});const B=()=>{l.value.support_app=""},D=u=>{m.value=!0,G(u).then(t=>{l.value=Object.assign(l.value,t.data),m.value=!1}).catch(()=>{m.value=!1})},U=u=>{H(u).then(t=>{X.alert(t.data?e("warningText"):e("successText"),e("warning"),{confirmButtonText:e("confirm"),callback:i=>{console.log(i)}})})},T=async u=>{await u.validate(async t=>{if(t){let i=c.query.key?K:Q;m.value=!0,i(l.value.key,l.value).then(p=>{m.value=!1,Y({message:e("onSaveSuccessText"),type:"success"}),setTimeout(()=>{window.addonActiveName="pluginList",_.push({path:"/tools/addon"})},650)}).catch(()=>{m.value=!1})}})};return(u,t)=>{const i=ee,p=te,V=O,g=le,F=ae,N=re,$=oe,S=se,z=ie;return M((h(),f("div",ne,[s("div",pe,[s("div",{class:"left",onClick:t[0]||(t[0]=a=>o(_).push({path:"/tools/addon"}))},[de,s("span",ue,d(o(e)("returnToPreviousPage")),1)]),me,s("span",ce,d(o(w)),1)]),r(S,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[r($,{model:l.value,"label-width":"90px",ref_key:"formRef",ref:b,rules:A.value,class:"page-form"},{default:n(()=>[r(p,{label:o(e)("title"),prop:"title"},{default:n(()=>[r(i,{modelValue:l.value.title,"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.title=a),clearable:"",placeholder:o(e)("titlePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(p,{label:o(e)("icon"),prop:"icon"},{default:n(()=>[s("div",null,[r(V,{modelValue:l.value.icon,"onUpdate:modelValue":t[2]||(t[2]=a=>l.value.icon=a)},null,8,["modelValue"]),s("p",ve,d(o(e)("iconPlaceholder1")),1)])]),_:1},8,["label"]),r(p,{label:o(e)("key"),prop:"key"},{default:n(()=>[s("div",null,[r(i,{modelValue:l.value.key,"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.key=a),clearable:"",disabled:o(c).query.key,placeholder:o(e)("keyPlaceholder"),class:"input-width mr-[15px]"},null,8,["modelValue","disabled","placeholder"]),o(c).query.key?E("",!0):(h(),P(g,{key:0,type:"primary",disabled:l.value.key=="",onClick:t[4]||(t[4]=a=>U(l.value.key))},{default:n(()=>[y("标识检测")]),_:1},8,["disabled"])),s("p",he,d(o(e)("keyPlaceholder1")),1),s("p",_e,d(o(e)("keyPlaceholder2")),1)])]),_:1},8,["label"]),r(p,{label:o(e)("desc"),prop:"desc"},{default:n(()=>[r(i,{type:"textarea",modelValue:l.value.desc,"onUpdate:modelValue":t[5]||(t[5]=a=>l.value.desc=a),clearable:"",placeholder:o(e)("descPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(p,{label:o(e)("author"),prop:"author"},{default:n(()=>[r(i,{modelValue:l.value.author,"onUpdate:modelValue":t[6]||(t[6]=a=>l.value.author=a),clearable:"",placeholder:o(e)("authorPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(p,{label:o(e)("version"),prop:"version"},{default:n(()=>[s("div",null,[r(i,{modelValue:l.value.version,"onUpdate:modelValue":t[7]||(t[7]=a=>l.value.version=a),clearable:"",placeholder:o(e)("versionPlaceholder"),class:"input-width",onkeyup:"this.value = this.value.replace(/[^\\d\\.]/g,'');"},null,8,["modelValue","placeholder"]),s("p",ge,d(o(e)("versionPlaceholder1")),1)])]),_:1},8,["label"]),r(p,{label:o(e)("cover"),prop:"cover"},{default:n(()=>[s("div",null,[r(V,{modelValue:l.value.cover,"onUpdate:modelValue":t[8]||(t[8]=a=>l.value.cover=a)},null,8,["modelValue"]),s("p",fe,d(o(e)("coverPlaceholder1")),1)])]),_:1},8,["label"]),r(p,{label:o(e)("type"),prop:"type"},{default:n(()=>[s("div",null,[r(N,{modelValue:l.value.type,"onUpdate:modelValue":t[9]||(t[9]=a=>l.value.type=a),placeholder:o(e)("typePlaceholder"),class:"input-width",clearable:"",onChange:B},{default:n(()=>[(h(!0),f(j,null,I(x.value,(a,k)=>(h(),P(F,{key:k,label:a,value:k},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),s("p",ye,d(o(e)("typePlaceholder1")),1),s("p",xe,d(o(e)("typePlaceholder2")),1)])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1}),m.value?E("",!0):(h(),f("div",be,[s("div",Ve,[r(g,{type:"primary",onClick:t[10]||(t[10]=a=>T(b.value))},{default:n(()=>[y(d(o(e)("GeneratePlugins")),1)]),_:1}),r(g,{onClick:t[11]||(t[11]=a=>o(_).push({path:"/tools/addon"}))},{default:n(()=>[y(d(o(e)("cancel")),1)]),_:1})])]))])),[[z,m.value]])}}});export{Qt as default};
