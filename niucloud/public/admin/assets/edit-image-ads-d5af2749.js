import"./base-962c0c23.js";/* empty css                     *//* empty css                  */import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-9af89582.js";import{B as S}from"./index-da7837ad.js";import{_ as U}from"./index-7b9b3fcb.js";/* empty css                 */import{v as _}from"./event-ff03ec12.js";import{t as l}from"./index-2af60c2e.js";import{S as B}from"./sortable.esm-be94e56d.js";import{d as T}from"./storage-abe718b1.js";import{u as A}from"./diy-6cd3063b.js";import{r as F}from"./range-5a416794.js";import{E as R}from"./index-93f2c618.js";import{a as $,E as N}from"./index-61c777fa.js";import{E as z}from"./index-bba9e58c.js";import{d as D,w as P,r as W,o as j,A as L,b as f,e as h,L as g,u as a,f as d,x as b,q as n,p,v as x,F as C,t as M,g as O}from"./runtime-core.esm-bundler-dc7a07d7.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";const G={class:"content-wrap"},J={class:"edit-attr-item-wrap"},K={class:"mb-[10px]"},Q={class:"text-sm text-gray-400 mb-[10px]"},X=["onClick"],Y={class:"style-wrap"},Z=D({__name:"edit-image-ads",setup(te,{expose:w}){const e=A();e.editComponent.ignore=[],e.editComponent.verify=i=>{var t={code:!0,message:""};return e.value[i].imageHeight==0?(t.code=!1,t.message=l("imageHeightPlaceholder"),t):/^\d+.?\d{0,2}$/.test(e.value[i].imageHeight)?(e.value[i].list.forEach(o=>{if(o.imageUrl==="")return t.code=!1,t.message=l("imageUrlTip"),t}),t):(t.code=!1,t.message=l("imageHeightRegNum"),t)},e.editComponent.list.forEach(i=>{i.id||(i.id=e.generateRandom())}),P(()=>e.editComponent.list,(i,t)=>{e.editComponent.list.forEach((o,s)=>{let m=new Image;m.src=T(o.imageUrl),m.onload=async()=>{if(o.imgWidth=m.width,o.imgHeight=m.height,s==0){var u=o.imgHeight/o.imgWidth;o.width=375,o.height=o.width*u,e.editComponent.imageHeight=o.height}}})},{deep:!0});const y=()=>{e.editComponent.list.push({id:e.generateRandom(),imageUrl:"",imgWidth:0,imgHeight:0,link:{name:""}})},v=W();return j(()=>{L(()=>{const i=B.create(v.value,{group:"item-wrap",animation:200,onEnd:t=>{const o=e.editComponent.list[t.oldIndex];e.editComponent.list.splice(t.oldIndex,1),e.editComponent.list.splice(t.newIndex,0,o),i.sort(F(e.editComponent.list.length).map(s=>s.toString()))}})})}),w({}),(i,t)=>{const o=R,s=$,m=U,u=S,V=I,k=z,E=N;return f(),h(C,null,[g(d("div",G,[d("div",J,[d("h3",K,b(a(l)("imageSet")),1),n(E,{"label-width":"80px",class:"px-[10px]"},{default:p(()=>[n(s,{label:a(l)("imageHeight"),class:"display-block"},{default:p(()=>[n(o,{modelValue:a(e).editComponent.imageHeight,"onUpdate:modelValue":t[0]||(t[0]=r=>a(e).editComponent.imageHeight=r),placeholder:a(l)("imageHeightPlaceholder"),clearable:"",maxlength:"10"},{append:p(()=>[x("px")]),_:1},8,["modelValue","placeholder"]),d("div",Q,b(a(l)("imageAdsTips")),1)]),_:1},8,["label"]),d("div",{ref_key:"imageBoxRef",ref:v},[(f(!0),h(C,null,M(a(e).editComponent.list,(r,H)=>(f(),h("div",{key:r.id,class:"item-wrap p-[10px] pb-0 relative border border-dashed border-gray-300 mb-[16px]"},[n(s,{label:a(l)("image")},{default:p(()=>[n(m,{modelValue:r.imageUrl,"onUpdate:modelValue":c=>r.imageUrl=c,limit:1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),g(d("div",{class:"del absolute cursor-pointer z-[2] top-[-8px] right-[-8px]",onClick:c=>a(e).editComponent.list.splice(H,1)},[n(u,{name:"element-CircleCloseFilled",color:"#bbb",size:"20px"})],8,X),[[_,a(e).editComponent.list.length>1]]),n(s,{label:a(l)("link")},{default:p(()=>[n(V,{modelValue:r.link,"onUpdate:modelValue":c=>r.link=c},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]))),128))],512),g(n(k,{class:"w-full",onClick:y},{default:p(()=>[x(b(a(l)("addImageAd")),1)]),_:1},512),[[_,a(e).editComponent.list.length<10]])]),_:1})])],512),[[_,a(e).editTab=="content"]]),g(d("div",Y,[O(i.$slots,"style",{},void 0,!0)],512),[[_,a(e).editTab=="style"]])],64)}}});const ee=q(Z,[["__scopeId","data-v-8ccf7d77"]]),xe=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{xe as _};
