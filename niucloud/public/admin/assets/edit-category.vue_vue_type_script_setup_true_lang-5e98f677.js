import{g as I,r as g,a4 as U,j,m as y,D as V,E as r,q as P,F as n,c as h,K as p,L as f,u as l,a1 as S}from"./base-45eb5090.js";/* empty css                   */import{E as q}from"./el-overlay-616d6124.js";/* empty css                  *//* empty css                     */import{E as L,b as O}from"./el-radio-2719e44c.js";/* empty css                        *//* empty css                 */import{t as o}from"./index-3694a2b2.js";import{e as T,a as k,b as G}from"./article-6844cd75.js";import{E as K}from"./index-4ce9333e.js";import{a as M,E as $}from"./index-2bfbe5a7.js";import{E as z}from"./index-038ec88a.js";import{E as H}from"./index-25c37860.js";import{v as J}from"./directive-9f485fe5.js";const Q={class:"dialog-footer"},fe=I({__name:"edit-category",emits:["complete"],setup(W,{expose:C,emit:D}){let c="",i=g(!1);const m=g(!0),v={category_id:"",name:"",sort:"",is_show:1},a=U({...v}),b=g(),x=j(()=>({name:[{required:!0,message:o("namePlaceholder"),trigger:"blur"},{validator:(d,e,t)=>{e.length>20&&t(new Error(o("nameMax"))),t()},trigger:"blur"}],sort:[{validator:(d,e,t)=>{(e===""||isNaN(e))&&t(new Error(o("sortNumber"))),parseInt(e)>1e4&&t(new Error(o("sortBetween"))),t()},trigger:"blur"}]})),N=async d=>{if(m.value||!d)return;let e=a.category_id?T:k;await d.validate(async t=>{t&&(m.value=!0,e(a).then(_=>{m.value=!1,i.value=!1,D("complete")}).catch(_=>{m.value=!1}))})};return C({showDialog:i,setFormData:async(d=null)=>{if(m.value=!0,Object.assign(a,v),c=o("addArticleCategory"),d){c=o("updateArticleCategory");const e=await(await G(d.category_id)).data;Object.keys(a).forEach(t=>{e[t]!=null&&(a[t]=e[t])})}m.value=!1}}),(d,e)=>{const t=K,u=M,_=z,w=L,F=O,R=$,E=H,A=q,B=J;return y(),V(A,{modelValue:l(i),"onUpdate:modelValue":e[5]||(e[5]=s=>h(i)?i.value=s:i=s),title:l(c),width:"500px","destroy-on-close":!0},{footer:r(()=>[P("span",Q,[n(E,{onClick:e[3]||(e[3]=s=>h(i)?i.value=!1:i=!1)},{default:r(()=>[p(f(l(o)("cancel")),1)]),_:1}),n(E,{type:"primary",loading:m.value,onClick:e[4]||(e[4]=s=>N(b.value))},{default:r(()=>[p(f(l(o)("confirm")),1)]),_:1},8,["loading"])])]),default:r(()=>[S((y(),V(R,{model:a,"label-width":"90px",ref_key:"formRef",ref:b,rules:l(x),class:"page-form"},{default:r(()=>[n(u,{label:l(o)("name"),prop:"name"},{default:r(()=>[n(t,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.name=s),clearable:"",placeholder:l(o)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:l(o)("sort"),prop:"sort"},{default:r(()=>[n(_,{modelValue:a.sort,"onUpdate:modelValue":e[1]||(e[1]=s=>a.sort=s),min:0},null,8,["modelValue"])]),_:1},8,["label"]),n(u,{label:l(o)("isShow")},{default:r(()=>[n(F,{modelValue:a.is_show,"onUpdate:modelValue":e[2]||(e[2]=s=>a.is_show=s),placeholder:l(o)("isShowPlaceholder")},{default:r(()=>[n(w,{label:1},{default:r(()=>[p(f(l(o)("show")),1)]),_:1}),n(w,{label:0},{default:r(()=>[p(f(l(o)("hidden")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[B,m.value]])]),_:1},8,["modelValue","title"])}}});export{fe as _};
