import{g as B,r as c,a4 as C,j as O,m as g,D as V,E as n,q as P,F as i,c as w,K as y,L as E,u as t,a1 as R}from"./base-45eb5090.js";/* empty css                   */import{E as U}from"./el-overlay-616d6124.js";/* empty css                  *//* empty css                     *//* empty css                 */import{t as a}from"./index-047041cb.js";import{u as j,s as I,t as T}from"./member-35eedf02.js";import{E as k}from"./index-4ce9333e.js";import{a as q,E as S}from"./index-c4fd4c9d.js";import{E as K}from"./index-25c37860.js";import{v as $}from"./directive-9f485fe5.js";const z={class:"dialog-footer"},re=B({__name:"edit-label",emits:["complete"],setup(A,{expose:h,emit:D}){let s=c(!1);const m=c(!1);let p="";const b={label_id:"",label_name:"",memo:"",sort:0},o=C({...b}),_=c(),x=O(()=>({label_name:[{required:!0,message:a("labelNamePlaceholder"),trigger:"blur"}],sort:[{validator:L,trigger:"blur"}]})),L=(d,e,l)=>{e<0?l(new Error(a("sortVerifyOne"))):e.toString().indexOf(".")!=-1?l(new Error(a("sortVerifyTwo"))):l()},F=async d=>{if(m.value||!d)return;let e=o.label_id?j:I;await d.validate(async l=>{l&&(m.value=!0,e(o).then(f=>{m.value=!1,s.value=!1,D("complete")}).catch(f=>{m.value=!1}))})};return h({showDialog:s,setFormData:async(d=null)=>{if(m.value=!0,Object.assign(o,b),p=a("addMemberLabel"),d){p=a("updateMemberLabel");const e=await(await T(d.label_id)).data;e&&Object.keys(o).forEach(l=>{e[l]!=null&&(o[l]=e[l])})}m.value=!1}}),(d,e)=>{const l=k,u=q,f=S,v=K,N=U,M=$;return g(),V(N,{modelValue:t(s),"onUpdate:modelValue":e[5]||(e[5]=r=>w(s)?s.value=r:s=r),title:t(p),width:"500px","destroy-on-close":!0},{footer:n(()=>[P("span",z,[i(v,{onClick:e[3]||(e[3]=r=>w(s)?s.value=!1:s=!1)},{default:n(()=>[y(E(t(a)("cancel")),1)]),_:1}),i(v,{type:"primary",loading:m.value,onClick:e[4]||(e[4]=r=>F(_.value))},{default:n(()=>[y(E(t(a)("confirm")),1)]),_:1},8,["loading"])])]),default:n(()=>[R((g(),V(f,{model:o,"label-width":"90px",ref_key:"formRef",ref:_,rules:t(x),class:"page-form"},{default:n(()=>[i(u,{label:t(a)("labelName"),prop:"label_name"},{default:n(()=>[i(l,{modelValue:o.label_name,"onUpdate:modelValue":e[0]||(e[0]=r=>o.label_name=r),clearable:"",placeholder:t(a)("labelNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:t(a)("memo")},{default:n(()=>[i(l,{modelValue:o.memo,"onUpdate:modelValue":e[1]||(e[1]=r=>o.memo=r),type:"textarea",rows:"4",clearable:"",placeholder:t(a)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:t(a)("sort"),prop:"sort"},{default:n(()=>[i(l,{modelValue:o.sort,"onUpdate:modelValue":e[2]||(e[2]=r=>o.sort=r),clearable:"",placeholder:t(a)("sortPlaceholder"),class:"input-width",type:"number"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[M,m.value]])]),_:1},8,["modelValue","title"])}}});export{re as _};
