import"./base-962c0c23.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                     */import{_ as F}from"./index.vue_vue_type_script_setup_true_lang-71a0b454.js";/* empty css                 */import{u as A,t as i}from"./index-2af60c2e.js";import{A as q,B as I}from"./sys-662acaa6.js";import{u as N,a as T}from"./vue-router-79053937.js";import{D as U}from"./index-da7837ad.js";import{E as $}from"./index-93f2c618.js";import{a as j,E as L}from"./index-61c777fa.js";import{E as O}from"./index-69523418.js";import{E as P}from"./index-bba9e58c.js";import{v as X}from"./directive-c0c3e9a3.js";import{d as M,r as b,w as z,M as G,c as H,b as y,e as J,L as K,m as Q,p as l,q as r,u as n,f as k,v as w,x as h}from"./runtime-core.esm-bundler-dc7a07d7.js";import"./index.vue_vue_type_style_index_0_lang-c43e14dc.js";import"./el-overlay-60700377.js";import"./event-ff03ec12.js";import"./index-5d86eb33.js";import"./focus-trap-b8b5a003.js";import"./attachment-b63d9c31.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  */import"./el-tooltip-58212670.js";/* empty css                      *//* empty css                    *//* empty css                 *//* empty css                    *//* empty css                   */import"./index-d57cc47d.js";import"./index-d69f0ad3.js";import"./index-8bcaafa6.js";import"./storage-abe718b1.js";import"./index-50a00d09.js";import"./index-7a123a20.js";import"./index-a9dd5cf5.js";import"./index-9dd69bc3.js";import"./index-9f244af6.js";import"./index-df51d91a.js";import"./isEqual-c7d5e6d9.js";import"./_Uint8Array-6ff3cafa.js";import"./flatten-d5d1dc97.js";import"./index-100b1469.js";import"./index-b933df38.js";import"./index-4f5c40a5.js";import"./strings-4868a118.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./common-6291c908.js";import"./common-2cf17469.js";import"./el-radio-bfd4b1ad.js";import"./el-avatar-3bb47ce2.js";import"./_initCloneObject-28e6bdaa.js";const W={class:"main-container"},Y={class:"fixed-footer-wrap"},Z={class:"fixed-footer"},at=M({__name:"agreement_edit",setup(ee){const c=A(),u=N(),V=T(),d=u.query.key||"",a=b(!1),x=U();c.pageReturn=!0,z(u,(s,e)=>{c.pageReturn=!1});const f={agreement_key:"",content:"",title:"",agreement_key_name:""},t=G({...f});a.value=!0,d&&(async(s="")=>{Object.assign(t,f);const e=await(await q(s)).data;Object.keys(t).forEach(o=>{e[o]!=null&&(t[o]=e[o])}),a.value=!1})(d);const _=b(),E=H(()=>({title:[{required:!0,message:i("titlePlaceholder"),trigger:"blur"}]})),D=async s=>{a.value||!s||await s.validate(async e=>{if(e){a.value=!0;const o=t;o.key=t.agreement_key,I(o).then(p=>{a.value=!1,v()}).catch(()=>{a.value=!1})}})},v=()=>{x.removeTab(u.path),V.push({path:"/setting/agreement"})};return(s,e)=>{const o=$,p=j,R=F,B=L,S=O,g=P,C=X;return y(),J("div",W,[K((y(),Q(S,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[r(B,{model:t,"label-width":"90px",ref_key:"formRef",ref:_,rules:n(E),class:"page-form"},{default:l(()=>[r(p,{label:n(i)("type")},{default:l(()=>[r(o,{modelValue:t.agreement_key_name,"onUpdate:modelValue":e[0]||(e[0]=m=>t.agreement_key_name=m),readonly:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),r(p,{label:n(i)("title"),prop:"title"},{default:l(()=>[r(o,{modelValue:t.title,"onUpdate:modelValue":e[1]||(e[1]=m=>t.title=m),clearable:"",placeholder:n(i)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(p,{label:n(i)("content")},{default:l(()=>[r(R,{modelValue:t.content,"onUpdate:modelValue":e[2]||(e[2]=m=>t.content=m)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[C,a.value]]),k("div",Y,[k("div",Z,[r(g,{type:"primary",onClick:e[3]||(e[3]=m=>D(_.value))},{default:l(()=>[w(h(n(i)("save")),1)]),_:1}),r(g,{onClick:e[4]||(e[4]=m=>v())},{default:l(()=>[w(h(n(i)("cancel")),1)]),_:1})])])])}}});export{at as default};
