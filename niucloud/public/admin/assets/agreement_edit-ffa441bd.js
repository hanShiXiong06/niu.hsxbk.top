import{d as F,r as h,R as A,c as N,e as k,f as P,g as n,u as o,B as c,Q as $,v as j,x as l,y as r,A as x}from"./base-06478700.js";/* empty css                   *//* empty css                  *//* empty css                */import{a as I,E as S}from"./el-form-item-314d006d.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang-085f67cc.js";/* empty css                 */import{u as q,t as s}from"./index-81ed253c.js";import{a8 as O,a9 as T}from"./index-981b0207.js";import{u as z,a as L}from"./vue-router-d09a2c28.js";import{E as Q}from"./index-b68e8463.js";import{E as G}from"./index-e10fccde.js";import{E as H}from"./index-c2f001d3.js";import{v as J}from"./directive-cb2d3366.js";import"./index-2fcd1254.js";import"./event-10eba222.js";import"./index.vue_vue_type_style_index_0_lang-e59c442c.js";import"./el-overlay-42a687c6.js";import"./index-9fe5de95.js";import"./focus-trap-3e826cdc.js";import"./index-f27d6ce0.js";import"./index-818c0ce2.js";import"./attachment-21666979.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  */import"./el-tooltip-58212670.js";/* empty css                      *//* empty css                    *//* empty css                 *//* empty css                 *//* empty css               *//* empty css                    *//* empty css                   */import"./index-b52d0f2a.js";import"./index-4a01421d.js";import"./index-2a269c7c.js";import"./common-92a35870.js";import"./index-01f6e375.js";import"./validator-6e9db238.js";import"./index-e4abfaa5.js";import"./index-41a974fa.js";import"./index-c17093ae.js";import"./index-543fb162.js";import"./index-b6a184ba.js";import"./debounce-1db848fd.js";import"./position-c3bcd0be.js";import"./index-b56195b5.js";import"./index-40e21e72.js";import"./isEqual-42d4b10f.js";import"./index-137757c0.js";import"./index-35e821cc.js";import"./index-34d55b7e.js";import"./strings-fe930bc4.js";import"./index-5a0d60aa.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-adb89d14.js";import"./el-main-9a0960e7.js";import"./index-6b67c4ac.js";import"./index-9ee9102c.js";const K={class:"main-container"},M={class:"detail-head"},W=n("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),X={class:"ml-[1px]"},Y=n("span",{class:"adorn"},"|",-1),Z={class:"right"},tt={class:"fixed-footer-wrap"},et={class:"fixed-footer"},de=F({__name:"agreement_edit",setup(ot){q();const u=z(),_=L(),f=u.query.key||"",m=h(!1),V=u.meta.title,g={agreement_key:"",content:"",title:"",agreement_key_name:""},e=A({...g});m.value=!0,f&&(async(p="")=>{Object.assign(e,g);const t=await(await O(p)).data;Object.keys(e).forEach(a=>{t[a]!=null&&(e[a]=t[a])}),m.value=!1})(f);const v=h(),w=N(()=>({title:[{required:!0,message:s("titlePlaceholder"),trigger:"blur"}]})),E=async p=>{m.value||!p||await p.validate(async t=>{if(t){m.value=!0;const a=e;a.key=e.agreement_key,T(a).then(d=>{m.value=!1,y()}).catch(()=>{m.value=!1})}})},y=()=>{_.push({path:"/setting/basis/agreement"})};return(p,t)=>{const a=Q,d=I,B=U,C=S,D=G,b=H,R=J;return k(),P("div",K,[n("div",M,[n("div",{class:"left",onClick:t[0]||(t[0]=i=>o(_).push({path:"/setting/basis/agreement"}))},[W,n("span",X,c(o(s)("returnToPreviousPage")),1)]),Y,n("span",Z,c(o(V)),1)]),$((k(),j(D,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[r(C,{model:e,"label-width":"90px",ref_key:"formRef",ref:v,rules:o(w),class:"page-form"},{default:l(()=>[r(d,{label:o(s)("type")},{default:l(()=>[r(a,{modelValue:e.agreement_key_name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.agreement_key_name=i),readonly:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),r(d,{label:o(s)("title"),prop:"title"},{default:l(()=>[r(a,{modelValue:e.title,"onUpdate:modelValue":t[2]||(t[2]=i=>e.title=i),clearable:"",placeholder:o(s)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(d,{label:o(s)("content")},{default:l(()=>[r(B,{modelValue:e.content,"onUpdate:modelValue":t[3]||(t[3]=i=>e.content=i)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[R,m.value]]),n("div",tt,[n("div",et,[r(b,{type:"primary",onClick:t[4]||(t[4]=i=>E(v.value))},{default:l(()=>[x(c(o(s)("save")),1)]),_:1}),r(b,{onClick:t[5]||(t[5]=i=>y())},{default:l(()=>[x(c(o(s)("cancel")),1)]),_:1})])])])}}});export{de as default};
