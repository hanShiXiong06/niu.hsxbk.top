/* empty css             *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  */import"./index-d5447f06.js";/* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                */import{a as J,E as K}from"./el-form-item-144bc604.js";/* empty css                  *//* empty css                          *//* empty css                 */import{t as a}from"./index-ebefdd26.js";import{c as Q}from"./common-a45d855f.js";import{u as X,a as Y}from"./vue-router-9f815af7.js";import{g as Z,a as ee,V as N,W as te}from"./goods-f7db3cf5.js";/* empty css                   */import{a as oe}from"./index-a6ffcea0.js";import{E as D}from"./index-b74135ff.js";import{c as ae}from"./cloneDeep-028669bf.js";import{E as le}from"./index-5f2625ed.js";import{E as se}from"./index-22ce9a15.js";import{a as re,E as ne}from"./index-b7b91fcb.js";import{E as ie}from"./index-6f670765.js";import{E as me}from"./index-c5af06c2.js";import{E as de}from"./index-784d7581.js";import{a as ce,E as pe}from"./index-6191b0b4.js";import{E as ue}from"./index-cefc0b67.js";import{v as ge}from"./directive-d226d53f.js";import{d as _e,r as h,M as V,b as v,e as k,q as s,p as r,f as i,x as m,u as e,F as fe,t as he,m as L,v as x,L as ve,C as U}from"./runtime-core.esm-bundler-c17ab5bc.js";import{_ as ye}from"./_plugin-vue_export-helper-c27b6911.js";import"./event-3e082a4a.js";import"./plugin-vue_export-helper-c018272e.js";import"./index-9ef6974e.js";import"./index-0d36ccbf.js";import"./el-main-03d12282.js";import"./index-e42600b8.js";import"./el-overlay-380df695.js";import"./index-93efb1b5.js";import"./focus-trap-c0148071.js";import"./index-4b62c73a.js";import"./index-332680c2.js";import"./index-138bfa06.js";import"./index-72bf6cb5.js";import"./_baseClone-37ba2e68.js";import"./aria-adfa05c5.js";import"./validator-f5e079db.js";import"./index-6ff31475.js";import"./rand-14326ce1.js";import"./strings-e72e60f7.js";import"./isEqual-ca98cf0c.js";import"./arrays-e667dc24.js";import"./index-5c20ff8f.js";import"./index-bfecf17f.js";import"./debounce-196ce6a6.js";import"./_isIterateeCall-797defa1.js";const be={class:"main-container"},xe={class:"flex justify-between items-center"},Ce={class:"text-[20px]"},Ee={class:"mt-[10px]"},ke={class:"mb-[10px] flex items-center"},Te={class:"flex items-center cursor-pointer"},Ve={class:"min-w-[70px] h-[70px] flex items-center justify-center"},we=["src"],Pe={class:"ml-2"},Se=["title"],Re={class:"text-primary text-[12px]"},ze={key:0},Be={key:1},Fe={class:"mt-[16px] flex"},Ne={class:"flex items-center flex-1"},De=_e({__name:"recycle",setup(Le){const G=X().meta.title,p=h(!1);Y();let l=V({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",goods_category:[],goods_type:""}});const w=h(),T=V([]),$={checkStrictly:!0},P=V([]);(()=>{Z().then(n=>{let t=n.data;if(t){let d=[];t.forEach(c=>{let C=[];c.child_list&&c.child_list.forEach(E=>{C.push({value:E.category_id,label:E.category_name})}),d.push({value:c.category_id,label:c.category_name,children:C})}),T.splice(0,T.length,...d)}}),ee().then(n=>{let t=n.data;if(t)for(let d in t)P.push(t[d])})})();const _=h(),y=h(!1),S=n=>{y.value=!1,R.value.toggleAllSelection()},R=h(),f=h([]),I=n=>{f.value=n,_.value=!1,f.value.length>0&&f.value.length<l.data.length?y.value=!0:y.value=!1,f.value.length==l.data.length&&(_.value=!0)},z=()=>{if(f.value.length==0){oe({type:"warning",message:`${a("batchEmptySelectedGoodsTips")}`});return}D.confirm(a("batchGoodsRecycleTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{if(p.value)return;p.value=!0;let n=[];f.value.forEach(t=>{n.push(t.goods_id)}),N({goods_ids:n}).then(()=>{g(),p.value=!1}).catch(()=>{p.value=!1})})},g=(n=1)=>{l.loading=!0,l.page=n;let t=ae(l.searchParam);te({page:l.page,limit:l.limit,...t}).then(d=>{l.loading=!1,l.data=d.data.data,l.total=d.data.total}).catch(()=>{l.loading=!1})};g();const O=n=>{D.confirm(a("goodsRecycleTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{p.value||(p.value=!0,N({goods_ids:n.goods_id}).then(t=>{t.code==1&&g(),p.value=!1}).catch(t=>{p.value=!1}))})},j=n=>{n&&(n.resetFields(),g())};return(n,t)=>{const d=le,c=J,C=se,E=re,M=ne,b=ie,q=K,B=me,F=de,u=ce,A=pe,H=ue,W=ge;return v(),k("div",be,[s(B,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[i("div",xe,[i("span",Ce,m(e(G)),1)]),s(B,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[s(q,{inline:!0,model:e(l).searchParam,ref_key:"searchFormRef",ref:w},{default:r(()=>[s(c,{label:e(a)("goodsName"),prop:"goods_name"},{default:r(()=>[s(d,{modelValue:e(l).searchParam.goods_name,"onUpdate:modelValue":t[0]||(t[0]=o=>e(l).searchParam.goods_name=o),placeholder:e(a)("goodsNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(c,{label:e(a)("goodsCategory"),prop:"goods_category"},{default:r(()=>[s(C,{props:$,modelValue:e(l).searchParam.goods_category,"onUpdate:modelValue":t[1]||(t[1]=o=>e(l).searchParam.goods_category=o),options:T,placeholder:e(a)("goodsCategoryPlaceholder"),clearable:"",filterable:"",onChange:n.categoryHandleChange},null,8,["modelValue","options","placeholder","onChange"])]),_:1},8,["label"]),s(c,{label:e(a)("goodsType"),prop:"goods_type"},{default:r(()=>[s(M,{modelValue:e(l).searchParam.goods_type,"onUpdate:modelValue":t[2]||(t[2]=o=>e(l).searchParam.goods_type=o),placeholder:e(a)("goodsTypePlaceholder"),clearable:""},{default:r(()=>[(v(!0),k(fe,null,he(P,o=>(v(),L(E,{key:o.type,label:o.name,value:o.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),s(c,null,{default:r(()=>[s(b,{type:"primary",onClick:t[3]||(t[3]=o=>g())},{default:r(()=>[x(m(e(a)("search")),1)]),_:1}),s(b,{onClick:t[4]||(t[4]=o=>j(w.value))},{default:r(()=>[x(m(e(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i("div",Ee,[i("div",ke,[s(F,{modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=o=>_.value=o),size:"large",class:"px-[14px]",onChange:S,indeterminate:y.value},null,8,["modelValue","indeterminate"]),s(b,{onClick:z,size:"small"},{default:r(()=>[x(m(e(a)("batchRecycle")),1)]),_:1})]),ve((v(),L(A,{data:e(l).data,size:"large",ref_key:"goodsListTableRef",ref:R,onSortChange:n.sortChange,onSelectionChange:I},{empty:r(()=>[i("span",null,m(e(l).loading?"":e(a)("emptyData")),1)]),default:r(()=>[s(u,{type:"selection",width:"55"}),s(u,{prop:"goods_id",label:e(a)("goodsInfo"),"min-width":"300"},{default:r(({row:o})=>[i("div",Te,[i("div",Ve,[i("img",{class:"max-w-[70px] max-h-[70px]",src:e(Q)(o.goods_cover_thumb_small)},null,8,we)]),i("div",Pe,[i("span",{title:o.goods_name,class:"multi-hidden"},m(o.goods_name),9,Se),i("span",Re,m(o.goods_type_name),1)])])]),_:1},8,["label"]),s(u,{prop:"price",label:e(a)("price"),"min-width":"120",align:"right",sortable:"custom"},{default:r(({row:o})=>[i("div",null,"ï¿¥"+m(o.goodsSku.price),1)]),_:1},8,["label"]),s(u,{prop:"stock",label:e(a)("stock"),"min-width":"120",sortable:"custom"},null,8,["label"]),s(u,{prop:"sale_num",label:e(a)("saleNum"),"min-width":"100",sortable:"custom"},null,8,["label"]),s(u,{prop:"status",label:e(a)("status"),"min-width":"100"},{default:r(({row:o})=>[o.status==1?(v(),k("div",ze,m(e(a)("statusOn")),1)):U("",!0),o.status==0?(v(),k("div",Be,m(e(a)("statusOff")),1)):U("",!0)]),_:1},8,["label"]),s(u,{prop:"create_time",label:e(a)("createTime"),"min-width":"150",sortable:"custom"},{default:r(({row:o})=>[i("div",null,m(o.create_time),1)]),_:1},8,["label"]),s(u,{label:e(a)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:o})=>[s(b,{type:"primary",link:"",onClick:$e=>O(o)},{default:r(()=>[x(m(e(a)("recycle")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data","onSortChange"])),[[W,e(l).loading]]),i("div",Fe,[i("div",Ne,[s(F,{modelValue:_.value,"onUpdate:modelValue":t[6]||(t[6]=o=>_.value=o),size:"large",class:"px-[14px]",onChange:S,indeterminate:y.value},null,8,["modelValue","indeterminate"]),s(b,{onClick:z,size:"small"},{default:r(()=>[x(m(e(a)("batchRecycle")),1)]),_:1})]),s(H,{"current-page":e(l).page,"onUpdate:currentPage":t[7]||(t[7]=o=>e(l).page=o),"page-size":e(l).limit,"onUpdate:pageSize":t[8]||(t[8]=o=>e(l).limit=o),layout:"total, sizes, prev, pager, next, jumper",total:e(l).total,onSizeChange:t[9]||(t[9]=o=>g()),onCurrentChange:g},null,8,["current-page","page-size","total"])])])]),_:1})])}}});const Wt=ye(De,[["__scopeId","data-v-ed1d188d"]]);export{Wt as default};
