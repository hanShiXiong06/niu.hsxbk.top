import{d as B,r as p,R as F,c as R,e as v,v as y,x as d,g as C,y as n,i as b,A as V,B as h,u as t,Q as U}from"./base-06478700.js";/* empty css                   */import{E as q}from"./el-overlay-42a687c6.js";/* empty css                  */import{a as I,E as N}from"./el-form-item-314d006d.js";/* empty css                 */import{t as l}from"./index-7ea27073.js";import{e as j,a as O,g as A}from"./dict-20014114.js";import{E as L}from"./index-b68e8463.js";import{E as Q}from"./index-c2f001d3.js";import{v as S}from"./directive-cb2d3366.js";const T={class:"dialog-footer"},le=B({__name:"edit",emits:["complete"],setup($,{expose:D,emit:k}){let r=p(!1);const i=p(!1),f={id:"",name:"",key:"",memo:""},a=F({...f}),_=p(),w=R(()=>({name:[{required:!0,message:l("namePlaceholder"),trigger:"blur"}],key:[{required:!0,message:l("keyPlaceholder"),trigger:"blur"}],data:[{required:!0,message:l("dataPlaceholder"),trigger:"blur"}]})),E=async m=>{if(i.value||!m)return;let e=a.id?j:O;await m.validate(async s=>{s&&(i.value=!0,e(a).then(c=>{i.value=!1,r.value=!1,k("complete")}).catch(c=>{i.value=!1}))})};return D({showDialog:r,setFormData:async(m=null)=>{if(Object.assign(a,f),i.value=!0,m){const e=await(await A(m.id)).data;e&&Object.keys(a).forEach(s=>{e[s]!=null&&(a[s]=e[s])})}i.value=!1}}),(m,e)=>{const s=L,u=I,c=N,g=Q,x=q,P=S;return v(),y(x,{modelValue:t(r),"onUpdate:modelValue":e[5]||(e[5]=o=>b(r)?r.value=o:r=o),title:a.id?t(l)("updateDict"):t(l)("addDict"),width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:d(()=>[C("span",T,[n(g,{onClick:e[3]||(e[3]=o=>b(r)?r.value=!1:r=!1)},{default:d(()=>[V(h(t(l)("cancel")),1)]),_:1}),n(g,{type:"primary",loading:i.value,onClick:e[4]||(e[4]=o=>E(_.value))},{default:d(()=>[V(h(t(l)("confirm")),1)]),_:1},8,["loading"])])]),default:d(()=>[U((v(),y(c,{model:a,"label-width":"120px",ref_key:"formRef",ref:_,rules:t(w),class:"page-form"},{default:d(()=>[n(u,{label:t(l)("name"),prop:"name"},{default:d(()=>[n(s,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.name=o),clearable:"",placeholder:t(l)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:t(l)("key"),prop:"key"},{default:d(()=>[n(s,{modelValue:a.key,"onUpdate:modelValue":e[1]||(e[1]=o=>a.key=o),clearable:"",placeholder:t(l)("keyPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:t(l)("memo")},{default:d(()=>[n(s,{modelValue:a.memo,"onUpdate:modelValue":e[2]||(e[2]=o=>a.memo=o),type:"textarea",clearable:"",placeholder:t(l)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[P,i.value]])]),_:1},8,["modelValue","title"])}}});export{le as _};
