import{E as ee}from"./base-962c0c23.js";/* empty css                *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                 */import"./el-tooltip-58212670.js";import{h as te,B as oe,d as ne}from"./index-5cfb4637.js";/* empty css                  */import{_ as le}from"./edit-article-47360d7e.js";import{_ as ae}from"./edit-graphic-nav-d6a93802.js";import{_ as ie}from"./edit-horz-blank-35487746.js";import{_ as se}from"./edit-image-ads-e1705728.js";import{_ as re}from"./edit-member-info-10502cbe.js";import{_ as pe}from"./edit-page-c413d4c8.js";import{_ as me}from"./edit-text-f38a281d.js";import{v as de}from"./event-ff03ec12.js";import{t as a}from"./index-2af60c2e.js";import{i as ce,e as ue,a as _e}from"./diy-3ad5823e.js";import{u as fe,a as ge}from"./vue-router-79053937.js";import{u as ve}from"./diy-6cd3063b.js";import{c as xe}from"./cloneDeep-b538bbcc.js";import{E as be}from"./index-50a00d09.js";import{E as Ce}from"./index-bba9e58c.js";import{a as he,E as ye}from"./index-9eec63d6.js";import{E as ke}from"./index-7a123a20.js";import{E as we}from"./index-8bcaafa6.js";import{a as Ee,E as Ve}from"./index-61c777fa.js";import{E as Be}from"./index-3220fc45.js";import{E as Se}from"./index-69523418.js";import{d as ze,r as E,M as P,af as f,w as qe,o as Ne,Q as Oe,b as c,e as S,q as n,p as i,f as l,x as u,u as t,v as j,F,t as L,m as _,L as Te,n as M,U as Ie,C as v,au as De,av as Re}from"./runtime-core.esm-bundler-dc7a07d7.js";import{_ as $e}from"./_plugin-vue_export-helper-c27b6911.js";import"./el-overlay-60700377.js";import"./index-5d86eb33.js";import"./focus-trap-b8b5a003.js";import"./el-radio-bfd4b1ad.js";import"./storage-abe718b1.js";import"./index-93f2c618.js";import"./el-avatar-3bb47ce2.js";import"./index-d57cc47d.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                        *//* empty css                        *//* empty css                    */import"./article-97b81e96.js";import"./index-92e1b5d5.js";import"./_Uint8Array-6ff3cafa.js";import"./_initCloneObject-28e6bdaa.js";import"./index-df51d91a.js";import"./isEqual-c7d5e6d9.js";import"./flatten-d5d1dc97.js";import"./_isIterateeCall-c579b126.js";import"./index-6a89175f.js";import"./index-100b1469.js";import"./index-b933df38.js";import"./index-4f5c40a5.js";import"./strings-4868a118.js";import"./directive-c0c3e9a3.js";import"./index.vue_vue_type_script_setup_true_lang-a2fbdd05.js";import"./index-c88476dc.js";import"./index.vue_vue_type_style_index_0_lang-d0142cd9.js";import"./attachment-7b90a6f4.js";/* empty css                 *//* empty css                    *//* empty css                   */import"./index-e1e81893.js";import"./sys-451b2f0d.js";import"./index-a9dd5cf5.js";import"./index-9f244af6.js";import"./sortable.esm-be94e56d.js";import"./range-5a416794.js";import"./common-6291c908.js";import"./common-2cf17469.js";import"./index-fb71f009.js";import"./index-179d7e6f.js";const Ue=V=>(De("data-v-f828781d"),V=V(),Re(),V),Je={class:"main-container flex-1"},Pe={class:"pl-[5px]"},je={class:"text-white ml-[10px] flex items-center"},Fe={class:"mr-[5px]"},Le=Ue(()=>l("div",{class:"flex-1"},null,-1)),Me={class:"full-container flex flex-row flex-1 bg-page"},Ae={class:"component-list w-[290px]"},He={class:"flex flex-row flex-wrap"},Qe=["title","onClick"],Ge={class:"block text-base truncate"},We={class:"preview-wrap flex-1 relative mt-[20px]"},Xe={class:"diy-view-wrap w-[375px] shadow-lg mx-auto"},Ye={class:"text-base block text-center truncate cursor-pointer h-[64px] leading-[84px]"},Ze={class:"preview-block relative"},Ke={class:"quick-action absolute text-center -right-[70px] top-[20px] w-[42px] rounded shadow-md"},et=["src"],tt={class:"edit-attribute-wrap w-[400px]"},ot={class:"card-header flex justify-between items-center"},nt={class:"title flex-1"},lt={class:"tab-wrap flex rounded-[50px] bg-gray-100 text-[14px]"},at={class:"edit-component-wrap"},it={class:"edit-attr-item-wrap"},st={class:"mb-[10px]"},rt={class:"text-sm text-gray-400"},pt=ze({__name:"edit",setup(V){const e=ve(),r=fe(),z=ge(),q=E(""),N=r.query.back||"/diy/list",C=E([]),T=P([]),I=E(T),A=p=>{};r.query.id=r.query.id||0,r.query.name=r.query.name||"",r.query.template=r.query.template||"",r.query.template_name=r.query.template_name||"",r.query.title=r.query.title||"";const h=P({id:e.id,name:e.name,title:e.global.title,value:JSON.stringify({global:f(e.global),value:f(e.value)})}),D=E(!0),H=()=>{D.value?z.push(N):be.confirm(a("leavePageTitleTips"),a("leavePageContentTips"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning",autofocus:!1}).then(()=>{z.push(N)}).catch(()=>{})},Q=Object.assign({"./components/edit-article.vue":le,"./components/edit-graphic-nav.vue":ae,"./components/edit-horz-blank.vue":ie,"./components/edit-image-ads.vue":se,"./components/edit-member-info.vue":re,"./components/edit-page.vue":pe,"./components/edit-text.vue":me}),R={};for(const[p,o]of Object.entries(Q)){const x=p.replace(/^\.\/(.*)\.\w+$/,"$1").split("/")[1];R[x]=o.default}qe(()=>e,(p,o)=>{let m={id:p.id,name:p.name,title:p.global.title,value:JSON.stringify({global:f(p.global),value:f(p.value)})};e.postMessage(),D.value=JSON.stringify(m)==JSON.stringify(h)},{deep:!0}),ce({id:r.query.id,name:r.query.name,template:r.query.template,template_name:r.query.template_name,title:r.query.title}).then(p=>{let o=p.data;if(e.init(),e.id=o.id||0,e.name=o.name,e.type=o.type,e.typeName=o.type_name,e.isDefault=o.is_default,o.value){let m=JSON.parse(o.value);e.global=m.global,m.value.length&&(e.value=m.value)}else e.global.title=o.title;h.id=e.id,h.name=e.name,h.title=e.global.title,h.value=JSON.stringify({global:f(e.global),value:f(e.value)}),C.value=o.component;for(let m in C.value){T.push(m);for(let x in C.value[m].list){let d=xe(C.value[m].list[x]);d.id=e.generateRandom(),d.componentName=x,d.componentTitle=d.title,Object.assign(d,d.value),delete d.name,delete d.title,delete d.value,delete d.type,delete d.icon,e.components.push(d)}}q.value=`${o.domain_url.wap_url}/${o.page}?mode=decorate&site_id=${o.site_id}`}),Ne(()=>{window.previewIframe=document.getElementById("previewIframe")}),window.addEventListener("message",p=>{try{let o=JSON.parse(p.data);if(!o.type)return;switch(o.type){case"init":e.load=!0,e.postMessage();break;case"change":e.changeCurrentIndex(o.index,o.component);break;case"data":e.changeCurrentIndex(o.index,o.component),e.global=o.global,e.value=o.value;break}}catch(o){console.log("后台接受数据错误",o)}},!1);const y=E(!1),G=()=>{if(!e.verify()||y.value)return;y.value=!0;let p={id:e.id,name:e.name,title:e.global.title,type:e.type,is_default:e.isDefault,value:JSON.stringify({global:f(e.global),value:f(e.value)})};(e.id?ue:_e)(p).then(m=>{y.value=!1,m.code==1&&(e.id?y.value=!1:z.push(N))}).catch(m=>{y.value=!1})};return(p,o)=>{const m=Oe("ArrowLeft"),x=ee,d=Ce,W=te,b=oe,X=he,Y=ye,O=ke,k=we,$=ne,g=Ee,w=Be,Z=Ve,K=Se;return c(),S("div",Je,[n(W,{class:"flex items-center h-[60px] bg-primary px-[20px]"},{default:i(()=>[l("div",{class:"text-white cursor-pointer flex items-center",onClick:H},[n(x,{size:"14"},{default:i(()=>[n(m)]),_:1}),l("span",Pe,u(t(a)("back")),1)]),l("div",je,[l("span",Fe," ｜ "+u(t(a)("decorating"))+"："+u(t(e).typeName),1)]),Le,n(d,{onClick:o[0]||(o[0]=s=>G())},{default:i(()=>[j(u(t(a)("save")),1)]),_:1})]),_:1}),l("div",Me,[l("div",Ae,[n(O,{class:"px-[10px]"},{default:i(()=>[n(Y,{modelValue:I.value,"onUpdate:modelValue":o[1]||(o[1]=s=>I.value=s),onChange:A},{default:i(()=>[(c(!0),S(F,null,L(C.value,(s,U)=>(c(),_(X,{key:U,title:s.title,name:U},{default:i(()=>[l("ul",He,[(c(!0),S(F,null,L(s.list,(B,J)=>(c(),S("li",{key:J,class:"w-2/6 text-center cursor-pointer h-[75px]",title:B.title,onClick:mt=>t(e).addComponent(J,B)},[n(b,{name:B.icon,size:"23px"},null,8,["name"]),l("span",Ge,u(B.title),1)],8,Qe))),128))])]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])]),_:1})]),l("div",We,[n(O,null,{default:i(()=>[n(d,{class:"page-btn absolute right-[20px]",onClick:o[2]||(o[2]=s=>t(e).changeCurrentIndex(-99))},{default:i(()=>[j(u(t(a)("pageSet")),1)]),_:1}),l("div",Xe,[l("div",{class:"preview-head bg-no-repeat bg-center bg-cover",onClick:o[3]||(o[3]=s=>t(e).changeCurrentIndex(-99))},[l("span",Ye,u(t(e).global.title),1)]),l("div",Ze,[l("ul",Ke,[n(k,{effect:"light",content:t(a)("moveUpComponent"),placement:"right"},{default:i(()=>[n(b,{name:"iconfont-iconjiantoushang",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).moveUpComponent},null,8,["onClick"])]),_:1},8,["content"]),n(k,{effect:"light",content:t(a)("moveDownComponent"),placement:"right"},{default:i(()=>[n(b,{name:"iconfont-iconjiantouxia",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).moveDownComponent},null,8,["onClick"])]),_:1},8,["content"]),n(k,{effect:"light",content:t(a)("copyComponent"),placement:"right"},{default:i(()=>[n(b,{name:"iconfont-iconcopy-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).copyComponent},null,8,["onClick"])]),_:1},8,["content"]),n(k,{effect:"light",content:t(a)("delComponent"),placement:"right"},{default:i(()=>[n(b,{name:"iconfont-icondelete-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).delComponent},null,8,["onClick"])]),_:1},8,["content"]),n(k,{effect:"light",content:t(a)("resetComponent"),placement:"right"},{default:i(()=>[n(b,{name:"iconfont-iconloader-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).resetComponent},null,8,["onClick"])]),_:1},8,["content"])]),Te(l("iframe",{id:"previewIframe",src:q.value,frameborder:"0",class:"preview-iframe w-[375px]"},null,8,et),[[de,q.value]])])])]),_:1})]),l("div",tt,[n(O,null,{default:i(()=>[n(K,{class:"box-card",shadow:"never"},{header:i(()=>[l("div",ot,[l("span",nt,u(t(e).currentIndex==-99?t(a)("pageSet"):t(e).editComponent.componentTitle),1),l("div",lt,[l("span",{class:M(["cursor-pointer rounded-[50px] py-[5px] px-[15px]",{"bg-primary text-white":t(e).editTab=="content"}]),onClick:o[4]||(o[4]=s=>t(e).editTab="content")},u(t(a)("tabEditContent")),3),l("span",{class:M(["cursor-pointer rounded-[50px] py-[5px] px-[15px]",{"bg-primary text-white":t(e).editTab=="style"}]),onClick:o[5]||(o[5]=s=>t(e).editTab="style")},u(t(a)("tabEditStyle")),3)])])]),default:i(()=>[l("div",at,[(c(),_(Ie(R[t(e).currentComponent]),{value:t(e).value[t(e).currentIndex]},{style:i(()=>[l("div",it,[l("h3",st,u(t(a)("componentStyleTitle")),1),n(Z,{"label-width":"80px",class:"px-[10px]"},{default:i(()=>[t(e).editComponent.ignore.indexOf("pageBgColor")==-1?(c(),_(g,{key:0,label:t(a)("bottomBgColor"),class:"display-block"},{default:i(()=>[n($,{modelValue:t(e).editComponent.pageBgColor,"onUpdate:modelValue":o[6]||(o[6]=s=>t(e).editComponent.pageBgColor=s),"show-alpha":"",predefine:t(e).predefineColors},null,8,["modelValue","predefine"]),l("div",rt,u(t(a)("bottomBgTips")),1)]),_:1},8,["label"])):v("",!0),t(e).editComponent.ignore.indexOf("componentBgColor")==-1?(c(),_(g,{key:1,label:t(a)("componentBgColor")},{default:i(()=>[n($,{modelValue:t(e).editComponent.componentBgColor,"onUpdate:modelValue":o[7]||(o[7]=s=>t(e).editComponent.componentBgColor=s),"show-alpha":"",predefine:t(e).predefineColors},null,8,["modelValue","predefine"])]),_:1},8,["label"])):v("",!0),t(e).editComponent.ignore.indexOf("marginTop")==-1?(c(),_(g,{key:2,label:t(a)("marginTop")},{default:i(()=>[n(w,{modelValue:t(e).editComponent.margin.top,"onUpdate:modelValue":o[8]||(o[8]=s=>t(e).editComponent.margin.top=s),"show-input":"",size:"small",min:0,class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):v("",!0),t(e).editComponent.ignore.indexOf("marginBottom")==-1?(c(),_(g,{key:3,label:t(a)("marginBottom")},{default:i(()=>[n(w,{modelValue:t(e).editComponent.margin.bottom,"onUpdate:modelValue":o[9]||(o[9]=s=>t(e).editComponent.margin.bottom=s),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):v("",!0),t(e).editComponent.ignore.indexOf("marginBoth")==-1?(c(),_(g,{key:4,label:t(a)("marginBoth")},{default:i(()=>[n(w,{modelValue:t(e).editComponent.margin.both,"onUpdate:modelValue":o[10]||(o[10]=s=>t(e).editComponent.margin.both=s),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):v("",!0),t(e).editComponent.ignore.indexOf("topRounded")==-1?(c(),_(g,{key:5,label:t(a)("topRounded")},{default:i(()=>[n(w,{modelValue:t(e).editComponent.topRounded,"onUpdate:modelValue":o[11]||(o[11]=s=>t(e).editComponent.topRounded=s),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider",max:50},null,8,["modelValue"])]),_:1},8,["label"])):v("",!0),t(e).editComponent.ignore.indexOf("bottomRounded")==-1?(c(),_(g,{key:6,label:t(a)("bottomRounded")},{default:i(()=>[n(w,{modelValue:t(e).editComponent.bottomRounded,"onUpdate:modelValue":o[12]||(o[12]=s=>t(e).editComponent.bottomRounded=s),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider",max:50},null,8,["modelValue"])]),_:1},8,["label"])):v("",!0)]),_:1})])]),_:1},8,["value"]))])]),_:1})]),_:1})])])])}}});const $o=$e(pt,[["__scopeId","data-v-f828781d"]]);export{$o as default};
