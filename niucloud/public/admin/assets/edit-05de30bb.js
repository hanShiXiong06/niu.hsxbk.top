import{E as ae}from"./base-962c0c23.js";/* empty css                   *//* empty css                  */import{D as se,b as ie,r as ne}from"./index-5cfb4637.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                  */import"./el-tooltip-58212670.js";/* empty css                *//* empty css                     */import{E as de,b as re}from"./el-radio-bfd4b1ad.js";import{t as l}from"./index-2af60c2e.js";import{b as me,e as ue}from"./tools-4020b697.js";import{u as _e,a as ce}from"./vue-router-79053937.js";import{S as B}from"./sortable.esm-be94e56d.js";import{K as pe}from"./event-ff03ec12.js";import{c as A}from"./cloneDeep-b538bbcc.js";import{E as L}from"./index-00212650.js";import{r as $}from"./range-5a416794.js";import{E as fe}from"./index-93f2c618.js";import{a as be,E as xe}from"./index-61c777fa.js";import{E as ye}from"./index-69523418.js";import{E as ve}from"./index-6170bafb.js";import{a as he,E as ge}from"./index-b933df38.js";import{E as we}from"./index-bba9e58c.js";import{v as Ve}from"./directive-c0c3e9a3.js";import{d as ke,r as F,o as qe,A as O,M as Ie,c as Ee,Q as Fe,b as x,e as y,L as Te,q as o,p as n,u as a,v as m,x as d,f as i,F as h,t as q,n as ze,m as Ce,C as Ne}from"./runtime-core.esm-bundler-dc7a07d7.js";import{_ as Ue}from"./_plugin-vue_export-helper-c27b6911.js";import"./el-overlay-60700377.js";import"./index-5d86eb33.js";import"./focus-trap-b8b5a003.js";import"./storage-abe718b1.js";import"./index-8bcaafa6.js";import"./index-7a123a20.js";import"./el-avatar-3bb47ce2.js";import"./index-d57cc47d.js";import"./common-6291c908.js";import"./common-2cf17469.js";import"./_isIterateeCall-c579b126.js";import"./_Uint8Array-6ff3cafa.js";import"./_initCloneObject-28e6bdaa.js";import"./index-4f5c40a5.js";import"./strings-4868a118.js";import"./isEqual-c7d5e6d9.js";const je={class:"main-container mb-80"},Re=["data-id"],De=["data-id"],Se=["data-id","onClick"],Pe={class:"flex flex-row"},Be={class:"flex flex-row design-field"},Ae={class:"text-xs text-gray-500 w-28 items-center justify-end flex"},Le={class:"flex flex-row design-field"},$e={class:"text-xs text-gray-500 w-28 items-center justify-end flex"},Oe={class:"flex flex-row design-field flex-shrink-0 w-40"},Ge={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},Ke={class:"w-50 m-2"},We=["onClick"],Me={class:"flex flex-row"},Qe={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},Ze={class:"flex flex-row"},Je={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},He={class:"flex flex-row"},Xe={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},Ye={class:"flex flex-row"},el={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},ll={class:"flex flex-row"},tl={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},ol={class:"flex flex-row"},al={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},sl={class:"flex flex-row"},il={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},nl={class:"flex flex-row"},dl={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},rl={class:"flex flex-row"},ml={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},ul={class:"flex flex-row"},_l={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},cl={class:"flex flex-row"},pl={class:"text-xs text-gray-500 w-20 items-center justify-end flex"},fl={class:"fixed-footer-wrap"},bl={class:"fixed-footer"},xl=ke({__name:"edit",setup(yl){const G=se(),T=_e(),K=ce(),z=parseInt(T.query.id||0),v=F(!0),E=pe(),C=F();let N=1;const U={id:"",table_name:"",table_content:"",module_name:"",class_name:"",edit_type:1,table_column:[],editFiledIndex:0},I={common:[{column_name:"id",column_comment:l("pk"),column_type:"int",is_required:1,is_pk:1,is_insert:0,is_update:0,is_lists:0,is_query:1,is_search:0,query_type:"=",view_type:"input"},{column_name:"status",column_comment:l("status"),column_type:"int",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:0,query_type:"=",view_type:"radio"},{column_name:"create_time",column_comment:l("createTime"),column_type:"int",is_required:0,is_pk:0,is_insert:0,is_update:0,is_lists:1,is_query:1,is_search:0,query_type:"BETWEEN",view_type:"datetime"},{column_name:"update_time",column_comment:l("updateTime"),column_type:"int",is_required:0,is_pk:0,is_insert:0,is_update:0,is_lists:1,is_query:1,is_search:0,query_type:"BETWEEN",view_type:"datetime"}],base:[{column_name:"string",column_comment:l("string"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"input"},{column_name:"image",column_comment:l("image"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"imageSelect"},{column_name:"radio",column_comment:l("radio"),column_type:"int",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"radio"},{column_name:"checkbox",column_comment:l("checkbox"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"checkbox"},{column_name:"select",column_comment:l("select"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"select"},{column_name:"editor",column_comment:l("editor"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"editor"},{column_name:"datetime",column_comment:l("dateTime"),column_type:"string",is_required:1,is_pk:0,is_insert:1,is_update:1,is_lists:1,is_query:1,is_search:1,query_type:"=",view_type:"datetime"}]},W=["=","!=",">",">=","<","<=","LIKE","BETWEEN"],M=[{label:l("formInput"),value:"input"},{label:l("formTextarea"),value:"textarea"},{label:l("formSelect"),value:"select"},{label:l("formRadio"),value:"radio"},{label:l("formCheckbox"),value:"checkbox"},{label:l("formDateTime"),value:"datetime"},{label:l("formImageSelect"),value:"imageSelect"},{label:l("formEditor"),value:"editor"}],Q=_=>{e.editFiledIndex=_};qe(()=>{const _=B.create(C.value,{group:"design-field",animation:200,onAdd:t=>{var c,f;const r=(f=(c=t.originalEvent)==null?void 0:c.dataTransfer)==null?void 0:f.getData("name"),u=I[r];if(u&&u[t.oldIndex]){const b=A(u[t.oldIndex]);if(b.is_pk){if(e.table_column.find(V=>V.is_pk))return L({type:"error",message:l("pkRepeatTip")}),t.item.remove();e.table_column.defaultSortField=b.name,e.table_column.quickSearchField.push(b.name)}Z(e.table_column,"column_name",b.column_name)&&(b.column_name=b.column_name+N,N++),e.table_column.splice(t.newIndex,0,b)}t.item.remove(),O(()=>{_.sort($(e.table_column.length).map(b=>b.toString()))})},onEnd:t=>{const r=e.table_column[t.oldIndex];e.table_column.splice(t.oldIndex,1),e.table_column.splice(t.newIndex,0,r),O(()=>{_.sort($(e.table_column.length).map(u=>u.toString()))})}});E.value.forEach((t,r)=>{B.create(t,{sort:!1,group:{name:"design-field",pull:"clone",put:!1},animation:200,setData:u=>{u.setData("name",Object.keys(I)[r])}})})});const Z=(_,t,r)=>{for(const u in _)if(_[u][t]==r)return u;return!1},e=Ie({...U});z&&(async(_=0)=>{Object.assign(e,U);const t=await(await me(_)).data;Object.keys(e).forEach(r=>{t[r]!=null&&(e[r]=t[r])}),v.value=!1})(z);const j=F(),R=_=>/^([a-zA-Z_$])([a-zA-Z0-9_$])*$/.test(_),J=Ee(()=>({table_name:[{required:!0,message:l("tableNamePlaceholder"),trigger:"blur"},{validator:(_,t,r)=>{R(t)||r(new Error(l("tableNameValidata"))),r()},trigger:"blur"}],table_content:[{required:!0,message:l("tableContentPlaceholder"),trigger:"blur"}]})),H=async _=>{if(v.value||!_)return;let t="";if(e.table_column.find(u=>{if(!R(u.column_name))return t=u.column_name+" "+l("fieldNameValidata"),!0}),t){L({type:"error",message:t});return}v.value=!0;let r=A(e);r.table_column=JSON.stringify(r.table_column),ue(r).then(u=>{v.value=!1}).catch(u=>{v.value=!1})},X=_=>{e.table_column[_]&&(e.editFiledIndex==_&&(e.editFiledIndex=0),e.table_column.splice(_,1))},Y=()=>{G.removeTab(T.path),K.push({path:"/tools/code"})};return(_,t)=>{const r=fe,u=be,c=de,f=re,b=xe,g=ye,w=ve,V=ie,ee=Fe("Delete"),le=ae,D=he,S=ge,te=ne,P=we,oe=Ve;return x(),y(h,null,[Te((x(),y("div",je,[o(g,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[o(b,{model:e,"label-width":"90px",ref_key:"formRef",ref:j,rules:a(J),class:"page-form"},{default:n(()=>[o(u,{label:a(l)("tableName"),prop:"table_name"},{default:n(()=>[o(r,{modelValue:e.table_name,"onUpdate:modelValue":t[0]||(t[0]=s=>e.table_name=s),clearable:"",placeholder:a(l)("tableNamePlaceholder"),class:"input-width",maxlength:"64"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:a(l)("tableContent"),prop:"table_content"},{default:n(()=>[o(r,{modelValue:e.table_content,"onUpdate:modelValue":t[1]||(t[1]=s=>e.table_content=s),clearable:"",placeholder:a(l)("tableContentPlaceholder"),class:"input-width",maxlength:"64"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:a(l)("moduleName")},{default:n(()=>[o(r,{modelValue:e.module_name,"onUpdate:modelValue":t[2]||(t[2]=s=>e.module_name=s),clearable:"",placeholder:a(l)("moduleNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:a(l)("className")},{default:n(()=>[o(r,{modelValue:e.class_name,"onUpdate:modelValue":t[3]||(t[3]=s=>e.class_name=s),clearable:"",placeholder:a(l)("classNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:a(l)("editType")},{default:n(()=>[o(f,{modelValue:e.edit_type,"onUpdate:modelValue":t[4]||(t[4]=s=>e.edit_type=s),placeholder:a(l)("editTypePlaceholder")},{default:n(()=>[o(c,{label:1},{default:n(()=>[m(d(a(l)("popup")),1)]),_:1}),o(c,{label:2},{default:n(()=>[m(d(a(l)("page")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1}),o(te,{class:"flex mt-4",gutter:15},{default:n(()=>[o(V,{span:6},{default:n(()=>[o(g,{class:"box-card !border-none p-none",shadow:"never"},{default:n(()=>[o(w,{"content-position":"left"},{default:n(()=>[m(d(a(l)("commentField")),1)]),_:1}),i("div",{class:"flex flex-row m-0.5 cursor-pointer flex-wrap",ref:a(E).set},[(x(!0),y(h,null,q(I.common,(s,p)=>(x(),y("div",{class:"border border-dashed border-gray-200 mt-2 text-sm mr-2 pt-1 pb-1 pl-1.5 pr-1.5 dashed-border design-field",key:p,"data-id":p},d(s.column_comment),9,Re))),128))],512),o(w,{"content-position":"left"},{default:n(()=>[m(d(a(l)("baseField")),1)]),_:1}),i("div",{class:"flex flex-row m-0.5 cursor-pointer flex-wrap",ref:a(E).set},[(x(!0),y(h,null,q(I.base,(s,p)=>(x(),y("div",{class:"border border-dashed border-gray-200 mt-2 text-sm mr-2 pt-1 pb-1 pl-1.5 pr-1.5 dashed-border design-field",key:p,"data-id":p},d(s.column_comment),9,De))),128))],512)]),_:1})]),_:1}),o(V,{span:12},{default:n(()=>[o(g,{class:"box-card !border-none p-none",shadow:"never"},{default:n(()=>[i("div",{class:"flex flex-col",ref_key:"fieldBoxRef",ref:C},[(x(!0),y(h,null,q(e.table_column,(s,p)=>(x(),y("div",{class:ze(["flex flex-row m-0.5 cursor-pointer justify-between items-center border border-dashed border-gray-200 dashed-border p-2 pt-1 pb-1",p===e.editFiledIndex?"activate":""]),key:p,"data-id":p,onClick:k=>Q(p)},[i("div",Pe,[i("div",Be,[i("div",Ae,d(a(l)("columnName"))+"：",1),o(r,{class:"w-50 m-2",modelValue:s.column_name,"onUpdate:modelValue":k=>s.column_name=k,size:"small",placeholder:a(l)("columnNamePlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),i("div",Le,[i("div",$e,d(a(l)("columnComment"))+"：",1),o(r,{class:"w-50 m-2",modelValue:s.column_comment,"onUpdate:modelValue":k=>s.column_comment=k,size:"small",placeholder:a(l)("columnCommentPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),i("div",Oe,[i("div",Ge,d(a(l)("columnType"))+"：",1),i("div",Ke,d(s.column_type),1)])]),i("div",{onClick:k=>X(p),class:"items-center justify-center flex items-center flex-shrink-0 rounded-full bg-red-400 text-white icon-btn w-7 h-7"},[o(le,null,{default:n(()=>[o(ee)]),_:1})],8,We)],10,Se))),128))],512)]),_:1})]),_:1}),o(V,{span:6},{default:n(()=>[e.table_column.length?(x(),Ce(g,{key:0,class:"box-card !border-none p-none",shadow:"never"},{default:n(()=>[o(w,{"content-position":"left"},{default:n(()=>[m(d(a(l)("fieldAttribute")),1)]),_:1}),i("div",null,[i("div",Me,[i("div",Qe,d(a(l)("columnName"))+"：",1),i("div",null,[o(r,{class:"w-50 m-2",modelValue:e.table_column[e.editFiledIndex].column_name,"onUpdate:modelValue":t[5]||(t[5]=s=>e.table_column[e.editFiledIndex].column_name=s),size:"small",placeholder:a(l)("columnNamePlaceholder")},null,8,["modelValue","placeholder"])])]),i("div",Ze,[i("div",Je,d(a(l)("columnComment"))+"：",1),i("div",null,[o(r,{class:"w-50 m-2",modelValue:e.table_column[e.editFiledIndex].column_comment,"onUpdate:modelValue":t[6]||(t[6]=s=>e.table_column[e.editFiledIndex].column_comment=s),size:"small",placeholder:a(l)("columnCommentPlaceholder")},null,8,["modelValue","placeholder"])])]),i("div",He,[i("div",Xe,d(a(l)("isPk"))+"：",1),i("div",null,[o(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_pk,"onUpdate:modelValue":t[7]||(t[7]=s=>e.table_column[e.editFiledIndex].is_pk=s)},{default:n(()=>[o(c,{label:1,size:"large"},{default:n(()=>[m(d(a(l)("yes")),1)]),_:1}),o(c,{label:0,size:"large"},{default:n(()=>[m(d(a(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])])]),o(w,{"content-position":"left"},{default:n(()=>[m(d(a(l)("commentField")),1)]),_:1}),i("div",null,[i("div",Ye,[i("div",el,d(a(l)("isRequired"))+"：",1),i("div",null,[o(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_required,"onUpdate:modelValue":t[8]||(t[8]=s=>e.table_column[e.editFiledIndex].is_required=s)},{default:n(()=>[o(c,{label:1,size:"large"},{default:n(()=>[m(d(a(l)("yes")),1)]),_:1}),o(c,{label:0,size:"large"},{default:n(()=>[m(d(a(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),i("div",ll,[i("div",tl,d(a(l)("isInsert"))+"：",1),i("div",null,[o(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_insert,"onUpdate:modelValue":t[9]||(t[9]=s=>e.table_column[e.editFiledIndex].is_insert=s)},{default:n(()=>[o(c,{label:1,size:"large"},{default:n(()=>[m(d(a(l)("yes")),1)]),_:1}),o(c,{label:0,size:"large"},{default:n(()=>[m(d(a(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),i("div",ol,[i("div",al,d(a(l)("isUpdate"))+"：",1),i("div",null,[o(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_update,"onUpdate:modelValue":t[10]||(t[10]=s=>e.table_column[e.editFiledIndex].is_update=s)},{default:n(()=>[o(c,{label:1,size:"large"},{default:n(()=>[m(d(a(l)("yes")),1)]),_:1}),o(c,{label:0,size:"large"},{default:n(()=>[m(d(a(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),i("div",sl,[i("div",il,d(a(l)("isLists"))+"：",1),i("div",null,[o(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_lists,"onUpdate:modelValue":t[11]||(t[11]=s=>e.table_column[e.editFiledIndex].is_lists=s)},{default:n(()=>[o(c,{label:1,size:"large"},{default:n(()=>[m(d(a(l)("yes")),1)]),_:1}),o(c,{label:0,size:"large"},{default:n(()=>[m(d(a(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),i("div",nl,[i("div",dl,d(a(l)("isSearch"))+"：",1),i("div",null,[o(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_search,"onUpdate:modelValue":t[12]||(t[12]=s=>e.table_column[e.editFiledIndex].is_search=s)},{default:n(()=>[o(c,{label:1,size:"large"},{default:n(()=>[m(d(a(l)("yes")),1)]),_:1}),o(c,{label:0,size:"large"},{default:n(()=>[m(d(a(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),i("div",rl,[i("div",ml,d(a(l)("isQuery"))+"：",1),i("div",null,[o(f,{class:"ml-4",modelValue:e.table_column[e.editFiledIndex].is_query,"onUpdate:modelValue":t[13]||(t[13]=s=>e.table_column[e.editFiledIndex].is_query=s)},{default:n(()=>[o(c,{label:1,size:"large"},{default:n(()=>[m(d(a(l)("yes")),1)]),_:1}),o(c,{label:0,size:"large"},{default:n(()=>[m(d(a(l)("no")),1)]),_:1})]),_:1},8,["modelValue"])])]),i("div",ul,[i("div",_l,d(a(l)("queryType"))+"：",1),i("div",null,[o(S,{class:"m-2",placeholder:a(l)("selectPlaceholder"),size:"small",modelValue:e.table_column[e.editFiledIndex].query_type,"onUpdate:modelValue":t[14]||(t[14]=s=>e.table_column[e.editFiledIndex].query_type=s)},{default:n(()=>[(x(),y(h,null,q(W,(s,p)=>o(D,{label:s,value:s,key:p},null,8,["label","value"])),64))]),_:1},8,["placeholder","modelValue"])])]),i("div",cl,[i("div",pl,d(a(l)("viewType"))+"：",1),i("div",null,[o(S,{class:"m-2",placeholder:a(l)("selectPlaceholder"),size:"small",modelValue:e.table_column[e.editFiledIndex].view_type,"onUpdate:modelValue":t[15]||(t[15]=s=>e.table_column[e.editFiledIndex].view_type=s)},{default:n(()=>[(x(),y(h,null,q(M,(s,p)=>o(D,{label:s.label,value:s.value,key:p},null,8,["label","value"])),64))]),_:1},8,["placeholder","modelValue"])])])])]),_:1})):Ne("",!0)]),_:1})]),_:1})])),[[oe,v.value]]),i("div",fl,[i("div",bl,[o(P,{type:"primary",onClick:t[16]||(t[16]=s=>H(j.value))},{default:n(()=>[m(d(a(l)("save")),1)]),_:1}),o(P,{onClick:t[17]||(t[17]=s=>Y())},{default:n(()=>[m(d(a(l)("cancel")),1)]),_:1})])])],64)}}});const ut=Ue(xl,[["__scopeId","data-v-d40ad65e"]]);export{ut as default};
