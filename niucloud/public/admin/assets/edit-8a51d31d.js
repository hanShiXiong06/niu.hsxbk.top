import{g as ue,r as v,a4 as W,b7 as x,w as ce,aa as fe,m as r,n as h,F as n,E as i,q as s,L as d,u as t,K as P,I as K,J as Q,D as c,a1 as X,v as Y,T as _,am as _e,G as ge,by as ve,bz as be}from"./base-45eb5090.js";/* empty css                *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                 */import"./el-tooltip-58212670.js";import{h as xe,C as Ce,d as ye}from"./index-341914e3.js";/* empty css                  *//* empty css                         */import{_ as he}from"./edit-article-fd1db3da.js";import{_ as ke}from"./edit-graphic-nav-54933fb7.js";import{_ as we}from"./edit-horz-blank-c370aa22.js";import{_ as Ve}from"./edit-image-ads-8540ee0c.js";import{_ as Be}from"./edit-member-info-be824b72.js";import{_ as ze}from"./edit-page-22e17f6a.js";import{_ as Ee}from"./edit-text-0f69bb8b.js";import{v as Z}from"./event-4977bef7.js";import{t as a}from"./index-047041cb.js";import{i as Te,e as Oe,a as Se}from"./diy-e858e923.js";import{u as De,a as Re}from"./vue-router-fcbaaf02.js";import{u as qe}from"./diy-0b3a8b2e.js";import{a as Ne}from"./storage-4159d1ed.js";import{c as Ue}from"./cloneDeep-fcb24660.js";import{E as Ie}from"./index-0d830c44.js";import{a as $e}from"./index-aef37b98.js";import{E as Pe}from"./index-25c37860.js";import{a as Je,E as je}from"./index-c3a4e282.js";import{E as Fe}from"./index-3be486d3.js";import{E as Le}from"./index-9670e877.js";import{E as Me}from"./index-4ce9333e.js";import{a as Ae,E as Ge}from"./index-c4fd4c9d.js";import{E as He}from"./index-913f64d7.js";import{E as We}from"./index-fc3020f4.js";import{_ as Ke}from"./_plugin-vue_export-helper-c27b6911.js";import"./el-overlay-616d6124.js";import"./index-cd1661d3.js";import"./focus-trap-318ae2e0.js";import"./el-radio-2719e44c.js";import"./el-avatar-bc58ad46.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                        *//* empty css                    *//* empty css                        */import"./article-4af479a6.js";import"./index-cbbcd330.js";import"./_Uint8Array-e584e472.js";import"./_initCloneObject-983ff8c8.js";import"./index-c0090d79.js";import"./isEqual-f877b6c1.js";import"./flatten-0fc8b7eb.js";import"./_isIterateeCall-104f1f93.js";import"./index-da8a1336.js";import"./index-e841b684.js";import"./index-cc9a73f0.js";import"./index-201145a4.js";import"./strings-2444fdb3.js";import"./directive-9f485fe5.js";import"./index.vue_vue_type_script_setup_true_lang-56649ff2.js";import"./index-1b934a92.js";import"./index.vue_vue_type_style_index_0_lang-671f772c.js";import"./attachment-15395c63.js";/* empty css                 *//* empty css                    */import"./index-e29fff14.js";import"./index-a096e75b.js";import"./index-719dad93.js";import"./sortable.esm-be94e56d.js";import"./range-d6f58b9e.js";import"./common-af78c857.js";import"./common-2cf17469.js";import"./castArray-df7eff2c.js";import"./index-038ec88a.js";import"./index-f79599e2.js";const Qe=E=>(ve("data-v-1a38e6eb"),E=E(),be(),E),Xe={class:"main-container flex-1"},Ye={class:"pl-[5px]"},Ze={class:"text-white ml-[10px] flex items-center"},et={class:"mr-[5px]"},tt=Qe(()=>s("div",{class:"flex-1"},null,-1)),ot={class:"full-container flex flex-row flex-1 bg-page"},lt={class:"component-list w-[290px]"},nt={class:"flex flex-row flex-wrap"},at=["title","onClick"],it={class:"block text-base truncate"},st={class:"preview-wrap flex-1 relative mt-[20px]"},rt={class:"diy-view-wrap w-[375px] shadow-lg mx-auto"},pt={class:"text-base block text-center truncate cursor-pointer h-[64px] leading-[84px]"},mt={class:"preview-block relative"},dt={class:"quick-action absolute text-center -right-[70px] top-[20px] w-[42px] rounded shadow-md"},ut=["src"],ct={class:"preview-iframe w-[375px] pt-[20px] px-[20px]"},ft={class:"font-bold text-xl mb-[40px]"},_t={class:"mb-[20px] flex flex-col"},gt={class:"mb-[10px]"},vt={class:"edit-attribute-wrap w-[400px]"},bt={class:"card-header flex justify-between items-center"},xt={class:"title flex-1"},Ct={key:0,class:"tab-wrap flex rounded-[50px] bg-gray-100 text-[14px]"},yt={class:"edit-component-wrap"},ht={class:"edit-attr-item-wrap"},kt={class:"mb-[10px]"},wt={class:"text-sm text-gray-400"},Vt={key:1,class:"edit-attr-item-wrap"},Bt={class:"mb-[10px]"},zt={class:"text-sm text-gray-400"},Et=ue({__name:"edit",setup(E){const e=qe(),p=De(),N=Re();p.query.id=p.query.id||0,p.query.name=p.query.name||"",p.query.type=p.query.type||"",p.query.template=p.query.template||"",p.query.title=p.query.title||"",p.query.back=p.query.back||"/diy/list";const T=v(""),k=v(""),O=v(""),S=v(!1),D=v(!1),ee=v(0),U=p.query.back,w=v([]),J=W([]),j=v(""),F=v(J),te=m=>{},V=W({id:e.id,name:e.name,title:e.global.title,value:JSON.stringify({global:x(e.global),value:x(e.value)})}),I=v(!0),oe=()=>{I.value?N.push(U):Ie.confirm(a("leavePageTitleTips"),a("leavePageContentTips"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning",autofocus:!1}).then(()=>{N.push(U)}).catch(()=>{})},le=Object.assign({"./components/edit-article.vue":he,"./components/edit-graphic-nav.vue":ke,"./components/edit-horz-blank.vue":we,"./components/edit-image-ads.vue":Ve,"./components/edit-member-info.vue":Be,"./components/edit-page.vue":ze,"./components/edit-text.vue":Ee}),L={};for(const[m,o]of Object.entries(le)){const C=m.replace(/^\.\/(.*)\.\w+$/,"$1").split("/")[1];L[C]=o.default}ce(()=>e,(m,o)=>{let f={id:m.id,name:m.name,title:m.global.title,value:JSON.stringify({global:x(m.global),value:x(m.value)})};e.postMessage(),I.value=JSON.stringify(f)==JSON.stringify(V)},{deep:!0}),Te({id:p.query.id,name:p.query.name,type:p.query.type,template:p.query.template,title:p.query.title}).then(m=>{let o=m.data;if(e.init(),e.id=o.id||0,e.name=o.name,e.type=o.type,e.typeName=o.type_name,e.templateName=o.template,e.isDefault=o.is_default,o.value){let f=JSON.parse(o.value);e.global=f.global,f.value.length&&(e.value=f.value)}else e.global.title=o.title;V.id=e.id,V.name=e.name,V.title=e.global.title,V.value=JSON.stringify({global:x(e.global),value:x(e.value)}),w.value=o.component;for(let f in w.value){J.push(f);for(let C in w.value[f].list){let u=Ue(w.value[f].list[C]);u.id=e.generateRandom(),u.componentName=C,u.componentTitle=u.title,Object.assign(u,u.value),delete u.name,delete u.title,delete u.value,delete u.type,delete u.icon,e.components.push(u)}}k.value=o.domain_url.wap_domain,T.value=o.domain_url.wap_url,j.value=o.page,M()}),window.addEventListener("message",m=>{try{let o=JSON.parse(m.data);if(!o.type)return;switch(o.type){case"init":e.load=!0,e.postMessage();break;case"change":e.changeCurrentIndex(o.index,o.component);break;case"data":e.changeCurrentIndex(o.index,o.component),e.global=o.global,e.value=o.value;break}}catch(o){console.log("后台接受数据错误",o)}},!1);const ne=()=>{if(k.value.trim().length==0){$e({type:"warning",message:`${a("wapDomainPlaceholder")}`});return}T.value=k.value+"/wap",M(),Ne.set({key:"wap_domain",data:T.value}),S.value=!0,D.value=!1},M=()=>{O.value=`${T.value}/${j.value}?mode=decorate`},ae=()=>{if(O.value){var m=new Date().getTime(),o=m-ee.value;o<1e3?(D.value=!0,S.value=!1,O.value=""):(D.value=!1,S.value=!0)}},B=v(!1),ie=()=>{if(!e.verify()||B.value)return;B.value=!0;let m={id:e.id,name:e.name,title:e.global.title,type:e.type,template:e.templateName,is_default:e.isDefault,is_change:I.value?0:1,value:JSON.stringify({global:x(e.global),value:x(e.value)})};(e.id?Oe:Se)(m).then(f=>{B.value=!1,f.code==1&&(e.id?B.value=!1:N.push(U))}).catch(f=>{B.value=!1})};return(m,o)=>{const f=fe("ArrowLeft"),C=ge,u=Pe,se=xe,y=Ce,re=Je,pe=je,$=Fe,z=Le,me=Me,R=ye,g=Ae,b=He,A=Ge,de=We;return r(),h("div",Xe,[n(se,{class:"flex items-center h-[60px] bg-primary px-[20px]"},{default:i(()=>[s("div",{class:"text-white cursor-pointer flex items-center",onClick:oe},[n(C,{size:"14"},{default:i(()=>[n(f)]),_:1}),s("span",Ye,d(t(a)("back")),1)]),s("div",Ze,[s("span",et," ｜ "+d(t(a)("decorating"))+"："+d(t(e).typeName),1)]),tt,n(u,{onClick:o[0]||(o[0]=l=>ie())},{default:i(()=>[P(d(t(a)("save")),1)]),_:1})]),_:1}),s("div",ot,[s("div",lt,[n($,{class:"px-[10px]"},{default:i(()=>[n(pe,{modelValue:F.value,"onUpdate:modelValue":o[1]||(o[1]=l=>F.value=l),onChange:te},{default:i(()=>[(r(!0),h(K,null,Q(w.value,(l,G)=>(r(),c(re,{key:G,title:l.title,name:G},{default:i(()=>[s("ul",nt,[(r(!0),h(K,null,Q(l.list,(q,H)=>(r(),h("li",{key:H,class:"w-2/6 text-center cursor-pointer h-[75px]",title:q.title,onClick:Tt=>t(e).addComponent(H,q)},[n(y,{name:q.icon,size:"23px"},null,8,["name"]),s("span",it,d(q.title),1)],8,at))),128))])]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])]),_:1})]),s("div",st,[n($,null,{default:i(()=>[n(u,{class:"page-btn absolute right-[20px]",onClick:o[2]||(o[2]=l=>t(e).changeCurrentIndex(-99))},{default:i(()=>[P(d(t(a)("pageSet")),1)]),_:1}),s("div",rt,[s("div",{class:"preview-head bg-no-repeat bg-center bg-cover",onClick:o[3]||(o[3]=l=>t(e).changeCurrentIndex(-99))},[s("span",pt,d(t(e).global.title),1)]),s("div",mt,[s("ul",dt,[n(z,{effect:"light",content:t(a)("moveUpComponent"),placement:"right"},{default:i(()=>[n(y,{name:"iconfont-iconjiantoushang",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).moveUpComponent},null,8,["onClick"])]),_:1},8,["content"]),n(z,{effect:"light",content:t(a)("moveDownComponent"),placement:"right"},{default:i(()=>[n(y,{name:"iconfont-iconjiantouxia",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).moveDownComponent},null,8,["onClick"])]),_:1},8,["content"]),n(z,{effect:"light",content:t(a)("copyComponent"),placement:"right"},{default:i(()=>[n(y,{name:"iconfont-iconcopy-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).copyComponent},null,8,["onClick"])]),_:1},8,["content"]),n(z,{effect:"light",content:t(a)("delComponent"),placement:"right"},{default:i(()=>[n(y,{name:"iconfont-icondelete-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).delComponent},null,8,["onClick"])]),_:1},8,["content"]),n(z,{effect:"light",content:t(a)("resetComponent"),placement:"right"},{default:i(()=>[n(y,{name:"iconfont-iconloader-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).resetComponent},null,8,["onClick"])]),_:1},8,["content"])]),X(s("iframe",{id:"previewIframe",src:O.value,frameborder:"0",class:"preview-iframe w-[375px]",onLoad:ae},null,40,ut),[[Z,S.value]]),X(s("div",ct,[s("div",ft,d(t(a)("developTitle")),1),s("div",_t,[s("text",gt,d(t(a)("wapDomain")),1),n(me,{modelValue:k.value,"onUpdate:modelValue":o[4]||(o[4]=l=>k.value=l),placeholder:t(a)("wapDomainPlaceholder"),clearable:""},null,8,["modelValue","placeholder"])]),n(u,{type:"primary",onClick:ne},{default:i(()=>[P(d(t(a)("confirm")),1)]),_:1})],512),[[Z,D.value]])])])]),_:1})]),s("div",vt,[n($,null,{default:i(()=>[n(de,{class:"box-card",shadow:"never"},{header:i(()=>[s("div",bt,[s("span",xt,d(t(e).currentIndex==-99?t(a)("pageSet"):t(e).editComponent.componentTitle),1),t(e).currentComponent?(r(),h("div",Ct,[s("span",{class:Y(["cursor-pointer rounded-[50px] py-[5px] px-[15px]",{"bg-primary text-white":t(e).editTab=="content"}]),onClick:o[5]||(o[5]=l=>t(e).editTab="content")},d(t(a)("tabEditContent")),3),s("span",{class:Y(["cursor-pointer rounded-[50px] py-[5px] px-[15px]",{"bg-primary text-white":t(e).editTab=="style"}]),onClick:o[6]||(o[6]=l=>t(e).editTab="style")},d(t(a)("tabEditStyle")),3)])):_("",!0)])]),default:i(()=>[s("div",yt,[t(e).currentComponent?(r(),c(_e(L[t(e).currentComponent]),{key:0,value:t(e).value[t(e).currentIndex]},{style:i(()=>[s("div",ht,[s("h3",kt,d(t(a)("componentStyleTitle")),1),n(A,{"label-width":"80px",class:"px-[10px]"},{default:i(()=>[t(e).editComponent.ignore.indexOf("pageBgColor")==-1?(r(),c(g,{key:0,label:t(a)("bottomBgColor"),class:"display-block"},{default:i(()=>[n(R,{modelValue:t(e).editComponent.pageBgColor,"onUpdate:modelValue":o[7]||(o[7]=l=>t(e).editComponent.pageBgColor=l),"show-alpha":"",predefine:t(e).predefineColors},null,8,["modelValue","predefine"]),s("div",wt,d(t(a)("bottomBgTips")),1)]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("componentBgColor")==-1?(r(),c(g,{key:1,label:t(a)("componentBgColor")},{default:i(()=>[n(R,{modelValue:t(e).editComponent.componentBgColor,"onUpdate:modelValue":o[8]||(o[8]=l=>t(e).editComponent.componentBgColor=l),"show-alpha":"",predefine:t(e).predefineColors},null,8,["modelValue","predefine"])]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("marginTop")==-1?(r(),c(g,{key:2,label:t(a)("marginTop")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.top,"onUpdate:modelValue":o[9]||(o[9]=l=>t(e).editComponent.margin.top=l),"show-input":"",size:"small",min:0,class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("marginBottom")==-1?(r(),c(g,{key:3,label:t(a)("marginBottom")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.bottom,"onUpdate:modelValue":o[10]||(o[10]=l=>t(e).editComponent.margin.bottom=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("marginBoth")==-1?(r(),c(g,{key:4,label:t(a)("marginBoth")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.both,"onUpdate:modelValue":o[11]||(o[11]=l=>t(e).editComponent.margin.both=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("topRounded")==-1?(r(),c(g,{key:5,label:t(a)("topRounded")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.topRounded,"onUpdate:modelValue":o[12]||(o[12]=l=>t(e).editComponent.topRounded=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider",max:50},null,8,["modelValue"])]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("bottomRounded")==-1?(r(),c(g,{key:6,label:t(a)("bottomRounded")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.bottomRounded,"onUpdate:modelValue":o[13]||(o[13]=l=>t(e).editComponent.bottomRounded=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider",max:50},null,8,["modelValue"])]),_:1},8,["label"])):_("",!0)]),_:1})])]),_:1},8,["value"])):(r(),h("div",Vt,[s("h3",Bt,d(t(a)("componentStyleTitle")),1),n(A,{"label-width":"80px",class:"px-[10px]"},{default:i(()=>[t(e).editComponent.ignore.indexOf("pageBgColor")==-1?(r(),c(g,{key:0,label:t(a)("bottomBgColor"),class:"display-block"},{default:i(()=>[n(R,{modelValue:t(e).editComponent.pageBgColor,"onUpdate:modelValue":o[14]||(o[14]=l=>t(e).editComponent.pageBgColor=l),"show-alpha":"",predefine:t(e).predefineColors},null,8,["modelValue","predefine"]),s("div",zt,d(t(a)("bottomBgTips")),1)]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("componentBgColor")==-1?(r(),c(g,{key:1,label:t(a)("componentBgColor")},{default:i(()=>[n(R,{modelValue:t(e).editComponent.componentBgColor,"onUpdate:modelValue":o[15]||(o[15]=l=>t(e).editComponent.componentBgColor=l),"show-alpha":"",predefine:t(e).predefineColors},null,8,["modelValue","predefine"])]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("marginTop")==-1?(r(),c(g,{key:2,label:t(a)("marginTop")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.top,"onUpdate:modelValue":o[16]||(o[16]=l=>t(e).editComponent.margin.top=l),"show-input":"",size:"small",min:0,class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("marginBottom")==-1?(r(),c(g,{key:3,label:t(a)("marginBottom")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.bottom,"onUpdate:modelValue":o[17]||(o[17]=l=>t(e).editComponent.margin.bottom=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("marginBoth")==-1?(r(),c(g,{key:4,label:t(a)("marginBoth")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.both,"onUpdate:modelValue":o[18]||(o[18]=l=>t(e).editComponent.margin.both=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("topRounded")==-1?(r(),c(g,{key:5,label:t(a)("topRounded")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.topRounded,"onUpdate:modelValue":o[19]||(o[19]=l=>t(e).editComponent.topRounded=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider",max:50},null,8,["modelValue"])]),_:1},8,["label"])):_("",!0),t(e).editComponent.ignore.indexOf("bottomRounded")==-1?(r(),c(g,{key:6,label:t(a)("bottomRounded")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.bottomRounded,"onUpdate:modelValue":o[20]||(o[20]=l=>t(e).editComponent.bottomRounded=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider",max:50},null,8,["modelValue"])]),_:1},8,["label"])):_("",!0)]),_:1})]))])]),_:1})]),_:1})])])])}}});const tl=Ke(Et,[["__scopeId","data-v-1a38e6eb"]]);export{tl as default};
