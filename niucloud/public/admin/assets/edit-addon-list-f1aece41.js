import{d as I,r as v,o as z,E as F,R as N,e as p,f as x,Q as m,u as o,g as a,B as _,y as r,x as c,F as C,z as R,A as j,v as w,H as P,h as $}from"./base-d77b0726.js";/* empty css                   *//* empty css                   *//* empty css                        *//* empty css                    *//* empty css               */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                *//* empty css                  */import{_ as M}from"./index.vue_vue_type_script_setup_true_lang-8d43c28e.js";import{v as f}from"./index-331c6de1.js";import{t as i}from"./index-70af0995.js";import{u as O}from"./diy-c21e40bd.js";import{e as y}from"./common-4a1cac58.js";import{C as H}from"./sys-394b27a4.js";import{S as Q}from"./sortable.esm-be94e56d.js";import{r as U}from"./range-ed8a9812.js";import{E as W}from"./index-91bdda63.js";import{E as q}from"./index-68c5ad54.js";import{E as G}from"./index-435afe75.js";import{a as J,E as K}from"./index-0d721416.js";import{E as X}from"./index-6a54cf26.js";import{v as Y}from"./directive-08cd03ab.js";const Z={class:"content-wrap"},ee={class:"edit-attr-item-wrap"},te={class:"mb-[10px]"},oe={class:"flex items-center pb-[10px]"},ae=["src"],le={class:"flex flex-col justify-center ml-[10px] leading-[1]"},se={class:"text-[14px]"},ne={class:"text-[12px] text-[#999] mt-[8px]"},ie=["onClick"],re={class:"style-wrap"},de=I({__name:"edit-addon-list",setup(ce,{expose:k}){const t=O();t.editComponent.ignore=[],t.editComponent.verify=s=>{var e={code:!0,message:""};return t.value[s].list.length===0&&(e.code=!1,e.message=i("selectAddonTips")),e};const u=v(!1),b=v();z(()=>{F(()=>{const s=Q.create(b.value,{group:"item-wrap",animation:200,onEnd:e=>{const d=t.editComponent.list[e.oldIndex];t.editComponent.list.splice(e.oldIndex,1),t.editComponent.list.splice(e.newIndex,0,d),s.sort(U(t.editComponent.list.length).map(g=>g.toString()))}})})});const l=N({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{title:"",key:""}});((s=1)=>{l.loading=!0,l.page=s,H({...l.searchParam}).then(e=>{l.loading=!1,l.data=e.data,l.total=e.data.length}).catch(()=>{l.loading=!1})})();const E=s=>{let e={id:t.generateRandom(),key:"",title:"",url:"",icon:"",desc:""};for(let d in s)e[d]=s[d];t.editComponent.list.push(e),u.value=!1},S=()=>{u.value=!0};return k({}),(s,e)=>{const d=M,g=W,T=q,B=G,h=J,D=K,L=X,V=Y;return p(),x(C,null,[m(a("div",Z,[a("div",ee,[a("h3",te,_(o(i)("addonListSet")),1),r(T,{"label-width":"100px",class:"px-[10px]"},{default:c(()=>[a("div",{ref_key:"addonBoxRef",ref:b},[(p(!0),x(C,null,R(o(t).editComponent.list,(n,A)=>(p(),x("div",{key:n.id,class:"item-wrap p-[10px] pb-0 relative border border-dashed border-gray-300 mb-[16px]"},[m(a("div",oe,[a("img",{class:"w-[60px] h-[60px] rounded-md",src:o(y)(n.icon)},null,8,ae),a("div",le,[a("span",se,_(n.title),1),a("span",ne,_(n.desc),1)])],512),[[f,n.title]]),m(a("div",{class:"del absolute cursor-pointer z-[2] top-[-8px] right-[-8px]",onClick:me=>o(t).editComponent.list.splice(A,1)},[r(d,{name:"element-CircleCloseFilled",color:"#bbb",size:"20px"})],8,ie),[[f,o(t).editComponent.list.length>1]])]))),128))],512),r(g,{class:"w-full",onClick:S},{default:c(()=>[j(_(o(i)("addAddon")),1)]),_:1})]),_:1})]),r(L,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=n=>u.value=n),title:o(i)("addonListTips"),width:"600px","close-on-press-escape":!1,"close-on-click-modal":!1},{default:c(()=>[a("div",null,[m((p(),w(D,{data:l.data,size:"large",onCurrentChange:E,"highlight-current-row":"","max-height":"500px"},{empty:c(()=>[a("span",null,_(l.loading?"":o(i)("emptyData")),1)]),default:c(()=>[r(h,{label:o(i)("addonIcon"),width:"120",align:"center"},{default:c(({row:n})=>[n.icon?(p(),w(B,{key:0,class:"w-[50px] h-[50px]",src:o(y)(n.icon),fit:"contain"},null,8,["src"])):P("",!0)]),_:1},8,["label"]),r(h,{prop:"title","show-overflow-tooltip":!0,width:"120",label:o(i)("addonTitle")},null,8,["label"]),r(h,{prop:"desc","show-overflow-tooltip":!0,label:o(i)("addonDesc")},null,8,["label"])]),_:1},8,["data"])),[[V,l.loading]])])]),_:1},8,["modelValue","title"])],512),[[f,o(t).editTab=="content"]]),m(a("div",re,[$(s.$slots,"style")],512),[[f,o(t).editTab=="style"]])],64)}}}),$e=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"}));export{$e as _};
