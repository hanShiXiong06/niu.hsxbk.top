import{g as K,r as E,j as D,bI as X,m as f,D as w,E as t,t as Y,q as p,v as B,F as o,a1 as y,n as q,I as M,J as O,u as l,by as ee,bz as ne,a4 as oe,K as g,L as h,T as te}from"./base-d2ce4248.js";/* empty css                   */import{E as ae}from"./el-overlay-7451f13b.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css                 */import"./el-tooltip-58212670.js";/* empty css                   */import{C as A,O as le,P as ie,Q as ce}from"./index-057b5f2c.js";import{v as x}from"./event-f83e96f5.js";import{E as L}from"./index-953c712f.js";import{E as re}from"./index-92c8bc76.js";import{E as ue}from"./index-3ff0840c.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css               *//* empty css                  *//* empty css                  */import{E as fe,b as de}from"./el-radio-b620ac73.js";import{t as a}from"./index-578c83eb.js";import{_ as me}from"./select-menu-item.vue_vue_type_script_setup_true_lang-7c06146f.js";import{E as pe}from"./index-9997ff5d.js";import{a as be,E as _e}from"./index-f579a83b.js";import{a as ge,E as he}from"./index-83fe4dc1.js";import{E as ye}from"./index-ca6f6e47.js";import{v as ve}from"./directive-3f066692.js";const xe=`@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/c/font_3883393_pgas1v4bw2a.woff2?t=1686965237342) format("woff2"),url(//at.alicdn.com/t/c/font_3883393_pgas1v4bw2a.woff?t=1686965237342) format("woff"),url(//at.alicdn.com/t/c/font_3883393_pgas1v4bw2a.ttf?t=1686965237342) format("truetype")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.iconqiehuan:before{content:"\\e61e"}.iconxiangyoujiantou:before{content:"\\e660"}.iconxiangzuojiantou:before{content:"\\e663"}.icondingdan:before{content:"\\e61d"}.iconyingyongshichang1:before{content:"\\e61c"}.iconyingyongshichang2:before{content:"\\e60b"}.iconlingdang-xianxing:before{content:"\\e8c0"}.icondianhua:before{content:"\\e8c3"}.iconic_manage_assignprop:before{content:"\\e60c"}.iconchengshi:before{content:"\\ec70"}.icontaocanliebiao:before{content:"\\e6b2"}.iconweixin:before{content:"\\e647"}.iconhuiyuanguanli:before{content:"\\e64c"}.iconhuangjinhuiyuan0101-copy:before{content:"\\e621"}.iconhuiyuan1:before{content:"\\e644"}.iconqianbao:before{content:"\\e6ca"}.iconic_description_file24px:before{content:"\\e61a"}.iconzhuangxiu1:before{content:"\\e66b"}.icontuikuanjilu:before{content:"\\e8cf"}.icongengxinhuancun:before{content:"\\e686"}.iconsixingjiance:before{content:"\\e645"}.iconzhuceshezhi:before{content:"\\e6ad"}.iconmanage-apply:before{content:"\\e619"}.iconyingyongguanli:before{content:"\\e61f"}.iconkaifazheguanli:before{content:"\\e624"}.iconlianmengguanli:before{content:"\\e65f"}.icondianzan:before{content:"\\ec7f"}.iconh5e:before{content:"\\e654"}.iconyingyongshichang:before{content:"\\e618"}.icondesktop:before{content:"\\e6e8"}.iconzhifubao:before{content:"\\e8e4"}.iconyunkongjian:before{content:"\\e666"}.iconbankuai:before{content:"\\e668"}.iconneirong2:before{content:"\\e889"}.icon24gl-userGroup:before{content:"\\eb26"}.icon14:before{content:"\\e615"}.iconjubao:before{content:"\\e611"}.iconbiaoti:before{content:"\\e643"}.iconhuiyuanzhongxin:before{content:"\\e692"}.iconfuzhukongbai1:before{content:"\\e642"}.iconjiantoushang:before{content:"\\e600"}.iconloader-line:before{content:"\\e601"}.icondelete-line:before{content:"\\e602"}.iconjiantouxia:before{content:"\\e603"}.iconcopy-line:before{content:"\\e605"}.icontuodong:before{content:"\\e884"}.iconfuzhushuxian:before{content:"\\e6f7"}.iconmofang:before{content:"\\e6c4"}.iconshoudongxuanze:before{content:"\\e6e1"}.iconyihangsange:before{content:"\\e6d5"}.iconyihangsige:before{content:"\\e6d6"}.iconyihangliangge:before{content:"\\e6e2"}.iconyihang5ge:before{content:"\\e6f3"}.icontupianguanggao1:before{content:"\\e649"}.icontuwendaohang2:before{content:"\\e65d"}.iconwenzhang:before{content:"\\e662"}.icongudingzhanshi:before{content:"\\e66e"}.icondanhanghuadong:before{content:"\\e66f"}.icontuwendaohang3:before{content:"\\e670"}.icontudaohang:before{content:"\\e671"}.iconfenyehuadong:before{content:"\\e673"}.iconwendaohang:before{content:"\\e674"}.iconzhuangxiu:before{content:"\\e627"}.icondianpuzhuangxiu:before{content:"\\e616"}.icondibudaohang:before{content:"\\e617"}.iconwangpuzhuangxiu:before{content:"\\e881"}.iconweixingongzhonghao1:before{content:"\\e705"}.iconweixingongzhonghaoguanli:before{content:"\\e609"}.iconxiaochengxu:before{content:"\\e635"}.icondenglu:before{content:"\\e604"}.iconxiaochengxushezhi:before{content:"\\e6b4"}.iconjifen:before{content:"\\e70c"}.iconguanbi:before{content:"\\e612"}.icondengluzhucemima:before{content:"\\e67f"}.iconqiehuanjiaose:before{content:"\\e60f"}.iconbanquan:before{content:"\\e632"}.iconjifen-xianxing:before{content:"\\e897"}.iconhuiyuanliebiao:before{content:"\\e62c"}.iconjiaoseyonghu:before{content:"\\e648"}.iconyonghu:before{content:"\\e65e"}.iconbanquan1:before{content:"\\e66d"}.iconweixingongzhonghao:before{content:"\\e613"}.iconweixinxiaochengxu:before{content:"\\e614"}.icon24gl-code:before{content:"\\e9ba"}.icon24gl-portraitMalePlus2:before{content:"\\eb25"}.iconyuandaima:before{content:"\\e610"}.iconjiaoseguanli:before{content:"\\e62d"}.iconjifen1:before{content:"\\e641"}.iconbanquan2:before{content:"\\e61b"}.iconjianpan:before{content:"\\e661"}.icon24gf-playCircle:before{content:"\\ea82"}.icontuichuquanping:before{content:"\\e755"}.iconfanyi:before{content:"\\e6fb"}.iconquanping:before{content:"\\eb11"}
`,we=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"})),Ve=k=>(ee("data-v-27d4a2fd"),k=k(),ne(),k),ke={class:"flex w-full flex-col"},Ee={class:"head flex w-full mb-[10px]"},ze=Ve(()=>p("span",null,"请选择图标",-1)),je={class:"flex justify-end flex-auto"},Pe={class:"icon-wrap h-[240px]"},$e={class:"flex flex-wrap"},Ie={class:"flex flex-wrap"},qe=K({__name:"index",emits:["select"],setup(k,{emit:C}){const v=E("element"),z=E("false"),V=D(()=>Object.keys(X)),j=D(()=>{const _=Object.assign({"/src/styles/iconfont.css":we})["/src/styles/iconfont.css"].default;return Array.from(_.matchAll(/(icon.*)\:before/g)).map(e=>e[1])}),d=_=>{C("select",_),z.value=!1};return(_,b)=>{const e=A,P=L,T=re,S=ue;return f(),w(S,{trigger:"click",visible:z.value,"onUpdate:visible":b[2]||(b[2]=m=>z.value=m)},{reference:t(()=>[Y(_.$slots,"reference",{},void 0,!0)]),default:t(()=>[p("div",ke,[p("div",Ee,[ze,p("div",je,[p("span",{class:B(["ml-[10px] cursor-pointer",{active:v.value=="element"}]),onClick:b[0]||(b[0]=m=>v.value="element")},"element",2),p("span",{class:B(["ml-[10px] cursor-pointer",{active:v.value=="iconfont"}]),onClick:b[1]||(b[1]=m=>v.value="iconfont")},"iconfont",2)])]),p("div",Pe,[o(T,null,{default:t(()=>[y(p("div",$e,[(f(!0),q(M,null,O(l(V),m=>(f(),w(P,{class:"w-[35px] h-[35px] icon-item",onClick:U=>d("element-"+m)},{default:t(()=>[o(e,{name:"element-"+m},null,8,["name"])]),_:2},1032,["onClick"]))),256))],512),[[x,v.value=="element"]]),y(p("div",Ie,[(f(!0),q(M,null,O(l(j),m=>(f(),w(P,{class:"w-[35px] h-[35px] icon-item",onClick:U=>d("iconfont-"+m)},{default:t(()=>[o(e,{name:"iconfont-"+m},null,8,["name"])]),_:2},1032,["onClick"]))),256))],512),[[x,v.value=="iconfont"]])]),_:1})])])]),_:3},8,["visible"])}}});const Ce=se(qe,[["__scopeId","data-v-27d4a2fd"]]),Te={class:"input-width"},Se={key:1,class:"w-[16px]"},Ue={class:"dialog-footer"},sn=K({__name:"edit-menu",props:{menuTree:{type:Array,default:()=>[]}},emits:["complete"],setup(k,{expose:C,emit:v}){const z=k,V=E(!1),j=E("post"),d=E(!1);let _="";const b={id:0,menu_name:"",menu_type:0,parent_key:"",icon:"",api_url:"",router_path:"",view_path:"",methods:"",sort:"",status:1,is_show:1,menu_key:"",app_type:""},e=oe({...b}),P=E(),T=r=>/^([a-zA-Z_$])([a-zA-Z0-9_$])*$/.test(r),S=D(()=>({menu_name:[{required:!0,message:a("menuNamePlaceholder"),trigger:"blur"}],menu_key:[{required:!0,message:a("menuKeyPlaceholder"),trigger:"blur"},{validator:(r,n,c)=>{T(n)||c(new Error(a("menuKeyValidata"))),c()},trigger:"blur"}],router_path:[{required:e.menu_type!=2,message:a("routePathPlaceholder"),trigger:"blur"}],view_path:[{required:e.menu_type==1,message:a("viewPathPlaceholder"),trigger:"blur"}],icon:[{required:e.menu_type!=2,message:a("selectIconPlaceholder"),trigger:"blur"}],api_url:[{required:e.menu_type==2,message:a("selectIconPlaceholder"),trigger:"blur"}]})),m=r=>{e.icon="",setTimeout(()=>{e.icon=r},200)},U=async r=>{if(d.value||!r)return;const n=e.id?le:ie;await r.validate(async(c,u)=>{if(c){d.value=!0;const s=e;s.api_url=s.api_url?`${s.api_url}/${j.value}`:"",n(s).then(I=>{d.value=!1,V.value=!1,v("complete")}).catch(()=>{d.value=!1})}})};return C({showDialog:V,setFormData:async(r=null)=>{if(d.value=!0,Object.assign(e,b),_=a("addMenu"),r.menu_key){_=a("updateMenu");const n=await(await ce(r.menu_key)).data;Object.keys(e).forEach(c=>{n[c]!=null&&(e[c]=n[c])})}else Object.keys(e).forEach(n=>{r[n]!=null&&(e[n]=r[n])});d.value=!1}}),(r,n)=>{const c=pe,u=be,s=fe,I=de,$=ge,N=he,F=A,G=Ce,Z=ye,J=_e,R=L,Q=ae,H=ve;return f(),w(Q,{modelValue:V.value,"onUpdate:modelValue":n[14]||(n[14]=i=>V.value=i),title:l(_),width:"500px","destroy-on-close":!0},{footer:t(()=>[p("span",Ue,[o(R,{onClick:n[12]||(n[12]=i=>V.value=!1)},{default:t(()=>[g(h(l(a)("cancel")),1)]),_:1}),o(R,{type:"primary",loading:d.value,onClick:n[13]||(n[13]=i=>U(P.value))},{default:t(()=>[g(h(l(a)("confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[y((f(),w(J,{model:e,"label-width":"90px",class:"page-form",ref_key:"formRef",ref:P,rules:l(S)},{default:t(()=>[o(u,{label:l(a)("menuName"),prop:"menu_name"},{default:t(()=>[o(c,{modelValue:e.menu_name,"onUpdate:modelValue":n[0]||(n[0]=i=>e.menu_name=i),placeholder:l(a)("menuNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e.id?te("",!0):(f(),w(u,{key:0,label:l(a)("menuKey"),prop:"menu_key"},{default:t(()=>[o(c,{modelValue:e.menu_key,"onUpdate:modelValue":n[1]||(n[1]=i=>e.menu_key=i),placeholder:l(a)("menuKeyPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),o(u,{label:l(a)("menuType")},{default:t(()=>[o(I,{modelValue:e.menu_type,"onUpdate:modelValue":n[2]||(n[2]=i=>e.menu_type=i)},{default:t(()=>[o(s,{label:0},{default:t(()=>[g(h(l(a)("menuTypeDir")),1)]),_:1}),o(s,{label:1},{default:t(()=>[g(h(l(a)("menuTypeMenu")),1)]),_:1}),o(s,{label:2},{default:t(()=>[g(h(l(a)("menuTypeButton")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(u,{label:l(a)("parentMenu"),prop:"parent_key"},{default:t(()=>[o(N,{modelValue:e.parent_key,"onUpdate:modelValue":n[3]||(n[3]=i=>e.parent_key=i),placeholder:"Select",class:"input-width"},{default:t(()=>[o($,{label:l(a)("topLevel"),value:""},null,8,["label"]),(f(!0),q(M,null,O(z.menuTree,(i,W)=>(f(),w(me,{menu:i,key:W},null,8,["menu"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),y(o(u,{label:l(a)("routePath"),prop:"router_path"},{default:t(()=>[o(c,{modelValue:e.router_path,"onUpdate:modelValue":n[4]||(n[4]=i=>e.router_path=i),placeholder:l(a)("routePathPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),[[x,e.menu_type!=2]]),y(o(u,{label:l(a)("viewPath"),prop:"view_path"},{default:t(()=>[o(c,{modelValue:e.view_path,"onUpdate:modelValue":n[5]||(n[5]=i=>e.view_path=i),placeholder:l(a)("viewPathPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),[[x,e.menu_type==1]]),y(o(u,{label:l(a)("authId"),prop:"api_url"},{default:t(()=>[o(c,{modelValue:e.api_url,"onUpdate:modelValue":n[7]||(n[7]=i=>e.api_url=i),placeholder:l(a)("authIdPlaceholder"),class:"input-width"},{append:t(()=>[o(N,{class:"w-[90px] border-none",modelValue:j.value,"onUpdate:modelValue":n[6]||(n[6]=i=>j.value=i)},{default:t(()=>[o($,{label:"POST",value:"post"}),o($,{label:"GET",value:"get"}),o($,{label:"PUT",value:"put"}),o($,{label:"DELETE",value:"delete"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),[[x,e.menu_type!=0]]),y(o(u,{label:l(a)("menuIcon"),prop:"icon"},{default:t(()=>[p("div",Te,[o(G,{placement:"bottom",width:"300px",onSelect:m},{reference:t(()=>[o(c,null,{prepend:t(()=>[e.icon?(f(),w(F,{key:0,name:e.icon},null,8,["name"])):(f(),q("div",Se))]),append:t(()=>[o(F,{name:"element-RefreshRight",type:"element",onClick:n[8]||(n[8]=i=>e.icon="")})]),_:1})]),_:1})])]),_:1},8,["label"]),[[x,e.menu_type!=2]]),y(o(u,{label:l(a)("status")},{default:t(()=>[o(I,{modelValue:e.status,"onUpdate:modelValue":n[9]||(n[9]=i=>e.status=i)},{default:t(()=>[o(s,{label:1},{default:t(()=>[g(h(l(a)("statusNormal")),1)]),_:1}),o(s,{label:0},{default:t(()=>[g(h(l(a)("statusDeactivate")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),[[x,e.menu_type!=2]]),y(o(u,{label:l(a)("isShow")},{default:t(()=>[o(I,{modelValue:e.is_show,"onUpdate:modelValue":n[10]||(n[10]=i=>e.is_show=i)},{default:t(()=>[o(s,{label:1},{default:t(()=>[g(h(l(a)("show")),1)]),_:1}),o(s,{label:0},{default:t(()=>[g(h(l(a)("hidden")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),[[x,e.menu_type!=2]]),o(u,{label:l(a)("sort")},{default:t(()=>[o(Z,{modelValue:e.sort,"onUpdate:modelValue":n[11]||(n[11]=i=>e.sort=i),min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[H,d.value]])]),_:1},8,["modelValue","title"])}}});export{sn as _};
