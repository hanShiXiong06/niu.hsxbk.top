/* empty css             *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  */import"./index-1bbcede8.js";/* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                    *//* empty css                */import{a as we,E as Se}from"./el-form-item-144bc604.js";/* empty css                          *//* empty css                 *//* empty css                  */import{g as N}from"./event-3e082a4a.js";import{_ as ne}from"./goods_default-3802d665.js";import{t as o}from"./index-3862e13d.js";import{c as $e,e as Ge}from"./common-a45d855f.js";import{u as Ne,a as Ue}from"./vue-router-9f815af7.js";import Oe from"./goods-stock-edit-popup-9aedc213.js";import ze from"./goods-price-edit-popup-a53c15d0.js";import{_ as Ie}from"./goods-spread-popup.vue_vue_type_script_setup_true_lang-f47916c9.js";import{g as Le,a as Be,J as De,K as Re,L as oe,M as le,N as Fe,O as Me,P as Ae}from"./goods-fd566118.js";/* empty css                   */import{a as P}from"./index-a6ffcea0.js";import{E as B}from"./index-b74135ff.js";import{c as je}from"./cloneDeep-028669bf.js";import{E as qe}from"./index-6f670765.js";import{E as He}from"./index-5f2625ed.js";import{E as Je}from"./index-22ce9a15.js";import{a as Ke,E as Qe}from"./index-b7b91fcb.js";import{E as We}from"./index-c5af06c2.js";import{a as Xe,E as Ye}from"./index-6982a78b.js";import{E as Ze}from"./index-784d7581.js";import{a as et,E as tt}from"./index-6191b0b4.js";import{E as at}from"./index-6701860e.js";import{E as ot}from"./index-9ef6974e.js";import{E as lt}from"./index-cefc0b67.js";import{v as st}from"./directive-d226d53f.js";import{d as nt,r as b,M as T,V as rt,b as u,e as k,q as l,p as r,f as d,x as p,u as t,v as m,F as D,t as R,m as x,L as w,C as se,at as it,au as dt}from"./runtime-core.esm-bundler-c17ab5bc.js";import{_ as pt}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-0d36ccbf.js";import"./el-main-03d12282.js";import"./plugin-vue_export-helper-c018272e.js";import"./index-e42600b8.js";import"./el-overlay-380df695.js";import"./index-93efb1b5.js";import"./focus-trap-c0148071.js";import"./index-4b62c73a.js";import"./index-332680c2.js";import"./index-138bfa06.js";import"./index-72bf6cb5.js";import"./_baseClone-37ba2e68.js";import"./index-f6eed9e8.js";import"./debounce-196ce6a6.js";import"./position-0d02b322.js";import"./isEqual-ca98cf0c.js";import"./_isIterateeCall-797defa1.js";import"./index-bfecf17f.js";import"./browser-a1ac24ac.js";import"./aria-adfa05c5.js";import"./validator-f5e079db.js";import"./index-6ff31475.js";import"./rand-14326ce1.js";import"./strings-e72e60f7.js";import"./arrays-e667dc24.js";import"./index-5c20ff8f.js";const F=S=>(it("data-v-57e306f6"),S=S(),dt(),S),mt={class:"main-container"},ct={class:"flex justify-between items-center"},ut={class:"text-[20px]"},_t={class:"region-input"},gt=["placeholder"],ft=F(()=>d("span",{class:"separator"},"-",-1)),ht=["placeholder"],bt={class:"region-input"},vt=["placeholder"],yt=F(()=>d("span",{class:"separator"},"-",-1)),Pt=["placeholder"],kt={class:"mt-[10px]"},xt={class:"mb-[10px] flex items-center"},Ct=["onClick"],Et={class:"min-w-[70px] h-[70px] flex items-center justify-center"},Vt=F(()=>d("div",{class:"image-slot"},[d("img",{class:"w-[70px] h-[70px]",src:ne})],-1)),Tt={key:1,class:"w-[70px] h-[70px]",src:ne,fit:"contain"},wt={class:"ml-2"},St=["title"],$t={class:"text-primary text-[12px]"},Gt=["onClick"],Nt=["onClick"],Ut={key:0},Ot={key:1},zt={class:"mt-[16px] flex"},It={class:"flex items-center flex-1"},Lt=nt({__name:"list",setup(S){const re=Ne().meta.title,_=b(!1),U=Ue();let s=T({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",goods_category:[],goods_type:"",brand_id:"",label_ids:"",start_sale_num:"",end_sale_num:"",start_price:"",end_price:"",status:"1",order:"",sort:""}});const M=b(),E={number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/},O=T([]),ie={checkStrictly:!0},A=T([]),j=T([]),q=T([]);(()=>{Le().then(n=>{let e=n.data;if(e){let i=[];e.forEach(y=>{let f=[];y.child_list&&y.child_list.forEach(G=>{f.push({value:G.category_id,label:G.category_name})}),i.push({value:y.category_id,label:y.category_name,children:f})}),O.splice(0,O.length,...i)}}),Be().then(n=>{let e=n.data;if(e)for(let i in e)A.push(e[i])}),De({}).then(n=>{let e=n.data;e&&j.push(...e)}),Re({}).then(n=>{let e=n.data;e&&q.push(...e)})})();const de=(n,e)=>{s.searchParam.status=n.props.name,c()},C=b(),V=b(!1),H=n=>{V.value=!1,J.value.toggleAllSelection()},J=b(),v=b([]),pe=n=>{v.value=n,C.value=!1,v.value.length>0&&v.value.length<s.data.length?V.value=!0:V.value=!1,v.value.length==s.data.length&&(C.value=!0)},me=n=>{let e=U.resolve({path:"/preview/wap",query:{page:`/shop/pages/goods/detail?goods_id=${n.goods_id}`}});window.open(e.href)},ce=n=>{let e="";n.order=="ascending"?e="asc":n.order=="descending"&&(e="desc"),e&&(s.searchParam.order=n.prop,s.searchParam.sort=e),c()},K=(n,e)=>{oe({goods_ids:n.goods_id,status:e}).then(i=>{c()})},$=n=>{if(v.value.length==0){P({type:"warning",message:`${o("batchEmptySelectedGoodsTips")}`});return}let e=[];v.value.forEach(i=>{e.push(i.goods_id)}),oe({goods_ids:e,status:n}).then(i=>{c()})},Q=()=>{if(v.value.length==0){P({type:"warning",message:`${o("batchEmptySelectedGoodsTips")}`});return}B.confirm(o("batchGoodsDeleteTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{if(_.value)return;_.value=!0;let n=[];v.value.forEach(e=>{n.push(e.goods_id)}),le({goods_ids:n}).then(()=>{c(),_.value=!1}).catch(()=>{_.value=!1})})},ue=Ge((n,e)=>{if(isNaN(n)||!E.number.test(n)){P({type:"warning",message:`${o("sortTips")}`});return}Ae({goods_id:e.goods_id,sort:n}).then(i=>{})}),c=(n=1)=>{if(s.searchParam.start_sale_num&&!E.number.test(s.searchParam.start_sale_num)){P({type:"warning",message:`${o("startSaleNumTips")}`});return}if(s.searchParam.end_sale_num&&!E.number.test(s.searchParam.end_sale_num)){P({type:"warning",message:`${o("endSaleNumTips")}`});return}if(s.searchParam.start_price&&!E.digit.test(s.searchParam.start_price)){P({type:"warning",message:`${o("startPriceTips")}`});return}if(s.searchParam.end_price&&!E.digit.test(s.searchParam.end_price)){P({type:"warning",message:`${o("endPriceTips")}`});return}s.loading=!0,s.page=n;let e=je(s.searchParam);Fe({page:s.page,limit:s.limit,...e}).then(i=>{s.loading=!1,s.data=i.data.data,s.total=i.data.total}).catch(()=>{s.loading=!1})};c();const _e=()=>{U.push("/shop/goods/real_edit")},ge=n=>{U.push(n.goods_edit_path+"?goods_id="+n.goods_id)},W=b(null),fe=n=>{W.value.show(n)},X=b(null),he=n=>{X.value.show(n)},Y=b(null),be=n=>{Y.value.show(n)},ve=n=>{B.confirm(o("goodsCopyTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{_.value||(_.value=!0,Me({goods_id:n.goods_id}).then(e=>{e.code==1&&c(),_.value=!1}).catch(e=>{_.value=!1}))})},ye=n=>{B.confirm(o("goodsDeleteTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{_.value||(_.value=!0,le({goods_ids:n}).then(()=>{c(),_.value=!1}).catch(()=>{_.value=!1}))})},Pe=n=>{n&&(n.resetFields(),c())};return(n,e)=>{const i=qe,y=He,f=we,G=Je,z=Ke,I=Qe,ke=Se,Z=We,L=Xe,xe=Ye,ee=Ze,h=et,Ce=at,te=rt("EditPen"),ae=ot,Ee=tt,Ve=lt,Te=st;return u(),k("div",mt,[l(Z,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[d("div",ct,[d("span",ut,p(t(re)),1),l(i,{type:"primary",onClick:_e},{default:r(()=>[m(p(t(o)("addGoods")),1)]),_:1})]),l(Z,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[l(ke,{inline:!0,model:t(s).searchParam,ref_key:"searchFormRef",ref:M},{default:r(()=>[l(f,{label:t(o)("goodsName"),prop:"goods_name"},{default:r(()=>[l(y,{modelValue:t(s).searchParam.goods_name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(s).searchParam.goods_name=a),placeholder:t(o)("goodsNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(f,{label:t(o)("goodsCategory"),prop:"goods_category"},{default:r(()=>[l(G,{props:ie,modelValue:t(s).searchParam.goods_category,"onUpdate:modelValue":e[1]||(e[1]=a=>t(s).searchParam.goods_category=a),options:O,placeholder:t(o)("goodsCategoryPlaceholder"),clearable:"",filterable:"",onChange:n.categoryHandleChange},null,8,["modelValue","options","placeholder","onChange"])]),_:1},8,["label"]),l(f,{label:t(o)("goodsType"),prop:"goods_type"},{default:r(()=>[l(I,{modelValue:t(s).searchParam.goods_type,"onUpdate:modelValue":e[2]||(e[2]=a=>t(s).searchParam.goods_type=a),placeholder:t(o)("goodsTypePlaceholder"),clearable:""},{default:r(()=>[(u(!0),k(D,null,R(A,a=>(u(),x(z,{key:a.type,label:a.name,value:a.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(f,{label:t(o)("brand"),prop:"brand_id"},{default:r(()=>[l(I,{modelValue:t(s).searchParam.brand_id,"onUpdate:modelValue":e[3]||(e[3]=a=>t(s).searchParam.brand_id=a),placeholder:t(o)("brandPlaceholder"),clearable:""},{default:r(()=>[(u(!0),k(D,null,R(j,a=>(u(),x(z,{key:a.brand_id,label:a.brand_name,value:a.brand_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(f,{label:t(o)("labelIds"),prop:"label_ids"},{default:r(()=>[l(I,{modelValue:t(s).searchParam.label_ids,"onUpdate:modelValue":e[4]||(e[4]=a=>t(s).searchParam.label_ids=a),placeholder:t(o)("labelIdsPlaceholder"),clearable:""},{default:r(()=>[(u(!0),k(D,null,R(q,a=>(u(),x(z,{key:a.label_id,label:a.label_name,value:a.label_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(f,{label:t(o)("saleNum"),prop:"sale_num"},{default:r(()=>[d("div",_t,[w(d("input",{type:"text",placeholder:t(o)("startSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":e[5]||(e[5]=a=>t(s).searchParam.start_sale_num=a)},null,8,gt),[[N,t(s).searchParam.start_sale_num]]),ft,w(d("input",{type:"text",placeholder:t(o)("endSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":e[6]||(e[6]=a=>t(s).searchParam.end_sale_num=a)},null,8,ht),[[N,t(s).searchParam.end_sale_num]])])]),_:1},8,["label"]),l(f,{label:t(o)("skuPrice")},{default:r(()=>[d("div",bt,[w(d("input",{type:"text",placeholder:t(o)("startPricePlaceholder"),maxlength:"10","onUpdate:modelValue":e[7]||(e[7]=a=>t(s).searchParam.start_price=a)},null,8,vt),[[N,t(s).searchParam.start_price]]),yt,w(d("input",{type:"text",placeholder:t(o)("endPricePlaceholder"),maxlength:"10","onUpdate:modelValue":e[8]||(e[8]=a=>t(s).searchParam.end_price=a)},null,8,Pt),[[N,t(s).searchParam.end_price]])])]),_:1},8,["label"]),l(f,null,{default:r(()=>[l(i,{type:"primary",onClick:e[9]||(e[9]=a=>c())},{default:r(()=>[m(p(t(o)("search")),1)]),_:1}),l(i,{onClick:e[10]||(e[10]=a=>Pe(M.value))},{default:r(()=>[m(p(t(o)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d("div",kt,[l(xe,{modelValue:t(s).searchParam.status,"onUpdate:modelValue":e[11]||(e[11]=a=>t(s).searchParam.status=a),class:"goods-tabs",onTabClick:de},{default:r(()=>[l(L,{label:t(o)("statusOn"),name:"1"},null,8,["label"]),l(L,{label:t(o)("statusOff"),name:"0"},null,8,["label"]),l(L,{label:t(o)("statusAll"),name:""},null,8,["label"])]),_:1},8,["modelValue"]),d("div",xt,[l(ee,{modelValue:C.value,"onUpdate:modelValue":e[12]||(e[12]=a=>C.value=a),size:"large",class:"px-[14px]",onChange:H,indeterminate:V.value},null,8,["modelValue","indeterminate"]),l(i,{onClick:e[13]||(e[13]=a=>$(1)),size:"small"},{default:r(()=>[m(p(t(o)("batchOnGoods")),1)]),_:1}),l(i,{onClick:e[14]||(e[14]=a=>$(0)),size:"small"},{default:r(()=>[m(p(t(o)("batchOffGoods")),1)]),_:1}),l(i,{onClick:Q,size:"small"},{default:r(()=>[m(p(t(o)("batchDeleteGoods")),1)]),_:1})]),w((u(),x(Ee,{data:t(s).data,size:"large",ref_key:"goodsListTableRef",ref:J,onSortChange:ce,onSelectionChange:pe},{empty:r(()=>[d("span",null,p(t(s).loading?"":t(o)("emptyData")),1)]),default:r(()=>[l(h,{type:"selection",width:"55"}),l(h,{prop:"goods_id",label:t(o)("goodsInfo"),"min-width":"300"},{default:r(({row:a})=>[d("div",{class:"flex items-center cursor-pointer",onClick:g=>me(a)},[d("div",Et,[a.goods_cover_thumb_small?(u(),x(Ce,{key:0,class:"w-[70px] h-[70px]",src:t($e)(a.goods_cover_thumb_small),fit:"contain"},{error:r(()=>[Vt]),_:2},1032,["src"])):(u(),k("img",Tt))]),d("div",wt,[d("span",{title:a.goods_name,class:"multi-hidden"},p(a.goods_name),9,St),d("span",$t,p(a.goods_type_name),1)])],8,Ct)]),_:1},8,["label"]),l(h,{prop:"price",label:t(o)("skuPrice"),"min-width":"120",align:"right",sortable:"custom"},{default:r(({row:a})=>[d("div",{class:"cursor-pointer price-wrap",onClick:g=>fe(a)},[d("span",null,"￥"+p(a.goodsSku.price),1),l(ae,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[l(te)]),_:1})],8,Gt)]),_:1},8,["label"]),l(h,{prop:"stock",label:t(o)("stock"),"min-width":"120",sortable:"custom"},{default:r(({row:a})=>[d("div",{class:"cursor-pointer stock-wrap",onClick:g=>he(a)},[d("span",null,p(a.stock),1),l(ae,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[l(te)]),_:1})],8,Nt)]),_:1},8,["label"]),l(h,{prop:"sale_num",label:t(o)("saleNum"),"min-width":"100",sortable:"custom"},null,8,["label"]),l(h,{prop:"status",label:t(o)("status"),"min-width":"100"},{default:r(({row:a})=>[a.status==1?(u(),k("div",Ut,p(t(o)("statusOn")),1)):se("",!0),a.status==0?(u(),k("div",Ot,p(t(o)("statusOff")),1)):se("",!0)]),_:1},8,["label"]),l(h,{prop:"sort",label:t(o)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:a})=>[l(y,{modelValue:a.sort,"onUpdate:modelValue":g=>a.sort=g,class:"input-width-sort",maxlength:"10",onInput:g=>t(ue)(g,a)},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1},8,["label"]),l(h,{prop:"create_time",label:t(o)("createTime"),"min-width":"150",sortable:"custom"},{default:r(({row:a})=>[d("div",null,p(a.create_time),1)]),_:1},8,["label"]),l(h,{label:t(o)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:a})=>[l(i,{type:"primary",link:"",onClick:g=>ge(a)},{default:r(()=>[m(p(t(o)("edit")),1)]),_:2},1032,["onClick"]),l(i,{type:"primary",link:"",onClick:g=>be(a)},{default:r(()=>[m(p(t(o)("spreadGoods")),1)]),_:2},1032,["onClick"]),a.status==1?(u(),x(i,{key:0,type:"primary",link:"",onClick:g=>K(a,0)},{default:r(()=>[m(p(t(o)("statusActionOff")),1)]),_:2},1032,["onClick"])):(u(),x(i,{key:1,type:"primary",link:"",onClick:g=>K(a,1)},{default:r(()=>[m(p(t(o)("statusActionOn")),1)]),_:2},1032,["onClick"])),l(i,{type:"primary",link:"",onClick:g=>ve(a)},{default:r(()=>[m(p(t(o)("copyGoods")),1)]),_:2},1032,["onClick"]),l(i,{type:"primary",link:"",onClick:g=>ye(a.goods_id)},{default:r(()=>[m(p(t(o)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[Te,t(s).loading]]),d("div",zt,[d("div",It,[l(ee,{modelValue:C.value,"onUpdate:modelValue":e[15]||(e[15]=a=>C.value=a),size:"large",class:"px-[14px]",onChange:H,indeterminate:V.value},null,8,["modelValue","indeterminate"]),l(i,{onClick:e[16]||(e[16]=a=>$(1)),size:"small"},{default:r(()=>[m(p(t(o)("batchOnGoods")),1)]),_:1}),l(i,{onClick:e[17]||(e[17]=a=>$(0)),size:"small"},{default:r(()=>[m(p(t(o)("batchOffGoods")),1)]),_:1}),l(i,{onClick:Q,size:"small"},{default:r(()=>[m(p(t(o)("batchDeleteGoods")),1)]),_:1})]),l(Ve,{"current-page":t(s).page,"onUpdate:currentPage":e[18]||(e[18]=a=>t(s).page=a),"page-size":t(s).limit,"onUpdate:pageSize":e[19]||(e[19]=a=>t(s).limit=a),layout:"total, sizes, prev, pager, next, jumper",total:t(s).total,onSizeChange:e[20]||(e[20]=a=>c()),onCurrentChange:c},null,8,["current-page","page-size","total"])])])]),_:1}),l(Oe,{ref_key:"goodsStockEditPopupRef",ref:X,onLoad:c},null,512),l(ze,{ref_key:"goodsPriceEditPopupRef",ref:W,onLoad:c},null,512),l(Ie,{ref_key:"goodsSpreadPopupRef",ref:Y},null,512)])}}});const so=pt(Lt,[["__scopeId","data-v-57e306f6"]]);export{so as default};
