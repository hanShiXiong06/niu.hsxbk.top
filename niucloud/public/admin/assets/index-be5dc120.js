import{v as H,T as V,a as oe,r as D}from"./error-492b6a5b.js";import{b as O,u as q,_ as Z,w as ae,d as y,g as re,p as ie,z as le,A as ue}from"./plugin-vue_export-helper-edbdb6f8.js";import{d as h,c as f,b as m,e as k,g as L,q as _,p as S,L as G,f as B,n as g,u as a,x as K,w as X,aC as ce,r as w,o as de,m as C,h as pe,C as N,U as fe,F as me,j as R,a0 as J,R as I}from"./runtime-core.esm-bundler-7c3fd514.js";import{c as ge,d as ye}from"./index-2083be2e.js";import{a as z,i as Q,c as ve}from"./index-f02197a7.js";import{i as be,T as U,E as j,c as Ce}from"./index-868cd458.js";import{m as he}from"./index-95693143.js";import{E as Ee,b as Te}from"./focus-trap-bb1e8c7a.js";const Ne='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Se=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,ns=e=>Array.from(e.querySelectorAll(Ne)).filter(t=>xe(t)&&Se(t)),xe=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},os=function(e,t,...s){let n;t.includes("mouse")||t.includes("click")?n="MouseEvents":t.includes("key")?n="KeyboardEvent":n="HTMLEvents";const o=document.createEvent(n);return o.initEvent(t,...s),e.dispatchEvent(o),e},we=e=>!e.getAttribute("aria-owns"),as=(e,t,s)=>{const{parentNode:n}=e;if(!n)return null;const o=n.querySelectorAll(s),i=Array.prototype.indexOf.call(o,e);return o[i+t]||null},rs=e=>{e&&(e.focus(),!we(e)&&e.click())},ke=O({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),Be=["textContent"],Ie=h({name:"ElBadge"}),ze=h({...Ie,props:ke,setup(e,{expose:t}){const s=e,n=q("badge"),o=f(()=>s.isDot?"":z(s.value)&&z(s.max)?s.max<s.value?`${s.max}+`:`${s.value}`:`${s.value}`);return t({content:o}),(i,u)=>(m(),k("div",{class:g(a(n).b())},[L(i.$slots,"default"),_(V,{name:`${a(n).namespace.value}-zoom-in-center`,persisted:""},{default:S(()=>[G(B("sup",{class:g([a(n).e("content"),a(n).em("content",i.type),a(n).is("fixed",!!i.$slots.default),a(n).is("dot",i.isDot)]),textContent:K(a(o))},null,10,Be),[[H,!i.hidden&&(a(o)||i.isDot)]])]),_:1},8,["name"])],2))}});var Me=Z(ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const Oe=ae(Me),M={},Le=O({a11y:{type:Boolean,default:!0},locale:{type:y(Object)},size:re,button:{type:y(Object)},experimentalFeatures:{type:y(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:y(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),is=h({name:"ElConfigProvider",props:Le,setup(e,{slots:t}){X(()=>e.message,n=>{Object.assign(M,n??{})},{immediate:!0,deep:!0});const s=ie(e);return()=>L(t,"default",{config:s==null?void 0:s.value})}}),W=["success","info","warning","error"],l=he({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Q?document.body:void 0}),_e=O({customClass:{type:String,default:l.customClass},center:{type:Boolean,default:l.center},dangerouslyUseHTMLString:{type:Boolean,default:l.dangerouslyUseHTMLString},duration:{type:Number,default:l.duration},icon:{type:be,default:l.icon},id:{type:String,default:l.id},message:{type:y([String,Object,Function]),default:l.message},onClose:{type:y(Function),required:!1},showClose:{type:Boolean,default:l.showClose},type:{type:String,values:W,default:l.type},offset:{type:Number,default:l.offset},zIndex:{type:Number,default:l.zIndex},grouping:{type:Boolean,default:l.grouping},repeatNum:{type:Number,default:l.repeatNum}}),Ae={destroy:()=>!0},c=ce([]),$e=e=>{const t=c.findIndex(o=>o.id===e),s=c[t];let n;return t>0&&(n=c[t-1]),{current:s,prev:n}},Pe=e=>{const{prev:t}=$e(e);return t?t.vm.exposed.bottom.value:0},Fe=(e,t)=>c.findIndex(n=>n.id===e)>0?20:t,De=["id"],Re=["innerHTML"],Ue=h({name:"ElMessage"}),je=h({...Ue,props:_e,emits:Ae,setup(e,{expose:t}){const s=e,{Close:n}=Ce,o=q("message"),i=w(),u=w(!1),d=w(0);let p;const E=f(()=>s.type?s.type==="error"?"danger":s.type:"info"),A=f(()=>{const r=s.type;return{[o.bm("icon",r)]:r&&U[r]}}),b=f(()=>s.icon||U[s.type]||""),ee=f(()=>Pe(s.id)),$=f(()=>Fe(s.id,s.offset)+ee.value),se=f(()=>d.value+$.value),te=f(()=>({top:`${$.value}px`,zIndex:s.zIndex}));function x(){s.duration!==0&&({stop:p}=ve(()=>{T()},s.duration))}function P(){p==null||p()}function T(){u.value=!1}function ne({code:r}){r===Ee.esc&&T()}return de(()=>{x(),u.value=!0}),X(()=>s.repeatNum,()=>{P(),x()}),ge(document,"keydown",ne),ye(i,()=>{d.value=i.value.getBoundingClientRect().height}),t({visible:u,bottom:se,close:T}),(r,F)=>(m(),C(V,{name:a(o).b("fade"),onBeforeLeave:r.onClose,onAfterLeave:F[0]||(F[0]=Ke=>r.$emit("destroy")),persisted:""},{default:S(()=>[G(B("div",{id:r.id,ref_key:"messageRef",ref:i,class:g([a(o).b(),{[a(o).m(r.type)]:r.type&&!r.icon},a(o).is("center",r.center),a(o).is("closable",r.showClose),r.customClass]),style:pe(a(te)),role:"alert",onMouseenter:P,onMouseleave:x},[r.repeatNum>1?(m(),C(a(Oe),{key:0,value:r.repeatNum,type:a(E),class:g(a(o).e("badge"))},null,8,["value","type","class"])):N("v-if",!0),a(b)?(m(),C(a(j),{key:1,class:g([a(o).e("icon"),a(A)])},{default:S(()=>[(m(),C(fe(a(b))))]),_:1},8,["class"])):N("v-if",!0),L(r.$slots,"default",{},()=>[r.dangerouslyUseHTMLString?(m(),k(me,{key:1},[N(" Caution here, message could've been compromised, never use user's input as message "),B("p",{class:g(a(o).e("content")),innerHTML:r.message},null,10,Re)],2112)):(m(),k("p",{key:0,class:g(a(o).e("content"))},K(r.message),3))]),r.showClose?(m(),C(a(j),{key:2,class:g(a(o).e("closeBtn")),onClick:oe(T,["stop"])},{default:S(()=>[_(a(n))]),_:1},8,["class","onClick"])):N("v-if",!0)],46,De),[[H,u.value]])]),_:3},8,["name","onBeforeLeave"]))}});var He=Z(je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let Ve=1;const Y=e=>{const t=!e||R(e)||J(e)||I(e)?{message:e}:e,s={...l,...t};if(!s.appendTo)s.appendTo=document.body;else if(R(s.appendTo)){let n=document.querySelector(s.appendTo);le(n)||(n=document.body),s.appendTo=n}return s},qe=e=>{const t=c.indexOf(e);if(t===-1)return;c.splice(t,1);const{handler:s}=e;s.close()},Ze=({appendTo:e,...t},s)=>{const{nextZIndex:n}=Te(),o=`message_${Ve++}`,i=t.onClose,u=document.createElement("div"),d={...t,zIndex:n()+t.zIndex,id:o,onClose:()=>{i==null||i(),qe(b)},onDestroy:()=>{D(null,u)}},p=_(He,d,I(d.message)||J(d.message)?{default:I(d.message)?d.message:()=>d.message}:null);p.appContext=s||v._context,D(p,u),e.appendChild(u.firstElementChild);const E=p.component,b={id:o,vnode:p,vm:E,handler:{close:()=>{E.exposed.visible.value=!1}},props:p.component.props};return b},v=(e={},t)=>{if(!Q)return{close:()=>{}};if(z(M.max)&&c.length>=M.max)return{close:()=>{}};const s=Y(e);if(s.grouping&&c.length){const o=c.find(({vnode:i})=>{var u;return((u=i.props)==null?void 0:u.message)===s.message});if(o)return o.props.repeatNum+=1,o.props.type=s.type,o.handler}const n=Ze(s,t);return c.push(n),n.handler};W.forEach(e=>{v[e]=(t={},s)=>{const n=Y(t);return v({...n,type:e},s)}});function Ge(e){for(const t of c)(!e||e===t.props.type)&&t.handler.close()}v.closeAll=Ge;v._context=null;const ls=ue(v,"$message");export{is as C,Oe as E,ls as a,rs as f,as as g,we as i,ns as o,os as t};
