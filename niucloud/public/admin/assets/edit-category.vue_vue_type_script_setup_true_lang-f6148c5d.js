import"./base-962c0c23.js";/* empty css                   */import{E as I}from"./el-overlay-60700377.js";/* empty css                  *//* empty css                     */import{E as U,b as P}from"./el-radio-bfd4b1ad.js";/* empty css                        *//* empty css                 */import{t as o}from"./index-2af60c2e.js";import{e as S,a as j,b as q}from"./article-97b81e96.js";import{E as L}from"./index-93f2c618.js";import{a as M,E as O}from"./index-61c777fa.js";import{E as T}from"./index-fb71f009.js";import{E as k}from"./index-bba9e58c.js";import{v as G}from"./directive-c0c3e9a3.js";import{d as $,r as g,M as z,c as H,b as y,m as V,p as r,f as J,q as i,i as h,v as p,x as f,u as l,L as K}from"./runtime-core.esm-bundler-dc7a07d7.js";const Q={class:"dialog-footer"},ce=$({__name:"edit-category",emits:["complete"],setup(W,{expose:C,emit:x}){let c="",n=g(!1);const m=g(!0),v={category_id:"",name:"",sort:"",is_show:1},a=z({...v}),b=g(),D=H(()=>({name:[{required:!0,message:o("namePlaceholder"),trigger:"blur"},{validator:(d,e,t)=>{e.length>20&&t(new Error(o("nameMax"))),t()},trigger:"blur"}],sort:[{validator:(d,e,t)=>{(e===""||isNaN(e))&&t(new Error(o("sortNumber"))),parseInt(e)>1e4&&t(new Error(o("sortBetween"))),t()},trigger:"blur"}]})),N=async d=>{if(m.value||!d)return;let e=a.category_id?S:j;await d.validate(async t=>{t&&(m.value=!0,e(a).then(_=>{m.value=!1,n.value=!1,x("complete")}).catch(_=>{m.value=!1}))})};return C({showDialog:n,setFormData:async(d=null)=>{if(m.value=!0,Object.assign(a,v),c=o("addArticleCategory"),d){c=o("updateArticleCategory");const e=await(await q(d.category_id)).data;Object.keys(a).forEach(t=>{e[t]!=null&&(a[t]=e[t])})}m.value=!1}}),(d,e)=>{const t=L,u=M,_=T,w=U,R=P,A=O,E=k,B=I,F=G;return y(),V(B,{modelValue:l(n),"onUpdate:modelValue":e[5]||(e[5]=s=>h(n)?n.value=s:n=s),title:l(c),width:"500px","destroy-on-close":!0},{footer:r(()=>[J("span",Q,[i(E,{onClick:e[3]||(e[3]=s=>h(n)?n.value=!1:n=!1)},{default:r(()=>[p(f(l(o)("cancel")),1)]),_:1}),i(E,{type:"primary",loading:m.value,onClick:e[4]||(e[4]=s=>N(b.value))},{default:r(()=>[p(f(l(o)("confirm")),1)]),_:1},8,["loading"])])]),default:r(()=>[K((y(),V(A,{model:a,"label-width":"90px",ref_key:"formRef",ref:b,rules:l(D),class:"page-form"},{default:r(()=>[i(u,{label:l(o)("name"),prop:"name"},{default:r(()=>[i(t,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.name=s),clearable:"",placeholder:l(o)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:l(o)("sort"),prop:"sort"},{default:r(()=>[i(_,{modelValue:a.sort,"onUpdate:modelValue":e[1]||(e[1]=s=>a.sort=s),min:0},null,8,["modelValue"])]),_:1},8,["label"]),i(u,{label:l(o)("isShow")},{default:r(()=>[i(R,{modelValue:a.is_show,"onUpdate:modelValue":e[2]||(e[2]=s=>a.is_show=s),placeholder:l(o)("isShowPlaceholder")},{default:r(()=>[i(w,{label:1},{default:r(()=>[p(f(l(o)("show")),1)]),_:1}),i(w,{label:0},{default:r(()=>[p(f(l(o)("hidden")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,m.value]])]),_:1},8,["modelValue","title"])}}});export{ce as _};
