/* empty css             *//* empty css                   */import{E as j}from"./el-overlay-380df695.js";/* empty css                        *//* empty css                    *//* empty css               */import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./index-596de8a9.js";/* empty css                  *//* empty css                 *//* empty css                 *//* empty css                        */import{_ as T}from"./goods_default-3802d665.js";import{t as e}from"./index-6b4cbbe4.js";import{c as q}from"./common-a45d855f.js";import{p as M,q as z}from"./goods-c51e60b4.js";import{a as m}from"./index-a6ffcea0.js";import{E as F}from"./index-6701860e.js";import{E as A}from"./index-5f2625ed.js";import{E as H}from"./index-6f670765.js";import{a as J,E as K}from"./index-6191b0b4.js";import{v as Q}from"./directive-d226d53f.js";import{d as R,M as E,r as W,b as _,e as v,q as s,p as r,f as d,v as g,x as c,u as o,m as P,C as $,L as X,at as Y,au as ee}from"./runtime-core.esm-bundler-c17ab5bc.js";import{_ as te}from"./_plugin-vue_export-helper-c27b6911.js";import"./event-3e082a4a.js";import"./plugin-vue_export-helper-c018272e.js";import"./index-9ef6974e.js";import"./index-93efb1b5.js";import"./focus-trap-c0148071.js";import"./index-4b62c73a.js";import"./index-332680c2.js";import"./vue-router-9f815af7.js";import"./index-0d36ccbf.js";import"./el-main-03d12282.js";import"./index-e42600b8.js";import"./el-form-item-144bc604.js";import"./_baseClone-37ba2e68.js";import"./index-138bfa06.js";import"./index-72bf6cb5.js";import"./index-f6eed9e8.js";import"./debounce-196ce6a6.js";import"./position-0d02b322.js";import"./index-784d7581.js";import"./isEqual-ca98cf0c.js";import"./_isIterateeCall-797defa1.js";import"./index-bfecf17f.js";const oe=y=>(Y("data-v-5551dc4d"),y=y(),ee(),y),ae={class:"flex items-center mb-[10px]"},ie={class:"min-w-[70px] h-[70px] flex items-center justify-center"},le=oe(()=>d("div",{class:"image-slot"},[d("img",{class:"w-[70px] h-[70px]",src:T})],-1)),se={key:1,class:"w-[70px] h-[70px]",src:T,fit:"contain"},re={class:"ml-2"},pe=["title"],ne={class:"text-primary text-[12px]"},ce={key:0,class:"batch-operation-sku"},de={key:0},me={key:1},ue={class:"dialog-footer"},_e=R({__name:"goods-price-edit-popup",emits:["load"],setup(y,{expose:C,emit:B}){const u=E({}),k=W(!1);let p=E({loading:!0,data:[]});const i=E({field:"",value:""}),w=(a,t)=>{i.field=a,i.value=""},N=()=>{i.field="",i.value=""},U=()=>{if(i.value.length==0){m({type:"warning",message:`${e(i.field+"Placeholder")}`});return}if(!b.digit.test(i.value)){m({type:"warning",message:`${e(i.field+"Tips")}`});return}if(i.value<0){m({type:"warning",message:`${e(i.field+"NotZeroTips")}`});return}p.data.forEach(a=>{a[i.field]=i.value}),N()},I=()=>{p.loading=!0,z({goods_id:u.goods_id}).then(a=>{p.loading=!1,p.data=a.data}).catch(()=>{p.loading=!1})},S=a=>{Object.assign(u,a),I(),k.value=!0},b={digit:/^\d{0,10}(.?\d{0,2})$/},D=()=>{let a=!0;for(let t=0;t<p.data.length;t++){let n=p.data[t];if(isNaN(n.price)||!b.digit.test(n.price)){a=!1,m({type:"warning",message:`${e("priceTips")}`});break}else if(n.price<0){a=!1,m({type:"warning",message:`${e("priceNotZeroTips")}`});break}if(isNaN(n.market_price)||!b.digit.test(n.market_price)){a=!1,m({type:"warning",message:`${e("marketPriceTips")}`});break}else if(n.market_price<0){a=!1,m({type:"warning",message:`${e("marketPriceNotZeroTips")}`});break}if(isNaN(n.cost_price)||!b.digit.test(n.cost_price)){a=!1,m({type:"warning",message:`${e("costPriceTips")}`});break}else if(n.cost_price<0){a=!1,m({type:"warning",message:`${e("costPriceNotZeroTips")}`});break}}return a},L=()=>{if(D()){let a=[];p.data.forEach(t=>{a.push({sku_id:t.sku_id,price:t.price,market_price:t.market_price,cost_price:t.cost_price})}),M({goods_id:u.goods_id,sku_list:a}).then(t=>{B("load"),k.value=!1})}};return C({showDialog:k,show:S}),(a,t)=>{const n=F,x=A,f=H,V=J,Z=K,G=j,O=Q;return _(),v("div",null,[s(G,{modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=l=>k.value=l),title:o(e)("editPricePopupTitle"),width:"800px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:r(()=>[d("span",ue,[s(f,{onClick:t[4]||(t[4]=l=>k.value=!1)},{default:r(()=>[g(c(o(e)("cancel")),1)]),_:1}),s(f,{type:"primary",onClick:L},{default:r(()=>[g(c(o(e)("confirm")),1)]),_:1})])]),default:r(()=>[d("div",ae,[d("div",ie,[u.goods_cover_thumb_small?(_(),P(n,{key:0,class:"w-[70px] h-[70px]",src:o(q)(u.goods_cover_thumb_small),fit:"contain"},{error:r(()=>[le]),_:1},8,["src"])):(_(),v("img",se))]),d("div",re,[d("span",{title:u.goods_name,class:"multi-hidden"},c(u.goods_name),9,pe),d("span",ne,c(u.goods_type_name),1)])]),o(p).data.length>1?(_(),v("div",ce,[d("label",null,c(o(e)("batchOperationSku")),1),i.field?(_(),v("div",de,[s(x,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=l=>i.value=l),clearable:"",placeholder:o(e)(i.field),class:"set-input",maxlength:"20",autofocus:!0},null,8,["modelValue","placeholder"]),s(f,{type:"primary",onClick:U},{default:r(()=>[g(c(o(e)("confirm")),1)]),_:1}),s(f,{onClick:N},{default:r(()=>[g(c(o(e)("cancel")),1)]),_:1})])):(_(),v("div",me,[s(f,{type:"primary",link:"",onClick:t[1]||(t[1]=l=>w("price"))},{default:r(()=>[g(c(o(e)("price")),1)]),_:1}),s(f,{type:"primary",link:"",onClick:t[2]||(t[2]=l=>w("marketPrice"))},{default:r(()=>[g(c(o(e)("marketPrice")),1)]),_:1}),s(f,{type:"primary",link:"",onClick:t[3]||(t[3]=l=>w("costPrice"))},{default:r(()=>[g(c(o(e)("costPrice")),1)]),_:1})]))])):$("",!0),X((_(),P(Z,{data:o(p).data,size:"large","max-height":"400"},{empty:r(()=>[d("span",null,c(o(p).loading?"":o(e)("emptyData")),1)]),default:r(()=>[o(p).data.length>1?(_(),P(V,{key:0,prop:"sku_name",label:o(e)("skuName"),"min-width":"120"},null,8,["label"])):$("",!0),s(V,{prop:"price",label:o(e)("price"),"min-width":"120"},{default:r(({row:l})=>[s(x,{modelValue:l.price,"onUpdate:modelValue":h=>l.price=h,clearable:"",placeholder:"0.00",maxlength:"10",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),s(V,{prop:"market_price",label:o(e)("marketPrice"),"min-width":"120"},{default:r(({row:l})=>[s(x,{modelValue:l.market_price,"onUpdate:modelValue":h=>l.market_price=h,clearable:"",placeholder:"0.00",maxlength:"10",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),s(V,{prop:"cost_price",label:o(e)("costPrice"),"min-width":"120"},{default:r(({row:l})=>[s(x,{modelValue:l.cost_price,"onUpdate:modelValue":h=>l.cost_price=h,clearable:"",placeholder:"0.00",maxlength:"10",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"])]),_:1},8,["data"])),[[O,o(p).loading]])]),_:1},8,["modelValue","title"])])}}});const pt=te(_e,[["__scopeId","data-v-5551dc4d"]]);export{pt as default};
