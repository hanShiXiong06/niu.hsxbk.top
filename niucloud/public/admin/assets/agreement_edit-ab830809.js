import"./base-0e92f4db.js";/* empty css                   *//* empty css                  *//* empty css                */import{a as R,E as N}from"./el-form-item-c2dd2ffe.js";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang-786a3bdc.js";/* empty css                 */import{u as $,t as s}from"./index-8f29cb04.js";import{a5 as j,a6 as q}from"./index-9033603c.js";import{u as A,a as I}from"./vue-router-8b032575.js";import{E as S}from"./index-8cefa3ab.js";import{E as U}from"./index-2668a8ea.js";import{E as L}from"./index-e09a20f5.js";import{v as O}from"./directive-c6f70b8e.js";import{d as T,r as y,M as z,c as M,b as k,e as G,f as m,u as o,x as c,L as H,m as J,p as l,q as r,v as x}from"./runtime-core.esm-bundler-67034826.js";import"./index-72686045.js";import"./event-a537c4cb.js";import"./index.vue_vue_type_style_index_0_lang-89cfc1da.js";import"./el-overlay-3eff2fc5.js";import"./index-defed8ff.js";import"./focus-trap-83769a43.js";import"./index-6cae7119.js";import"./index-d87ae4a2.js";import"./attachment-09cc7be6.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                  *//* empty css                      *//* empty css                    *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                    *//* empty css                   */import"./index-e9d9b1a1.js";import"./index-156f2c07.js";import"./index-ef31373f.js";import"./common-46715e7e.js";import"./index-a31d0a55.js";import"./aria-adfa05c5.js";import"./validator-9409f909.js";import"./index-de22cd40.js";import"./index-434046cb.js";import"./index-d23c70b3.js";import"./index-2b1dc445.js";import"./index-c7745eb3.js";import"./debounce-f6ba9d12.js";import"./position-c2e84b2a.js";import"./index-0caa5b89.js";import"./index-fd563016.js";import"./isEqual-97c7f2d5.js";import"./index-95382bd9.js";import"./index-757074f4.js";import"./index-66750d66.js";import"./strings-1130dd70.js";import"./index-c6aa1547.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-81f2aa1e.js";import"./el-main-7a89c415.js";import"./index-ebd2990f.js";const K={class:"main-container"},Q={class:"detail-head"},W=m("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),X={class:"ml-[1px]"},Y=m("span",{class:"adorn"},"|",-1),Z={class:"right"},tt={class:"fixed-footer-wrap"},et={class:"fixed-footer"},ue=T({__name:"agreement_edit",setup(ot){$();const u=A(),_=I(),f=u.query.key||"",n=y(!1),V=u.meta.title,g={agreement_key:"",content:"",title:"",agreement_key_name:""},e=z({...g});n.value=!0,f&&(async(p="")=>{Object.assign(e,g);const t=await(await j(p)).data;Object.keys(e).forEach(a=>{t[a]!=null&&(e[a]=t[a])}),n.value=!1})(f);const v=y(),w=M(()=>({title:[{required:!0,message:s("titlePlaceholder"),trigger:"blur"}]})),E=async p=>{n.value||!p||await p.validate(async t=>{if(t){n.value=!0;const a=e;a.key=e.agreement_key,q(a).then(d=>{n.value=!1,b()}).catch(()=>{n.value=!1})}})},b=()=>{_.push({path:"/setting/basis/agreement"})};return(p,t)=>{const a=S,d=R,C=P,D=N,B=U,h=L,F=O;return k(),G("div",K,[m("div",Q,[m("div",{class:"left",onClick:t[0]||(t[0]=i=>o(_).push({path:"/setting/basis/agreement"}))},[W,m("span",X,c(o(s)("returnToPreviousPage")),1)]),Y,m("span",Z,c(o(V)),1)]),H((k(),J(B,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[r(D,{model:e,"label-width":"90px",ref_key:"formRef",ref:v,rules:o(w),class:"page-form"},{default:l(()=>[r(d,{label:o(s)("type")},{default:l(()=>[r(a,{modelValue:e.agreement_key_name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.agreement_key_name=i),readonly:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),r(d,{label:o(s)("title"),prop:"title"},{default:l(()=>[r(a,{modelValue:e.title,"onUpdate:modelValue":t[2]||(t[2]=i=>e.title=i),clearable:"",placeholder:o(s)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(d,{label:o(s)("content")},{default:l(()=>[r(C,{modelValue:e.content,"onUpdate:modelValue":t[3]||(t[3]=i=>e.content=i)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[F,n.value]]),m("div",tt,[m("div",et,[r(h,{type:"primary",onClick:t[4]||(t[4]=i=>E(v.value))},{default:l(()=>[x(c(o(s)("save")),1)]),_:1}),r(h,{onClick:t[5]||(t[5]=i=>b())},{default:l(()=>[x(c(o(s)("cancel")),1)]),_:1})])])])}}});export{ue as default};
