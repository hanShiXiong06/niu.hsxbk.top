import{g as S,a4 as x,r as _,j as K,m as b,n as M,F as l,E as s,q as m,L as d,u as i,K as g,a1 as C,D as k}from"./base-45eb5090.js";/* empty css                   */import{E as W}from"./el-overlay-616d6124.js";/* empty css                     */import{_ as A}from"./index.vue_vue_type_style_index_0_lang-390c6ebf.js";/* empty css                 *//* empty css                *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                  */import"./index-341914e3.js";import"./el-tooltip-58212670.js";/* empty css                        *//* empty css                    *//* empty css                  */import{t}from"./index-047041cb.js";import{a as G,e as H,d as J,f as O}from"./weapp-86b87c15.js";import{u as Q,a as X}from"./vue-router-fcbaaf02.js";import{_ as Y}from"./cron-info.vue_vue_type_script_setup_true_lang-5e029996.js";import{E as Z}from"./index-0d830c44.js";import{E as ee}from"./index-25c37860.js";import{a as te,E as oe}from"./index-cbbcd330.js";import{E as ae}from"./index-e841b684.js";import{E as le}from"./index-fc3020f4.js";import{E as re}from"./index-4ce9333e.js";import{a as ie,E as ne}from"./index-c4fd4c9d.js";import{v as se}from"./directive-9f485fe5.js";import{_ as pe}from"./_plugin-vue_export-helper-c27b6911.js";import"./event-4977bef7.js";import"./index-cd1661d3.js";import"./focus-trap-318ae2e0.js";/* empty css                    */import"./storage-4159d1ed.js";import"./index-aef37b98.js";import"./index-a096e75b.js";import"./el-radio-2719e44c.js";import"./index-9670e877.js";import"./index-3be486d3.js";import"./el-avatar-bc58ad46.js";import"./common-af78c857.js";import"./common-2cf17469.js";import"./_Uint8Array-e584e472.js";import"./_initCloneObject-983ff8c8.js";import"./index-c0090d79.js";import"./isEqual-f877b6c1.js";import"./flatten-0fc8b7eb.js";import"./_isIterateeCall-104f1f93.js";import"./index-cc9a73f0.js";import"./index-201145a4.js";import"./strings-2444fdb3.js";import"./castArray-df7eff2c.js";const me={class:"main-container"},de={class:"flex justify-between items-center"},ue={class:"text-[20px]"},ce={class:"mt-[10px]"},fe={class:"mt-[16px] flex justify-end"},_e={class:"dialog-footer"},ve=S({__name:"weapp",setup(ge){const D=Q().meta.title,o=x({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{title:"",type:"",last_time:""}});_();const u=(n=1)=>{o.loading=!0,o.page=n,G({page:o.page,limit:o.limit,...o.searchParam}).then(e=>{o.loading=!1,o.data=e.data.data,o.total=e.data.total}).catch(()=>{o.loading=!1})};u(),X();const c=_(!1),a=x({...{id:0,desc:"",path:"",verison:""}}),y=_(),T=()=>{a.id=0,a.desc="",a.path="",a.verison="",c.value=!0},B=K(()=>({version:[{required:!0,message:t("versionPlaceholder"),trigger:"blur"}],path:[{required:!0,validator:P,trigger:"blur"}]})),P=(n,e,p)=>a.path==""?p(new Error(t("filePlaceholder"))):p(),v=_(!1),z=async n=>{v.value||!n||await n.validate(async e=>{if(e){v.value=!0;const p=a;(a.id>0?H:J)(p).then(E=>{v.value=!1,c.value=!1,u()}).catch(()=>{v.value=!1})}})},U=n=>{a.id=n.id,a.desc=n.desc,a.path=n.path,a.version=n.version,c.value=!0},$=n=>{Z.confirm(t("cronDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{O(n).then(()=>{u()}).catch(()=>{})})},F=_(null);return(n,e)=>{const p=ee,f=te,E=oe,R=ae,j=le,w=re,h=ie,L=A,N=ne,q=W,V=se;return b(),M("div",me,[l(j,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[m("div",de,[m("span",ue,d(i(D)),1),l(p,{type:"primary",onClick:T},{default:s(()=>[g(d(i(t)("addVersion")),1)]),_:1})]),m("div",ce,[C((b(),k(E,{data:o.data,size:"large"},{empty:s(()=>[m("span",null,d(o.loading?"":i(t)("emptyData")),1)]),default:s(()=>[l(f,{prop:"version",label:i(t)("version"),"min-width":"150"},null,8,["label"]),l(f,{prop:"create_time",label:i(t)("createTime"),"min-width":"150"},null,8,["label"]),l(f,{prop:"status_name",label:i(t)("status"),"min-width":"100"},null,8,["label"]),l(f,{label:i(t)("operation"),fixed:"right",width:"130"},{default:s(({row:r})=>[l(p,{type:"primary",link:"",onClick:I=>U(r)},{default:s(()=>[g(d(i(t)("edit")),1)]),_:2},1032,["onClick"]),l(p,{type:"danger",link:"",onClick:I=>$(r.id)},{default:s(()=>[g(d(i(t)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[V,o.loading]]),m("div",fe,[l(R,{"current-page":o.page,"onUpdate:currentPage":e[0]||(e[0]=r=>o.page=r),"page-size":o.limit,"onUpdate:pageSize":e[1]||(e[1]=r=>o.limit=r),layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:e[2]||(e[2]=r=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1}),l(Y,{ref_key:"cronDialog",ref:F,onComplete:o},null,8,["onComplete"]),l(q,{modelValue:c.value,"onUpdate:modelValue":e[7]||(e[7]=r=>c.value=r),title:i(t)("editVersion"),width:"550px","destroy-on-close":!0},{footer:s(()=>[m("span",_e,[l(p,{type:"primary",onClick:e[6]||(e[6]=r=>z(y.value))},{default:s(()=>[g(d(i(t)("confirm")),1)]),_:1})])]),default:s(()=>[C((b(),k(N,{model:a,"label-width":"110px",ref_key:"formRef",ref:y,rules:i(B),class:"page-form"},{default:s(()=>[l(h,{label:i(t)("version"),prop:"version"},{default:s(()=>[l(w,{modelValue:a.version,"onUpdate:modelValue":e[3]||(e[3]=r=>a.version=r),placeholder:i(t)("keywordsPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(h,{label:i(t)("file"),prop:"path"},{default:s(()=>[l(L,{modelValue:a.path,"onUpdate:modelValue":e[4]||(e[4]=r=>a.path=r),class:"input-width",api:"applet/upload"},null,8,["modelValue"])]),_:1},8,["label"]),l(h,{label:i(t)("desc")},{default:s(()=>[l(w,{type:"textarea",modelValue:a.desc,"onUpdate:modelValue":e[5]||(e[5]=r=>a.desc=r),class:"input-width",clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[V,n.loading]])]),_:1},8,["modelValue","title"])])}}});const ht=pe(ve,[["__scopeId","data-v-f45ebbcf"]]);export{ht as default};
