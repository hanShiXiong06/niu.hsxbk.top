/* empty css             *//* empty css                   *//* empty css                  */import"./el-overlay-f7f710bd.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css                 *//* empty css                   *//* empty css                   */import{v as K}from"./index-aae906bf.js";import{v as x}from"./error-492b6a5b.js";import{E as Y}from"./index-a3cf5375.js";import{E as L}from"./index-4862d1b3.js";import{E as ee}from"./index-2f0b1bf3.js";import{E as oe}from"./index-be5868d6.js";import{d as G,r as z,c as D,b as d,m as V,p as t,g as ne,f as _,n as A,u as a,i as M,q as n,L as y,e as C,F as N,t as O,as as te,at as le,M as ae,v as h,x as v,C as ie}from"./runtime-core.esm-bundler-7c3fd514.js";import{_ as re}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css               *//* empty css                  *//* empty css                  */import{E as ue,b as ce}from"./el-radio-c9a1047c.js";import{t as l}from"./index-5f4ce139.js";import{_ as se}from"./select-menu-item.vue_vue_type_script_setup_true_lang-a5ec1190.js";import{e as me,f as fe,h as de}from"./sys-aa893c6b.js";import{E as pe}from"./index-95693143.js";import{a as _e,E as be}from"./index-624573cc.js";import{a as ge,E as he}from"./index-9fbce820.js";import{E as ve}from"./index-24c7fcee.js";import{E as ye}from"./index-4683bff4.js";import{v as we}from"./directive-a07a10ed.js";const xe=`@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/c/font_3883393_c2tb4v0fz24.woff2?t=1681374762000) format("woff2"),url(//at.alicdn.com/t/c/font_3883393_c2tb4v0fz24.woff?t=1681374762000) format("woff"),url(//at.alicdn.com/t/c/font_3883393_c2tb4v0fz24.ttf?t=1681374762000) format("truetype")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.iconyingyongshichang:before{content:"\\e618"}.icondesktop:before{content:"\\e6e8"}.iconzhifubao:before{content:"\\e8e4"}.iconyunkongjian:before{content:"\\e666"}.iconbankuai:before{content:"\\e668"}.iconneirong2:before{content:"\\e889"}.icon24gl-userGroup:before{content:"\\eb26"}.icon14:before{content:"\\e615"}.iconjubao:before{content:"\\e611"}.iconbiaoti:before{content:"\\e643"}.iconhuiyuanzhongxin:before{content:"\\e692"}.iconfuzhukongbai1:before{content:"\\e642"}.iconjiantoushang:before{content:"\\e600"}.iconloader-line:before{content:"\\e601"}.icondelete-line:before{content:"\\e602"}.iconjiantouxia:before{content:"\\e603"}.iconcopy-line:before{content:"\\e605"}.icontuodong:before{content:"\\e884"}.iconfuzhushuxian:before{content:"\\e6f7"}.iconmofang:before{content:"\\e6c4"}.iconshoudongxuanze:before{content:"\\e6e1"}.iconyihangsange:before{content:"\\e6d5"}.iconyihangsige:before{content:"\\e6d6"}.iconyihangliangge:before{content:"\\e6e2"}.iconyihang5ge:before{content:"\\e6f3"}.icontupianguanggao1:before{content:"\\e649"}.icontuwendaohang2:before{content:"\\e65d"}.iconwenzhang:before{content:"\\e662"}.icongudingzhanshi:before{content:"\\e66e"}.icondanhanghuadong:before{content:"\\e66f"}.icontuwendaohang3:before{content:"\\e670"}.icontudaohang:before{content:"\\e671"}.iconfenyehuadong:before{content:"\\e673"}.iconwendaohang:before{content:"\\e674"}.iconzhuangxiu:before{content:"\\e627"}.icondianpuzhuangxiu:before{content:"\\e616"}.icondibudaohang:before{content:"\\e617"}.iconwangpuzhuangxiu:before{content:"\\e881"}.iconweixingongzhonghao1:before{content:"\\e705"}.iconweixingongzhonghaoguanli:before{content:"\\e609"}.iconxiaochengxu:before{content:"\\e635"}.icondenglu:before{content:"\\e604"}.iconxiaochengxushezhi:before{content:"\\e6b4"}.iconjifen:before{content:"\\e70c"}.iconguanbi:before{content:"\\e612"}.icondengluzhucemima:before{content:"\\e67f"}.iconqiehuanjiaose:before{content:"\\e60f"}.iconbanquan:before{content:"\\e632"}.iconjifen-xianxing:before{content:"\\e897"}.iconhuiyuanliebiao:before{content:"\\e62c"}.iconjiaoseyonghu:before{content:"\\e648"}.iconyonghu:before{content:"\\e65e"}.iconbanquan1:before{content:"\\e66d"}.iconweixingongzhonghao:before{content:"\\e613"}.iconweixinxiaochengxu:before{content:"\\e614"}.icon24gl-code:before{content:"\\e9ba"}.icon24gl-portraitMalePlus2:before{content:"\\eb25"}.iconyuandaima:before{content:"\\e610"}.iconjiaoseguanli:before{content:"\\e62d"}.iconjifen1:before{content:"\\e641"}.iconbanquan2:before{content:"\\e61b"}.iconjianpan:before{content:"\\e661"}.icon24gf-playCircle:before{content:"\\ea82"}.icontuichuquanping:before{content:"\\e755"}.iconfanyi:before{content:"\\e6fb"}.iconquanping:before{content:"\\eb11"}
`,Ve=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"})),ke=E=>(te("data-v-02e27a29"),E=E(),le(),E),Ee={class:"flex w-full flex-col"},ze={class:"head flex w-full mb-[10px]"},Pe=ke(()=>_("span",null,"请选择图标",-1)),je={class:"flex justify-end flex-auto"},$e={class:"icon-wrap h-[240px]"},Ie={class:"flex flex-wrap"},Ce={class:"flex flex-wrap"},Se=G({__name:"index",emits:["select"],setup(E,{emit:S}){let c=z("element"),k=z("false");const w=D(()=>Object.keys(Y)),P=D(()=>{let g=Object.assign({"/src/styles/iconfont.css":Ve})["/src/styles/iconfont.css"].default;return Array.from(g.matchAll(/(icon.*)\:before/g)).map(e=>e[1])}),p=g=>{S("select",g),k.value=!1};return(g,b)=>{const e=K,j=L,T=ee,U=oe;return d(),V(U,{trigger:"click",visible:a(k),"onUpdate:visible":b[2]||(b[2]=s=>M(k)?k.value=s:k=s)},{reference:t(()=>[ne(g.$slots,"reference",{},void 0,!0)]),default:t(()=>[_("div",Ee,[_("div",ze,[Pe,_("div",je,[_("span",{class:A(["ml-[10px] cursor-pointer",{active:a(c)=="element"}]),onClick:b[0]||(b[0]=s=>M(c)?c.value="element":c="element")},"element",2),_("span",{class:A(["ml-[10px] cursor-pointer",{active:a(c)=="iconfont"}]),onClick:b[1]||(b[1]=s=>M(c)?c.value="iconfont":c="iconfont")},"iconfont",2)])]),_("div",$e,[n(T,null,{default:t(()=>[y(_("div",Ie,[(d(!0),C(N,null,O(a(w),s=>(d(),V(j,{class:"w-[35px] h-[35px] icon-item",onClick:q=>p("element-"+s)},{default:t(()=>[n(e,{name:"element-"+s},null,8,["name"])]),_:2},1032,["onClick"]))),256))],512),[[x,a(c)=="element"]]),y(_("div",Ce,[(d(!0),C(N,null,O(a(P),s=>(d(),V(j,{class:"w-[35px] h-[35px] icon-item",onClick:q=>p("iconfont-"+s)},{default:t(()=>[n(e,{name:"iconfont-"+s},null,8,["name"])]),_:2},1032,["onClick"]))),256))],512),[[x,a(c)=="iconfont"]])]),_:1})])])]),_:3},8,["visible"])}}});const Te=re(Se,[["__scopeId","data-v-02e27a29"]]),Ue={class:"input-width"},qe={key:1,class:"w-[16px]"},Me={class:"dialog-footer"},bo=G({__name:"edit-menu",props:{menuTree:{type:Array,default:()=>[]}},emits:["complete"],setup(E,{expose:S,emit:c}){const k=E,w=z(!1),P=z("post"),p=z(!1);let g="";const b={id:0,menu_name:"",menu_type:0,parent_key:"",icon:"",api_url:"",router_path:"",view_path:"",methods:"",sort:"",status:1,is_show:1,menu_key:"",app_type:""},e=ae({...b}),j=z(),T=u=>/^([a-zA-Z_$])([a-zA-Z0-9_$])*$/.test(u),U=D(()=>({menu_name:[{required:!0,message:l("menuNamePlaceholder"),trigger:"blur"}],menu_key:[{required:!0,message:l("menuKeyPlaceholder"),trigger:"blur"},{validator:(u,o,r)=>{T(o)||r(new Error(l("menuKeyValidata"))),r()},trigger:"blur"}],router_path:[{required:e.menu_type!=2,message:l("routePathPlaceholder"),trigger:"blur"}],view_path:[{required:e.menu_type==1,message:l("viewPathPlaceholder"),trigger:"blur"}],icon:[{required:e.menu_type!=2,message:l("selectIconPlaceholder"),trigger:"blur"}],api_url:[{required:e.menu_type==2,message:l("selectIconPlaceholder"),trigger:"blur"}]})),s=u=>{e.icon="",setTimeout(()=>{e.icon=u},200)},q=async u=>{if(p.value||!u)return;const o=e.id?me:fe;await u.validate(async(r,m)=>{if(r){p.value=!0;const f=e;f.api_url=f.api_url?`${f.api_url}/${P.value}`:"",o(f).then(I=>{p.value=!1,w.value=!1,c("complete")}).catch(()=>{p.value=!1,w.value=!1})}})};return S({showDialog:w,setFormData:async(u=null)=>{if(p.value=!0,Object.assign(e,b),g=l("addMenu"),u.menu_key){g=l("updateMenu");const o=await(await de(u.menu_key)).data;Object.keys(e).forEach(r=>{o[r]!=null&&(e[r]=o[r])})}else Object.keys(e).forEach(o=>{u[o]!=null&&(e[o]=u[o])});p.value=!1}}),(u,o)=>{const r=pe,m=_e,f=ue,I=ce,$=ge,R=he,F=K,Z=Te,H=ve,J=be,B=L,Q=ye,W=we;return d(),V(Q,{modelValue:w.value,"onUpdate:modelValue":o[14]||(o[14]=i=>w.value=i),title:a(g),width:"500px","destroy-on-close":!0},{footer:t(()=>[_("span",Me,[n(B,{onClick:o[12]||(o[12]=i=>w.value=!1)},{default:t(()=>[h(v(a(l)("cancel")),1)]),_:1}),n(B,{type:"primary",loading:p.value,onClick:o[13]||(o[13]=i=>q(j.value))},{default:t(()=>[h(v(a(l)("confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[y((d(),V(J,{model:e,"label-width":"90px",class:"page-form",ref_key:"formRef",ref:j,rules:a(U)},{default:t(()=>[n(m,{label:a(l)("menuName"),prop:"menu_name"},{default:t(()=>[n(r,{modelValue:e.menu_name,"onUpdate:modelValue":o[0]||(o[0]=i=>e.menu_name=i),placeholder:a(l)("menuNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e.id?ie("",!0):(d(),V(m,{key:0,label:a(l)("menuKey"),prop:"menu_key"},{default:t(()=>[n(r,{modelValue:e.menu_key,"onUpdate:modelValue":o[1]||(o[1]=i=>e.menu_key=i),placeholder:a(l)("menuKeyPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),n(m,{label:a(l)("menuType")},{default:t(()=>[n(I,{modelValue:e.menu_type,"onUpdate:modelValue":o[2]||(o[2]=i=>e.menu_type=i)},{default:t(()=>[n(f,{label:0},{default:t(()=>[h(v(a(l)("menuTypeDir")),1)]),_:1}),n(f,{label:1},{default:t(()=>[h(v(a(l)("menuTypeMenu")),1)]),_:1}),n(f,{label:2},{default:t(()=>[h(v(a(l)("menuTypeButton")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),n(m,{label:a(l)("parentMenu"),prop:"parent_key"},{default:t(()=>[n(R,{modelValue:e.parent_key,"onUpdate:modelValue":o[3]||(o[3]=i=>e.parent_key=i),placeholder:"Select",class:"input-width"},{default:t(()=>[n($,{label:a(l)("topLevel"),value:""},null,8,["label"]),(d(!0),C(N,null,O(k.menuTree,(i,X)=>(d(),V(se,{menu:i,key:X},null,8,["menu"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),y(n(m,{label:a(l)("routePath"),prop:"router_path"},{default:t(()=>[n(r,{modelValue:e.router_path,"onUpdate:modelValue":o[4]||(o[4]=i=>e.router_path=i),placeholder:a(l)("routePathPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),[[x,e.menu_type!=2]]),y(n(m,{label:a(l)("viewPath"),prop:"view_path"},{default:t(()=>[n(r,{modelValue:e.view_path,"onUpdate:modelValue":o[5]||(o[5]=i=>e.view_path=i),placeholder:a(l)("viewPathPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),[[x,e.menu_type==1]]),y(n(m,{label:a(l)("authId"),prop:"api_url"},{default:t(()=>[n(r,{modelValue:e.api_url,"onUpdate:modelValue":o[7]||(o[7]=i=>e.api_url=i),placeholder:a(l)("authIdPlaceholder"),class:"input-width"},{append:t(()=>[n(R,{class:"w-[90px] border-none",modelValue:P.value,"onUpdate:modelValue":o[6]||(o[6]=i=>P.value=i)},{default:t(()=>[n($,{label:"POST",value:"post"}),n($,{label:"GET",value:"get"}),n($,{label:"PUT",value:"put"}),n($,{label:"DELETE",value:"delete"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),[[x,e.menu_type!=0]]),y(n(m,{label:a(l)("menuIcon"),prop:"icon"},{default:t(()=>[_("div",Ue,[n(Z,{placement:"bottom",width:"300px",onSelect:s},{reference:t(()=>[n(r,null,{prepend:t(()=>[e.icon?(d(),V(F,{key:0,name:e.icon},null,8,["name"])):(d(),C("div",qe))]),append:t(()=>[n(F,{name:"element-RefreshRight",type:"element",onClick:o[8]||(o[8]=i=>e.icon="")})]),_:1})]),_:1})])]),_:1},8,["label"]),[[x,e.menu_type!=2]]),y(n(m,{label:a(l)("status")},{default:t(()=>[n(I,{modelValue:e.status,"onUpdate:modelValue":o[9]||(o[9]=i=>e.status=i)},{default:t(()=>[n(f,{label:1},{default:t(()=>[h(v(a(l)("statusNormal")),1)]),_:1}),n(f,{label:0},{default:t(()=>[h(v(a(l)("statusDeactivate")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),[[x,e.menu_type!=2]]),y(n(m,{label:a(l)("isShow")},{default:t(()=>[n(I,{modelValue:e.is_show,"onUpdate:modelValue":o[10]||(o[10]=i=>e.is_show=i)},{default:t(()=>[n(f,{label:1},{default:t(()=>[h(v(a(l)("show")),1)]),_:1}),n(f,{label:0},{default:t(()=>[h(v(a(l)("hidden")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),[[x,e.menu_type!=2]]),n(m,{label:a(l)("sort")},{default:t(()=>[n(H,{modelValue:e.sort,"onUpdate:modelValue":o[11]||(o[11]=i=>e.sort=i),min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[W,p.value]])]),_:1},8,["modelValue","title"])}}});export{bo as _};
