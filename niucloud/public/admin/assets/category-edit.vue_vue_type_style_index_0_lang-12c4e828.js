/* empty css             *//* empty css                   */import{E as q}from"./el-overlay-380df695.js";/* empty css                  */import{a as I,E as P}from"./el-form-item-144bc604.js";/* empty css                  */import{_ as O}from"./index-2de2d5e5.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                  */import"./index-1bbcede8.js";/* empty css                  */import{t as o}from"./index-3862e13d.js";import{i as R,k as j,l as $,m as A}from"./goods-fd566118.js";import{E as M}from"./index-5f2625ed.js";import{a as T,E as z}from"./index-b7b91fcb.js";import{E as G}from"./index-1b611f36.js";import{E as H}from"./index-6f670765.js";import{v as J}from"./directive-d226d53f.js";import{d as K,r as c,M as Q,c as W,b as _,m as f,p as r,f as X,q as l,v as h,x as V,u as n,L as Y,e as Z,F as ee,t as ae}from"./runtime-core.esm-bundler-c17ab5bc.js";const te={class:"dialog-footer"},Fe=K({__name:"category-edit",emits:["complete"],setup(oe,{expose:E,emit:C}){const m=c(!1),i=c(!1),g=c(""),v={category_id:"",category_name:"",image:"",pid:0,is_show:1,child_count:0,level:1},a=Q({...v}),y=c(),x=W(()=>({category_id:[{required:!0,message:o("categoryIdPlaceholder"),trigger:"blur"}],category_name:[{required:!0,message:o("categoryNamePlaceholder"),trigger:"blur"}],pid:[{required:!0,message:o("pidPlaceholder"),trigger:"change"}]})),b=c([]),D=async s=>{if(i.value||!s)return;const e=a.category_id?R:j;await s.validate(async d=>{d&&(i.value=!0,e(a).then(p=>{i.value=!1,m.value=!1,C("complete")}).catch(p=>{i.value=!1}))})},F=()=>{A({level:1}).then(s=>{b.value=s.data.filter(e=>e.category_id!=a.category_id)})};return E({showDialog:m,setFormData:async(s=null)=>{if(Object.assign(a,v),i.value=!0,s){g.value=o("updateCategory");const e=await(await $(s.category_id)).data;e&&Object.keys(a).forEach(d=>{e[d]!=null&&(a[d]=e[d])})}else g.value=o("addCategory");F(),i.value=!1}}),(s,e)=>{const d=M,u=I,p=T,k=z,N=O,B=G,L=P,w=H,S=q,U=J;return _(),f(S,{modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=t=>m.value=t),title:g.value,width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:r(()=>[X("span",te,[l(w,{onClick:e[4]||(e[4]=t=>m.value=!1)},{default:r(()=>[h(V(n(o)("cancel")),1)]),_:1}),l(w,{type:"primary",loading:i.value,onClick:e[5]||(e[5]=t=>D(y.value))},{default:r(()=>[h(V(n(o)("confirm")),1)]),_:1},8,["loading"])])]),default:r(()=>[Y((_(),f(L,{model:a,"label-width":"120px",ref_key:"formRef",ref:y,rules:n(x),class:"page-form"},{default:r(()=>[l(u,{label:n(o)("categoryName"),prop:"category_name"},{default:r(()=>[l(d,{modelValue:a.category_name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.category_name=t),clearable:"",placeholder:n(o)("categoryNamePlaceholder"),class:"input-width",maxlength:"10","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(u,{label:n(o)("pid"),prop:"pid"},{default:r(()=>[l(k,{modelValue:a.pid,"onUpdate:modelValue":e[1]||(e[1]=t=>a.pid=t),clearable:"",disabled:!!a.child_count,placeholder:"Select",class:"input-width"},{default:r(()=>[l(p,{label:"顶级分类",value:0}),(_(!0),Z(ee,null,ae(b.value,(t,re)=>(_(),f(p,{key:t.category_id,label:t.category_name,value:t.category_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"]),l(u,{label:n(o)("image")},{default:r(()=>[l(N,{modelValue:a.image,"onUpdate:modelValue":e[2]||(e[2]=t=>a.image=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(u,{label:n(o)("isShow"),prop:"is_show"},{default:r(()=>[l(B,{modelValue:a.is_show,"onUpdate:modelValue":e[3]||(e[3]=t=>a.is_show=t),class:"input-width","active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[U,i.value]])]),_:1},8,["modelValue","title"])}}});export{Fe as _};
