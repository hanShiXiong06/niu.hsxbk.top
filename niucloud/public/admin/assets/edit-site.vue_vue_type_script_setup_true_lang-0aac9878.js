/* empty css             *//* empty css                   *//* empty css                  */import"./el-overlay-f7f710bd.js";/* empty css                  *//* empty css                     *//* empty css                       *//* empty css                 */import"./index-aae906bf.js";/* empty css                   *//* empty css               *//* empty css                  *//* empty css                  */import{t as l}from"./index-5f4ce139.js";import{j as I,k as R,m as T,n as Y}from"./site-ceac4417.js";import{E as j}from"./index-95693143.js";import{a as G,E as M}from"./index-624573cc.js";import{a as O,E as H}from"./index-9fbce820.js";import{E as A}from"./index-7175b959.js";import{E as $}from"./index-4862d1b3.js";import{E as z}from"./index-4683bff4.js";import{v as J}from"./directive-a07a10ed.js";import{d as K,r as f,M as Q,c as h,b as p,m as c,p as i,f as W,q as d,i as E,v as P,x,u as o,L as X,e as Z,F as ee,t as ae,C as w}from"./runtime-core.esm-bundler-7c3fd514.js";const le={class:"dialog-footer"},Ne=K({__name:"edit-site",emits:["complete"],setup(re,{expose:y,emit:D}){let u=f(!1);const s=f(!0);let _=f([]);const v={site_id:"",site_name:"",real_name:"",username:"",password:"",confirm_password:"",expire_time:0,group_id:""},a=Q({...v}),b=f();(async()=>{_.value=await(await I({})).data,_.value.length>0&&(a.group_id=_.value[0].group_id)})();const k=async(m=null)=>{if(s.value=!0,Object.assign(a,v),m){const e=await(await R(m.site_id)).data;Object.keys(a).forEach(t=>{e[t]!=null&&(a[t]=e[t])})}s.value=!1},N=h(()=>({site_name:[{required:!0,message:l("siteNamePlaceholder"),trigger:"blur"}],username:[{required:!0,message:l("usernamePlaceholder"),trigger:"blur"}],password:[{required:!0,message:l("passwordPlaceholder"),trigger:"blur"}],real_name:[{required:!0,message:l("userRealNamePlaceholder"),trigger:"blur"}],confirm_password:[{required:!0,message:l("confirmPasswordPlaceholder"),trigger:"blur"},{validator:(m,e,t)=>{e!=a.password?t(new Error(l("confirmPasswordError"))):t()},trigger:"blur"}]})),S=h(()=>(f(""),s.value?"":a.site_id?l("editSite"):l("addSite"))),U=async m=>{s.value||!m||await m.validate(async e=>{if(e){s.value=!0;let t=a;(t.site_id?T:Y)(t).then(g=>{s.value=!1,u.value=!1,D("complete")}).catch(g=>{s.value=!1,u.value=!1})}})};return y({showDialog:u,setFormData:k,loading:s}),(m,e)=>{const t=j,n=G,g=O,q=H,C=A,F=M,V=$,L=z,B=J;return p(),c(L,{modelValue:o(u),"onUpdate:modelValue":e[8]||(e[8]=r=>E(u)?u.value=r:u=r),title:o(S),width:"500px","destroy-on-close":!0},{footer:i(()=>[W("span",le,[d(V,{onClick:e[6]||(e[6]=r=>E(u)?u.value=!1:u=!1)},{default:i(()=>[P(x(o(l)("cancel")),1)]),_:1}),d(V,{type:"primary",loading:s.value,onClick:e[7]||(e[7]=r=>U(b.value))},{default:i(()=>[P(x(o(l)("confirm")),1)]),_:1},8,["loading"])])]),default:i(()=>[X((p(),c(F,{model:a,"label-width":"90px",ref_key:"formRef",ref:b,rules:o(N),class:"page-form"},{default:i(()=>[d(n,{label:o(l)("siteName"),prop:"site_name"},{default:i(()=>[d(t,{modelValue:a.site_name,"onUpdate:modelValue":e[0]||(e[0]=r=>a.site_name=r),clearable:"",placeholder:o(l)("siteNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(n,{label:o(l)("groupId"),prop:"group_id"},{default:i(()=>[d(q,{modelValue:a.group_id,"onUpdate:modelValue":e[1]||(e[1]=r=>a.group_id=r),clearable:"",placeholder:o(l)("groupIdPlaceholder"),class:"input-width"},{default:i(()=>[(p(!0),Z(ee,null,ae(o(_),r=>(p(),c(g,{label:r.group_name,value:r.group_id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),!a.site_id&&!s.value?(p(),c(n,{key:0,label:o(l)("username"),prop:"username"},{default:i(()=>[d(t,{modelValue:a.username,"onUpdate:modelValue":e[2]||(e[2]=r=>a.username=r),clearable:"",placeholder:o(l)("usernamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):w("",!0),!a.site_id&&!s.value?(p(),c(n,{key:1,label:o(l)("password"),prop:"password"},{default:i(()=>[d(t,{modelValue:a.password,"onUpdate:modelValue":e[3]||(e[3]=r=>a.password=r),clearable:"",placeholder:o(l)("passwordPlaceholder"),class:"input-width","show-password":!0,type:"password"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):w("",!0),!a.site_id&&!s.value?(p(),c(n,{key:2,label:o(l)("confirmPassword"),prop:"confirm_password"},{default:i(()=>[d(t,{modelValue:a.confirm_password,"onUpdate:modelValue":e[4]||(e[4]=r=>a.confirm_password=r),placeholder:o(l)("confirmPasswordPlaceholder"),type:"password","show-password":!0,clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):w("",!0),d(n,{label:o(l)("expireTime"),class:"input-width"},{default:i(()=>[d(C,{class:"flex-1 !flex",modelValue:a.expire_time,"onUpdate:modelValue":e[5]||(e[5]=r=>a.expire_time=r),clearable:"",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:o(l)("expireTimePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[B,s.value]])]),_:1},8,["modelValue","title"])}}});export{Ne as _};
