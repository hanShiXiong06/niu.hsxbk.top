import{g as R,r as y,a4 as S,j,m as k,n as P,q as n,u as o,L as d,a1 as T,D as $,E as m,F as r,K as x}from"./base-d2ce4248.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                     */import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-3a8a7453.js";/* empty css                 */import{u as A,t as i}from"./index-578c83eb.js";import{N as I,a7 as U,a8 as L}from"./index-057b5f2c.js";import{u as O,a as z}from"./vue-router-d3dc2686.js";import{E as K}from"./index-9997ff5d.js";import{a as G,E as H}from"./index-f579a83b.js";import{E as J}from"./index-32160c2f.js";import{E as M}from"./index-953c712f.js";import{v as Q}from"./directive-3f066692.js";import"./index.vue_vue_type_style_index_0_lang-f7de127f.js";import"./el-overlay-7451f13b.js";import"./event-f83e96f5.js";import"./index-28969730.js";import"./focus-trap-b41dd321.js";import"./attachment-84ee7a05.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  */import"./el-tooltip-58212670.js";/* empty css                      *//* empty css                    *//* empty css                 *//* empty css                    *//* empty css                   */import"./index-3118dac6.js";import"./index-3ff0840c.js";import"./index-758a5fe7.js";import"./storage-e62e496d.js";import"./index-faa3f8c5.js";import"./index-92c8bc76.js";import"./index-5e746953.js";import"./index-3ae544fb.js";import"./index-e41f0205.js";import"./index-13c7facf.js";import"./isEqual-51ec1a47.js";import"./_Uint8Array-6ca580e8.js";import"./flatten-2fc24abf.js";import"./index-aaab07eb.js";import"./index-83fe4dc1.js";import"./index-0ba64799.js";import"./strings-986fee93.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./common-dd6d00bb.js";import"./common-2cf17469.js";import"./el-radio-b620ac73.js";import"./el-avatar-4397f45a.js";import"./_initCloneObject-5fe9c070.js";const W={class:"main-container"},X={class:"detail-head"},Y=n("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),Z={class:"ml-[1px]"},tt=n("span",{class:"adorn"},"|",-1),et={class:"right"},ot={class:"fixed-footer-wrap"},at={class:"fixed-footer"},ie=R({__name:"agreement_edit",setup(rt){A();const u=O(),_=z(),f=u.query.key||"",l=y(!1),V=I(),E=u.meta.title,g={agreement_key:"",content:"",title:"",agreement_key_name:""},e=S({...g});l.value=!0,f&&(async(p="")=>{Object.assign(e,g);const t=await(await U(p)).data;Object.keys(e).forEach(a=>{t[a]!=null&&(e[a]=t[a])}),l.value=!1})(f);const v=y(),w=j(()=>({title:[{required:!0,message:i("titlePlaceholder"),trigger:"blur"}]})),D=async p=>{l.value||!p||await p.validate(async t=>{if(t){l.value=!0;const a=e;a.key=e.agreement_key,L(a).then(c=>{l.value=!1,b()}).catch(()=>{l.value=!1})}})},b=()=>{V.removeTab(u.path),_.push({path:"/setting/agreement"})};return(p,t)=>{const a=K,c=G,C=q,F=H,B=J,h=M,N=Q;return k(),P("div",W,[n("div",X,[n("div",{class:"left",onClick:t[0]||(t[0]=s=>o(_).push({path:"/setting/agreement"}))},[Y,n("span",Z,d(o(i)("returnToPreviousPage")),1)]),tt,n("span",et,d(o(E)),1)]),T((k(),$(B,{class:"box-card !border-none",shadow:"never"},{default:m(()=>[r(F,{model:e,"label-width":"90px",ref_key:"formRef",ref:v,rules:o(w),class:"page-form"},{default:m(()=>[r(c,{label:o(i)("type")},{default:m(()=>[r(a,{modelValue:e.agreement_key_name,"onUpdate:modelValue":t[1]||(t[1]=s=>e.agreement_key_name=s),readonly:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),r(c,{label:o(i)("title"),prop:"title"},{default:m(()=>[r(a,{modelValue:e.title,"onUpdate:modelValue":t[2]||(t[2]=s=>e.title=s),clearable:"",placeholder:o(i)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(c,{label:o(i)("content")},{default:m(()=>[r(C,{modelValue:e.content,"onUpdate:modelValue":t[3]||(t[3]=s=>e.content=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[N,l.value]]),n("div",ot,[n("div",at,[r(h,{type:"primary",onClick:t[4]||(t[4]=s=>D(v.value))},{default:m(()=>[x(d(o(i)("save")),1)]),_:1}),r(h,{onClick:t[5]||(t[5]=s=>b())},{default:m(()=>[x(d(o(i)("cancel")),1)]),_:1})])])])}}});export{ie as default};
