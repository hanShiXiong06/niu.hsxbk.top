import{C as me,U as C,v as L}from"./event-3e082a4a.js";import{b as pe,d as I,au as V,m as $,av as he,A as be,a as R,ab as ye,J as Ve,v as we,a7 as xe,E as W,a4 as q}from"./index-9ef6974e.js";import{m as U}from"./index-5f2625ed.js";import{u as Ce,_ as _e,w as ge}from"./plugin-vue_export-helper-c018272e.js";import{d as ae,D as G,r as S,c as u,B as E,k as J,ar as T,j as X,w as Ie,b as c,e as h,F as Q,t as Se,n as b,u as o,q as Ee,p as Y,L as Z,m as w,P as D,C as N,h as ee,x as Te}from"./runtime-core.esm-bundler-c17ab5bc.js";import{E as x}from"./index-4b62c73a.js";const De=pe({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:I([Array,Object]),default:()=>U(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:I([Array,Object]),default:()=>[V,V,V]},voidIcon:{type:$,default:()=>he},disabledVoidIcon:{type:$,default:()=>V},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:I(Array),default:()=>U(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:be,label:{type:String,default:void 0},clearable:{type:Boolean,default:!1}}),Ne={[me]:v=>R(v),[C]:v=>R(v)},ke=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],Be=["onMousemove","onClick"],He=ae({name:"ElRate"}),Me=ae({...He,props:De,emits:Ne,setup(v,{expose:le,emit:m}){const e=v;function _(a,l){const t=n=>J(n),i=Object.keys(l).map(n=>+n).filter(n=>{const y=l[n];return(t(y)?y.excluded:!1)?a<n:a<=n}).sort((n,y)=>n-y),p=l[i[0]];return t(p)&&p.value||p}const k=G(ye,void 0),B=G(Ve,void 0),oe=we(),r=Ce("rate"),{inputId:te,isLabeledByFormItem:H}=xe(e,{formItemContext:B}),s=S(e.modelValue),g=S(-1),f=S(!0),se=u(()=>[r.b(),r.m(oe.value)]),d=u(()=>e.disabled||(k==null?void 0:k.disabled)),re=u(()=>r.cssVarBlock({"void-color":e.voidColor,"disabled-void-color":e.disabledVoidColor,"fill-color":P.value})),M=u(()=>{let a="";return e.showScore?a=e.scoreTemplate.replace(/\{\s*value\s*\}/,d.value?`${e.modelValue}`:`${s.value}`):e.showText&&(a=e.texts[Math.ceil(s.value)-1]),a}),A=u(()=>e.modelValue*100-Math.floor(e.modelValue)*100),ne=u(()=>E(e.colors)?{[e.lowThreshold]:e.colors[0],[e.highThreshold]:{value:e.colors[1],excluded:!0},[e.max]:e.colors[2]}:e.colors),P=u(()=>{const a=_(s.value,ne.value);return J(a)?"":a}),ue=u(()=>{let a="";return d.value?a=`${A.value}%`:e.allowHalf&&(a="50%"),{color:P.value,width:a}}),j=u(()=>{let a=E(e.icons)?[...e.icons]:{...e.icons};return a=T(a),E(a)?{[e.lowThreshold]:a[0],[e.highThreshold]:{value:a[1],excluded:!0},[e.max]:a[2]}:a}),ie=u(()=>_(e.modelValue,j.value)),de=u(()=>d.value?X(e.disabledVoidIcon)?e.disabledVoidIcon:T(e.disabledVoidIcon):X(e.voidIcon)?e.voidIcon:T(e.voidIcon)),ce=u(()=>_(s.value,j.value));function O(a){const l=d.value&&A.value>0&&a-1<e.modelValue&&a>e.modelValue,t=e.allowHalf&&f.value&&a-.5<=s.value&&a>s.value;return l||t}function z(a){e.clearable&&a===e.modelValue&&(a=0),m(C,a),e.modelValue!==a&&m("change",a)}function fe(a){d.value||(e.allowHalf&&f.value?z(s.value):z(a))}function ve(a){if(d.value)return;let l=s.value;const t=a.code;return t===x.up||t===x.right?(e.allowHalf?l+=.5:l+=1,a.stopPropagation(),a.preventDefault()):(t===x.left||t===x.down)&&(e.allowHalf?l-=.5:l-=1,a.stopPropagation(),a.preventDefault()),l=l<0?0:l,l=l>e.max?e.max:l,m(C,l),m("change",l),l}function F(a,l){if(!d.value){if(e.allowHalf&&l){let t=l.target;q(t,r.e("item"))&&(t=t.querySelector(`.${r.e("icon")}`)),(t.clientWidth===0||q(t,r.e("decimal")))&&(t=t.parentNode),f.value=l.offsetX*2<=t.clientWidth,s.value=f.value?a-.5:a}else s.value=a;g.value=a}}function K(){d.value||(e.allowHalf&&(f.value=e.modelValue!==Math.floor(e.modelValue)),s.value=e.modelValue,g.value=-1)}return Ie(()=>e.modelValue,a=>{s.value=a,f.value=e.modelValue!==Math.floor(e.modelValue)}),e.modelValue||m(C,0),le({setCurrentValue:F,resetCurrentValue:K}),(a,l)=>{var t;return c(),h("div",{id:o(te),class:b([o(se),o(r).is("disabled",o(d))]),role:"slider","aria-label":o(H)?void 0:a.label||"rating","aria-labelledby":o(H)?(t=o(B))==null?void 0:t.labelId:void 0,"aria-valuenow":s.value,"aria-valuetext":o(M)||void 0,"aria-valuemin":"0","aria-valuemax":a.max,tabindex:"0",style:ee(o(re)),onKeydown:ve},[(c(!0),h(Q,null,Se(a.max,(i,p)=>(c(),h("span",{key:p,class:b(o(r).e("item")),onMousemove:n=>F(i,n),onMouseleave:K,onClick:n=>fe(i)},[Ee(o(W),{class:b([o(r).e("icon"),{hover:g.value===i},o(r).is("active",i<=s.value)])},{default:Y(()=>[O(i)?N("v-if",!0):(c(),h(Q,{key:0},[Z((c(),w(D(o(ce)),null,null,512)),[[L,i<=s.value]]),Z((c(),w(D(o(de)),null,null,512)),[[L,!(i<=s.value)]])],64)),O(i)?(c(),w(o(W),{key:1,style:ee(o(ue)),class:b([o(r).e("icon"),o(r).e("decimal")])},{default:Y(()=>[(c(),w(D(o(ie))))]),_:1},8,["style","class"])):N("v-if",!0)]),_:2},1032,["class"])],42,Be))),128)),a.showText||a.showScore?(c(),h("span",{key:0,class:b(o(r).e("text"))},Te(o(M)),3)):N("v-if",!0)],46,ke)}}});var Ae=_e(Me,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const $e=ge(Ae);export{$e as E};
