/* empty css             *//* empty css                   */import{E as O}from"./el-overlay-380df695.js";/* empty css                        *//* empty css                    *//* empty css               */import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./index-d5447f06.js";/* empty css                  *//* empty css                 *//* empty css                 *//* empty css                        */import{_ as S}from"./goods_default-3802d665.js";import{t}from"./index-ebefdd26.js";import{c as j}from"./common-a45d855f.js";import{r as q,q as M}from"./goods-f7db3cf5.js";import{a as _}from"./index-a6ffcea0.js";import{E as Z}from"./index-6701860e.js";import{E as z}from"./index-5f2625ed.js";import{E as A}from"./index-6f670765.js";import{a as F,E as H}from"./index-6191b0b4.js";import{v as J}from"./directive-d226d53f.js";import{d as K,M as v,r as Q,b as g,e as b,q as n,p as i,f as l,v as x,x as m,u as e,m as y,C as V,L as R,at as W,au as X}from"./runtime-core.esm-bundler-c17ab5bc.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";import"./event-3e082a4a.js";import"./plugin-vue_export-helper-c018272e.js";import"./index-9ef6974e.js";import"./index-93efb1b5.js";import"./focus-trap-c0148071.js";import"./index-4b62c73a.js";import"./index-332680c2.js";import"./vue-router-9f815af7.js";import"./index-0d36ccbf.js";import"./el-main-03d12282.js";import"./index-e42600b8.js";import"./el-form-item-144bc604.js";import"./_baseClone-37ba2e68.js";import"./index-138bfa06.js";import"./index-72bf6cb5.js";import"./index-f6eed9e8.js";import"./debounce-196ce6a6.js";import"./position-0d02b322.js";import"./index-784d7581.js";import"./isEqual-ca98cf0c.js";import"./_isIterateeCall-797defa1.js";import"./index-bfecf17f.js";const tt=f=>(W("data-v-7410ea10"),f=f(),X(),f),et={class:"flex items-center mb-[10px]"},ot={class:"min-w-[70px] h-[70px] flex items-center justify-center"},at=tt(()=>l("div",{class:"image-slot"},[l("img",{class:"w-[70px] h-[70px]",src:S})],-1)),st={key:1,class:"w-[70px] h-[70px]",src:S,fit:"contain"},lt={class:"ml-2"},it=["title"],rt={class:"text-primary text-[12px]"},nt={key:0,class:"batch-operation-sku"},pt={class:"dialog-footer"},mt=K({__name:"goods-stock-edit-popup",emits:["load"],setup(f,{expose:N,emit:T}){const r=v({}),c=Q(!1);let s=v({loading:!0,data:[]});const d=v({value:""}),C=()=>{if(d.value.length==0){_({type:"warning",message:`${t("stockPlaceholder")}`});return}if(!w.number.test(d.value)){_({type:"warning",message:`${t("stockTips")}`});return}if(d.value<0){_({type:"warning",message:`${t("stockNotZeroTips")}`});return}s.data.forEach(o=>{o.stock=d.value})},$=()=>{s.loading=!0,M({goods_id:r.goods_id}).then(o=>{s.loading=!1,s.data=o.data}).catch(()=>{s.loading=!1})},B=o=>{Object.assign(r,o),$(),c.value=!0},w={number:/^\d{0,10}$/},I=()=>{let o=!0;for(let a=0;a<s.data.length;a++){let u=s.data[a];if(u.stock.length==0){o=!1,_({type:"warning",message:`${t("stockPlaceholder")}`});break}else if(isNaN(u.stock)||!w.number.test(u.stock)){o=!1,_({type:"warning",message:`${t("stockTips")}`});break}else if(u.stock<0){o=!1,_({type:"warning",message:`${t("stockNotZeroTips")}`});break}}return o},D=()=>{if(I()){let o=[];s.data.forEach(a=>{o.push({sku_id:a.sku_id,stock:a.stock})}),q({goods_id:r.goods_id,sku_list:o}).then(a=>{T("load"),c.value=!1})}};return N({showDialog:c,show:B}),(o,a)=>{const u=Z,E=z,h=A,k=F,L=H,P=O,U=J;return g(),b("div",null,[n(P,{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=p=>c.value=p),title:e(t)("editStockPopupTitle"),width:"600px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:i(()=>[l("span",pt,[n(h,{onClick:a[1]||(a[1]=p=>c.value=!1)},{default:i(()=>[x(m(e(t)("cancel")),1)]),_:1}),n(h,{type:"primary",onClick:D},{default:i(()=>[x(m(e(t)("confirm")),1)]),_:1})])]),default:i(()=>[l("div",et,[l("div",ot,[r.goods_cover_thumb_small?(g(),y(u,{key:0,class:"w-[70px] h-[70px]",src:e(j)(r.goods_cover_thumb_small),fit:"contain"},{error:i(()=>[at]),_:1},8,["src"])):(g(),b("img",st))]),l("div",lt,[l("span",{title:r.goods_name,class:"multi-hidden"},m(r.goods_name),9,it),l("span",rt,m(r.goods_type_name),1)])]),e(s).data.length>1?(g(),b("div",nt,[l("label",null,m(e(t)("batchOperationSku")),1),n(E,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=p=>d.value=p),clearable:"",placeholder:e(t)("stock"),class:"set-input",maxlength:"20",autofocus:!0},null,8,["modelValue","placeholder"]),n(h,{type:"primary",onClick:C},{default:i(()=>[x(m(e(t)("confirm")),1)]),_:1})])):V("",!0),R((g(),y(L,{data:e(s).data,size:"large","max-height":"400"},{empty:i(()=>[l("span",null,m(e(s).loading?"":e(t)("emptyData")),1)]),default:i(()=>[e(s).data.length>1?(g(),y(k,{key:0,prop:"sku_name",label:e(t)("skuName"),"min-width":"120"},null,8,["label"])):V("",!0),n(k,{prop:"price",label:e(t)("price"),"min-width":"120"},null,8,["label"]),n(k,{prop:"stock",label:e(t)("stock"),"min-width":"120"},{default:i(({row:p})=>[n(E,{modelValue:p.stock,"onUpdate:modelValue":G=>p.stock=G,clearable:"",placeholder:"0",maxlength:"10",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"])]),_:1},8,["data"])),[[U,e(s).loading]])]),_:1},8,["modelValue","title"])])}}});const se=Y(mt,[["__scopeId","data-v-7410ea10"]]);export{se as default};
