/* empty css             *//* empty css                   */import{E as F}from"./el-overlay-380df695.js";/* empty css                  */import{a as U,E as C}from"./el-form-item-144bc604.js";import{_ as P}from"./index-76a877c2.js";/* empty css                 */import{t as l}from"./index-ebefdd26.js";import{e as I,f as R,h as j}from"./goods-f7db3cf5.js";import{E as q}from"./index-5f2625ed.js";import{E as L}from"./index-6f670765.js";import{v as O}from"./directive-d226d53f.js";import{d as $,r as p,M,c as S,b as g,m as V,p as d,f as T,q as t,v as h,x as y,u as r,L as z}from"./runtime-core.esm-bundler-c17ab5bc.js";const A={class:"dialog-footer"},ne=$({__name:"brand-edit",emits:["complete"],setup(G,{expose:w,emit:E}){const m=p(!1),s=p(!1),c=p(""),_={brand_id:"",brand_name:"",logo:"",desc:"",sort:""},a=M({..._}),v=p(),x=S(()=>({brand_name:[{required:!0,message:l("brandNamePlaceholder"),trigger:"blur"}]})),B=async i=>{if(s.value||!i)return;const e=a.brand_id?I:R;await i.validate(async n=>{n&&(s.value=!0,e(a).then(f=>{s.value=!1,m.value=!1,E("complete")}).catch(f=>{s.value=!1}))})};return w({showDialog:m,setFormData:async(i=null)=>{if(Object.assign(a,_),s.value=!0,i){const e=await(await j(i.brand_id)).data;c.value=l("updateBrand"),e&&Object.keys(a).forEach(n=>{e[n]!=null&&(a[n]=e[n])})}else c.value=l("addBrand");s.value=!1}}),(i,e)=>{const n=q,u=U,f=P,D=C,b=L,N=F,k=O;return g(),V(N,{modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=o=>m.value=o),title:c.value,width:"500px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:d(()=>[T("span",A,[t(b,{onClick:e[4]||(e[4]=o=>m.value=!1)},{default:d(()=>[h(y(r(l)("cancel")),1)]),_:1}),t(b,{type:"primary",loading:s.value,onClick:e[5]||(e[5]=o=>B(v.value))},{default:d(()=>[h(y(r(l)("confirm")),1)]),_:1},8,["loading"])])]),default:d(()=>[z((g(),V(D,{model:a,"label-width":"120px",ref_key:"formRef",ref:v,rules:r(x),class:"page-form"},{default:d(()=>[t(u,{label:r(l)("brandName"),prop:"brand_name"},{default:d(()=>[t(n,{modelValue:a.brand_name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.brand_name=o),clearable:"",placeholder:r(l)("brandNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:r(l)("logo")},{default:d(()=>[t(f,{modelValue:a.logo,"onUpdate:modelValue":e[1]||(e[1]=o=>a.logo=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:r(l)("desc")},{default:d(()=>[t(n,{modelValue:a.desc,"onUpdate:modelValue":e[2]||(e[2]=o=>a.desc=o),type:"textarea",clearable:"",placeholder:r(l)("descPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:r(l)("sort")},{default:d(()=>[t(n,{modelValue:a.sort,"onUpdate:modelValue":e[3]||(e[3]=o=>a.sort=o),clearable:"",placeholder:r(l)("sortPlaceholder"),class:"input-width",onkeyup:"this.value = this.value.replace(/[^\\d\\.]/g,'');"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[k,s.value]])]),_:1},8,["modelValue","title"])}}});export{ne as _};
