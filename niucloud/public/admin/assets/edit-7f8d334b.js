import"./base-962c0c23.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                     *//* empty css                        *//* empty css                 */import{E as T,b as j}from"./el-radio-bfd4b1ad.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-71a0b454.js";import{_ as M}from"./index-7b9b3fcb.js";/* empty css               *//* empty css                  *//* empty css                  */import{D as X}from"./index-da7837ad.js";import"./el-tooltip-58212670.js";import{u as G,t}from"./index-2af60c2e.js";import{c as z,f as H,h as J,i as K}from"./article-457144af.js";import{u as Q,a as W}from"./vue-router-79053937.js";import{a as Y}from"./index-d57cc47d.js";import{E as Z}from"./index-93f2c618.js";import{a as ee,E as te}from"./index-61c777fa.js";import{a as oe,E as le}from"./index-b933df38.js";import{E as ae}from"./index-fb71f009.js";import{E as re}from"./index-69523418.js";import{E as ie}from"./index-bba9e58c.js";import{v as se}from"./directive-c0c3e9a3.js";import{d as ne,r as g,w as me,M as pe,c as de,b as d,e as U,q as l,p as i,L as ue,m as R,u as r,F as ce,t as fe,v as u,x as c,f as S}from"./runtime-core.esm-bundler-dc7a07d7.js";import"./event-ff03ec12.js";import"./index.vue_vue_type_style_index_0_lang-c43e14dc.js";import"./el-overlay-60700377.js";import"./index-5d86eb33.js";import"./focus-trap-b8b5a003.js";import"./attachment-b63d9c31.js";/* empty css                        *//* empty css                      *//* empty css                    *//* empty css                 *//* empty css                    *//* empty css                   */import"./index-d69f0ad3.js";import"./index-8bcaafa6.js";import"./sys-662acaa6.js";import"./storage-abe718b1.js";import"./index-50a00d09.js";import"./index-7a123a20.js";import"./index-a9dd5cf5.js";import"./index-9dd69bc3.js";import"./index-9f244af6.js";import"./index-df51d91a.js";import"./isEqual-c7d5e6d9.js";import"./_Uint8Array-6ff3cafa.js";import"./flatten-d5d1dc97.js";import"./index-100b1469.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./el-avatar-3bb47ce2.js";import"./common-6291c908.js";import"./common-2cf17469.js";import"./_initCloneObject-28e6bdaa.js";import"./index-4f5c40a5.js";import"./strings-4868a118.js";import"./index-179d7e6f.js";const _e={class:"main-container"},ge={class:"fixed-footer-wrap"},be={class:"fixed-footer"},St=ne({__name:"edit",setup(he){const f=Q(),b=W(),_=parseInt(f.query.id||0),m=g(!1),h=g([]),C=X(),v=G();v.pageReturn=!0,me(f,(p,e)=>{v.pageReturn=!1});const V={id:"",category_id:"",title:"",intro:"",summary:"",image:"",author:"",content:"",visit:"",visit_virtual:"",is_show:1,sort:0},o=pe({...V});_&&(async(p=0)=>{if(m.value=!0,Object.assign(o,V),p){const e=await(await z(p)).data;if(!e||Object.keys(e).length==0)return Y.error(t("articleNull")),setTimeout(()=>{b.go(-1)},2e3),!1;Object.keys(o).forEach(s=>{e[s]!=null&&(o[s]=e[s])}),m.value=!1}else m.value=!1})(_),(async()=>{h.value=await(await H({})).data})();const y=g(),D=de(()=>({title:[{required:!0,message:t("titlePlaceholder"),trigger:"blur"}],category_id:[{required:!0,message:t("categoryIdPlaceholder"),trigger:"blur"}],content:[{required:!0,message:t("contentPlaceholder"),trigger:"blur"},{validator:(p,e,s)=>{!e.replace(/<[^<>]+>/g,"").replace(/&nbsp;/gi,"")&&e.indexOf("img")===-1?s(new Error(t("contentPlaceholder"))):s()},trigger:["blur","change"]}]})),F=async p=>{m.value||!p||await p.validate(async e=>{e&&(m.value=!0,(_?J:K)(o).then(E=>{m.value=!1,w()}).catch(()=>{m.value=!1}))})},w=()=>{C.removeTab(f.path),b.push({path:"/article/list"})};return(p,e)=>{const s=Z,n=ee,E=oe,I=le,k=M,A=$,x=T,L=j,N=ae,q=te,B=re,P=ie,O=se;return d(),U("div",_e,[l(B,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[ue((d(),R(q,{model:o,"label-width":"90px",ref_key:"formRef",ref:y,rules:r(D),class:"page-form"},{default:i(()=>[l(n,{label:r(t)("title"),prop:"title"},{default:i(()=>[l(s,{modelValue:o.title,"onUpdate:modelValue":e[0]||(e[0]=a=>o.title=a),clearable:"",placeholder:r(t)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{label:r(t)("categoryName"),prop:"category_id"},{default:i(()=>[l(I,{modelValue:o.category_id,"onUpdate:modelValue":e[1]||(e[1]=a=>o.category_id=a),clearable:"",placeholder:r(t)("categoryIdPlaceholder"),class:"input-width"},{default:i(()=>[(d(!0),U(ce,null,fe(h.value,a=>(d(),R(E,{label:a.name,value:a.category_id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{label:r(t)("intro"),prop:"intro"},{default:i(()=>[l(s,{modelValue:o.intro,"onUpdate:modelValue":e[2]||(e[2]=a=>o.intro=a),type:"textarea",rows:"4",clearable:"",placeholder:r(t)("introPlaceholder"),class:"input-width",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{label:r(t)("summary"),prop:"summary"},{default:i(()=>[l(s,{modelValue:o.summary,"onUpdate:modelValue":e[3]||(e[3]=a=>o.summary=a),type:"textarea",rows:"4",clearable:"",placeholder:r(t)("summaryPlaceholder"),class:"input-width",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{label:r(t)("image")},{default:i(()=>[l(k,{modelValue:o.image,"onUpdate:modelValue":e[4]||(e[4]=a=>o.image=a)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:r(t)("author"),prop:"author"},{default:i(()=>[l(s,{modelValue:o.author,"onUpdate:modelValue":e[5]||(e[5]=a=>o.author=a),clearable:"",placeholder:r(t)("authorPlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{label:r(t)("content"),prop:"content"},{default:i(()=>[l(A,{modelValue:o.content,"onUpdate:modelValue":e[6]||(e[6]=a=>o.content=a)},null,8,["modelValue"])]),_:1},8,["label"]),l(n,{label:r(t)("visitVirtual")},{default:i(()=>[l(s,{modelValue:o.visit_virtual,"onUpdate:modelValue":e[7]||(e[7]=a=>o.visit_virtual=a),clearable:"",placeholder:r(t)("visitVirtualPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{label:r(t)("isShow")},{default:i(()=>[l(L,{modelValue:o.is_show,"onUpdate:modelValue":e[8]||(e[8]=a=>o.is_show=a),placeholder:r(t)("isShowPlaceholder")},{default:i(()=>[l(x,{label:1},{default:i(()=>[u(c(r(t)("show")),1)]),_:1}),l(x,{label:0},{default:i(()=>[u(c(r(t)("hidden")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{label:r(t)("sort"),prop:"sort"},{default:i(()=>[l(N,{modelValue:o.sort,"onUpdate:modelValue":e[9]||(e[9]=a=>o.sort=a),min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[O,m.value]])]),_:1}),S("div",ge,[S("div",be,[l(P,{type:"primary",onClick:e[10]||(e[10]=a=>F(y.value))},{default:i(()=>[u(c(r(t)("save")),1)]),_:1}),l(P,{onClick:e[11]||(e[11]=a=>w())},{default:i(()=>[u(c(r(t)("cancel")),1)]),_:1})])])])}}});export{St as default};
