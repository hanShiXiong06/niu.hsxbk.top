/* empty css             */import{E as N}from"./el-overlay-380df695.js";/* empty css                  */import{a as h,E as B}from"./el-form-item-144bc604.js";import{_ as F}from"./index-86ce9ee4.js";/* empty css                 */import{t as i}from"./index-6b4cbbe4.js";import{s as U}from"./order-ccbb364d.js";import{E as R}from"./index-5f2625ed.js";import{E as q}from"./index-6f670765.js";import{d as $,r as v,c as L,b as P,m as S,p as t,f,q as n,v as b,x as g,u as r}from"./runtime-core.esm-bundler-c17ab5bc.js";const T={class:"dialog-footer"},X=$({__name:"invoice-dialog",emits:["complete"],setup(j,{expose:V,emit:k}){const u=v(!1),o=v({invoice_number:"",remark:"",invoice_voucher:""}),m=v(!1);let d=0;const x=async(l=null)=>{l&&(d=l.id,o.value.invoice_number=l.invoice_number,o.value.remark=l.remark,o.value.invoice_voucher=l.invoice_voucher)},y=async l=>{m.value||!l||await l.validate(async e=>{if(e){m.value=!0;const s=o.value;U(d,s).then(c=>{k("complete"),u.value=!1,m.value=!1}).catch(()=>{m.value=!1})}})},p=v(),E=L(()=>({invoice_number:[{required:!0,message:i("invoiceNumberPlaceholder"),trigger:"blur"}]}));return V({invoiceDialog:u,setInvoiceData:x}),(l,e)=>{const s=R,c=h,I=F,D=B,_=q,C=N;return P(),S(C,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=a=>u.value=a),title:r(i)("invoice"),width:"420px"},{footer:t(()=>[f("span",T,[n(_,{onClick:e[3]||(e[3]=a=>u.value=!1)},{default:t(()=>[b(g(r(i)("cancel")),1)]),_:1}),n(_,{type:"primary",loading:m.value,onClick:e[4]||(e[4]=a=>y(p.value))},{default:t(()=>[b(g(r(i)("confirm")),1)]),_:1},8,["loading"])])]),default:t(()=>[f("div",null,[n(D,{model:o.value,ref_key:"makeInvoiceFormRef",ref:p,rules:r(E),"label-width":"80px","label-position":"left"},{default:t(()=>[n(c,{label:r(i)("invoiceNumber"),prop:"invoice_number"},{default:t(()=>[n(s,{modelValue:o.value.invoice_number,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.invoice_number=a),minlength:"150"},null,8,["modelValue"])]),_:1},8,["label"]),n(c,{label:r(i)("invoiceVoucher"),prop:"invoice_voucher"},{default:t(()=>[n(I,{modelValue:o.value.invoice_voucher,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.invoice_voucher=a)},null,8,["modelValue"])]),_:1},8,["label"]),n(c,{label:r(i)("remark"),prop:"remark"},{default:t(()=>[n(s,{modelValue:o.value.remark,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.remark=a),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])}}});export{X as _};
