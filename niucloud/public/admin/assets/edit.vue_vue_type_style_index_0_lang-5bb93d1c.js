import"./base-0e92f4db.js";/* empty css                   */import{E as F}from"./el-overlay-3eff2fc5.js";/* empty css                  */import{a as q,E as B}from"./el-form-item-c2dd2ffe.js";/* empty css                 */import{t as l}from"./index-2d1c7ba3.js";import{e as C,a as R,g as U}from"./dict-402a96dd.js";import{E as I}from"./index-8cefa3ab.js";import{E as N}from"./index-e09a20f5.js";import{v as j}from"./directive-c6f70b8e.js";import{d as L,r as p,M as O,c as M,b as v,m as y,p as d,f as S,q as m,i as b,v as V,x as h,u as t,L as T}from"./runtime-core.esm-bundler-67034826.js";const $={class:"dialog-footer"},te=L({__name:"edit",emits:["complete"],setup(z,{expose:D,emit:k}){let r=p(!1);const i=p(!1),f={id:"",name:"",key:"",memo:""},a=O({...f}),_=p(),w=M(()=>({name:[{required:!0,message:l("namePlaceholder"),trigger:"blur"}],key:[{required:!0,message:l("keyPlaceholder"),trigger:"blur"}],data:[{required:!0,message:l("dataPlaceholder"),trigger:"blur"}]})),E=async n=>{if(i.value||!n)return;let e=a.id?C:R;await n.validate(async s=>{s&&(i.value=!0,e(a).then(c=>{i.value=!1,r.value=!1,k("complete")}).catch(c=>{i.value=!1}))})};return D({showDialog:r,setFormData:async(n=null)=>{if(Object.assign(a,f),i.value=!0,n){const e=await(await U(n.id)).data;e&&Object.keys(a).forEach(s=>{e[s]!=null&&(a[s]=e[s])})}i.value=!1}}),(n,e)=>{const s=I,u=q,c=B,g=N,x=F,P=j;return v(),y(x,{modelValue:t(r),"onUpdate:modelValue":e[5]||(e[5]=o=>b(r)?r.value=o:r=o),title:a.id?t(l)("updateDict"):t(l)("addDict"),width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:d(()=>[S("span",$,[m(g,{onClick:e[3]||(e[3]=o=>b(r)?r.value=!1:r=!1)},{default:d(()=>[V(h(t(l)("cancel")),1)]),_:1}),m(g,{type:"primary",loading:i.value,onClick:e[4]||(e[4]=o=>E(_.value))},{default:d(()=>[V(h(t(l)("confirm")),1)]),_:1},8,["loading"])])]),default:d(()=>[T((v(),y(c,{model:a,"label-width":"120px",ref_key:"formRef",ref:_,rules:t(w),class:"page-form"},{default:d(()=>[m(u,{label:t(l)("name"),prop:"name"},{default:d(()=>[m(s,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.name=o),clearable:"",placeholder:t(l)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(u,{label:t(l)("key"),prop:"key"},{default:d(()=>[m(s,{modelValue:a.key,"onUpdate:modelValue":e[1]||(e[1]=o=>a.key=o),clearable:"",placeholder:t(l)("keyPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(u,{label:t(l)("memo")},{default:d(()=>[m(s,{modelValue:a.memo,"onUpdate:modelValue":e[2]||(e[2]=o=>a.memo=o),type:"textarea",clearable:"",placeholder:t(l)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[P,i.value]])]),_:1},8,["modelValue","title"])}}});export{te as _};
