import{g as R,r as y,a4 as S,j,m as k,n as N,q as n,u as o,L as d,a1 as T,D as $,E as m,F as r,K as x}from"./base-45eb5090.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                     */import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-3eb86649.js";/* empty css                 */import{u as A,t as i}from"./index-3694a2b2.js";import{P as I,a9 as U,aa as L}from"./index-ad71a852.js";import{u as O,a as z}from"./vue-router-fcbaaf02.js";import{E as K}from"./index-4ce9333e.js";import{a as G,E as H}from"./index-2bfbe5a7.js";import{E as J}from"./index-fc3020f4.js";import{E as M}from"./index-25c37860.js";import{v as Q}from"./directive-9f485fe5.js";import"./index.vue_vue_type_style_index_0_lang-0436c5a5.js";import"./el-overlay-616d6124.js";import"./event-4977bef7.js";import"./index-cd1661d3.js";import"./focus-trap-318ae2e0.js";import"./attachment-95048130.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  */import"./el-tooltip-58212670.js";/* empty css                      *//* empty css                    *//* empty css                 *//* empty css                    */import"./index-aef37b98.js";import"./index-47488199.js";import"./index-9670e877.js";import"./storage-4159d1ed.js";import"./index-0d830c44.js";import"./index-3be486d3.js";import"./index-a096e75b.js";import"./index-a2f15582.js";import"./index-719dad93.js";import"./index-c0090d79.js";import"./isEqual-f877b6c1.js";import"./_Uint8Array-e584e472.js";import"./flatten-0fc8b7eb.js";import"./index-e841b684.js";import"./index-cc9a73f0.js";import"./index-201145a4.js";import"./strings-2444fdb3.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./common-af78c857.js";import"./common-2cf17469.js";import"./el-radio-2719e44c.js";import"./el-avatar-bc58ad46.js";import"./_initCloneObject-983ff8c8.js";const W={class:"main-container"},X={class:"detail-head"},Y=n("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),Z={class:"ml-[1px]"},tt=n("span",{class:"adorn"},"|",-1),et={class:"right"},ot={class:"fixed-footer-wrap"},at={class:"fixed-footer"},se=R({__name:"agreement_edit",setup(rt){A();const u=O(),_=z(),f=u.query.key||"",l=y(!1),V=I(),E=u.meta.title,g={agreement_key:"",content:"",title:"",agreement_key_name:""},e=S({...g});l.value=!0,f&&(async(p="")=>{Object.assign(e,g);const t=await(await U(p)).data;Object.keys(e).forEach(a=>{t[a]!=null&&(e[a]=t[a])}),l.value=!1})(f);const v=y(),w=j(()=>({title:[{required:!0,message:i("titlePlaceholder"),trigger:"blur"}]})),D=async p=>{l.value||!p||await p.validate(async t=>{if(t){l.value=!0;const a=e;a.key=e.agreement_key,L(a).then(c=>{l.value=!1,b()}).catch(()=>{l.value=!1})}})},b=()=>{V.removeTab(u.path),_.push({path:"/setting/agreement"})};return(p,t)=>{const a=K,c=G,C=q,F=H,B=J,h=M,P=Q;return k(),N("div",W,[n("div",X,[n("div",{class:"left",onClick:t[0]||(t[0]=s=>o(_).push({path:"/setting/agreement"}))},[Y,n("span",Z,d(o(i)("returnToPreviousPage")),1)]),tt,n("span",et,d(o(E)),1)]),T((k(),$(B,{class:"box-card !border-none",shadow:"never"},{default:m(()=>[r(F,{model:e,"label-width":"90px",ref_key:"formRef",ref:v,rules:o(w),class:"page-form"},{default:m(()=>[r(c,{label:o(i)("type")},{default:m(()=>[r(a,{modelValue:e.agreement_key_name,"onUpdate:modelValue":t[1]||(t[1]=s=>e.agreement_key_name=s),readonly:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),r(c,{label:o(i)("title"),prop:"title"},{default:m(()=>[r(a,{modelValue:e.title,"onUpdate:modelValue":t[2]||(t[2]=s=>e.title=s),clearable:"",placeholder:o(i)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(c,{label:o(i)("content")},{default:m(()=>[r(C,{modelValue:e.content,"onUpdate:modelValue":t[3]||(t[3]=s=>e.content=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[P,l.value]]),n("div",ot,[n("div",at,[r(h,{type:"primary",onClick:t[4]||(t[4]=s=>D(v.value))},{default:m(()=>[x(d(o(i)("save")),1)]),_:1}),r(h,{onClick:t[5]||(t[5]=s=>b())},{default:m(()=>[x(d(o(i)("cancel")),1)]),_:1})])])])}}});export{se as default};
