/* empty css             *//* empty css                   *//* empty css                  *//* empty css                */import{a as O,E as j}from"./el-form-item-144bc604.js";/* empty css                        *//* empty css                 *//* empty css                       *//* empty css                 */import{_ as $}from"./index.vue_vue_type_script_setup_true_lang-a034aa96.js";import{_ as T}from"./index-76a877c2.js";/* empty css               *//* empty css                  *//* empty css                  */import"./index-d5447f06.js";/* empty css                  */import{u as M,t}from"./index-ebefdd26.js";import{c as z,f as G,h as H,i as J}from"./article-72a680f9.js";import{u as K,a as Q}from"./vue-router-9f815af7.js";import{a as W}from"./index-a6ffcea0.js";import{E as X}from"./index-5f2625ed.js";import{a as Y,E as Z}from"./index-b7b91fcb.js";import{E as ee,b as te}from"./index-6ff31475.js";import{E as oe}from"./index-2f9c8f6b.js";import{E as le}from"./index-c5af06c2.js";import{E as ae}from"./index-6f670765.js";import{v as re}from"./directive-d226d53f.js";import{d as ie,r as h,M as se,c as ne,b as c,e as U,f as p,u as a,x as u,q as r,p as i,L as me,m as C,F as pe,t as de,v as _}from"./runtime-core.esm-bundler-c17ab5bc.js";import"./index-9ef6974e.js";import"./plugin-vue_export-helper-c018272e.js";import"./event-3e082a4a.js";import"./_baseClone-37ba2e68.js";import"./index.vue_vue_type_style_index_0_lang-b9e244b2.js";import"./el-overlay-380df695.js";import"./index-93efb1b5.js";import"./focus-trap-c0148071.js";import"./index-4b62c73a.js";import"./index-332680c2.js";import"./attachment-2dcaf405.js";/* empty css                        *//* empty css                      *//* empty css                    *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                    *//* empty css                   */import"./index-0ee6390f.js";import"./index-138bfa06.js";import"./common-a45d855f.js";import"./index-b74135ff.js";import"./aria-adfa05c5.js";import"./validator-f5e079db.js";import"./index-72bf6cb5.js";import"./index-4ea26b0e.js";import"./index-d6b4c236.js";import"./index-6701860e.js";import"./index-f6eed9e8.js";import"./debounce-196ce6a6.js";import"./position-0d02b322.js";import"./index-d64b2f0e.js";import"./index-784d7581.js";import"./isEqual-ca98cf0c.js";import"./index-cefc0b67.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-0d36ccbf.js";import"./el-main-03d12282.js";import"./index-e42600b8.js";import"./index-5c20ff8f.js";import"./strings-e72e60f7.js";import"./index-bfecf17f.js";import"./index-43e913f7.js";const ue={class:"main-container"},ce={class:"detail-head"},_e=p("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),fe={class:"ml-[1px]"},ge=p("span",{class:"adorn"},"|",-1),he={class:"right"},be={class:"fixed-footer-wrap"},ve={class:"fixed-footer"},Tt=ie({__name:"edit",setup(Ve){const b=K(),f=Q(),g=parseInt(b.query.id||0),m=h(!1),v=h([]);M();const k=b.meta.title,V={id:"",category_id:"",title:"",intro:"",summary:"",image:"",author:"",content:"",visit:"",visit_virtual:"",is_show:1,sort:0},o=se({...V});g&&(async(d=0)=>{if(m.value=!0,Object.assign(o,V),d){const e=await(await z(d)).data;if(!e||Object.keys(e).length==0)return W.error(t("articleNull")),setTimeout(()=>{f.go(-1)},2e3),!1;Object.keys(o).forEach(s=>{e[s]!=null&&(o[s]=e[s])}),m.value=!1}else m.value=!1})(g),(async()=>{v.value=await(await G({})).data})();const y=h(),F=ne(()=>({title:[{required:!0,message:t("titlePlaceholder"),trigger:"blur"}],category_id:[{required:!0,message:t("categoryIdPlaceholder"),trigger:"blur"}],content:[{required:!0,message:t("contentPlaceholder"),trigger:"blur"},{validator:(d,e,s)=>{!e.replace(/<[^<>]+>/g,"").replace(/&nbsp;/gi,"")&&e.indexOf("img")===-1?s(new Error(t("contentPlaceholder"))):s()},trigger:["blur","change"]}]})),I=async d=>{m.value||!d||await d.validate(async e=>{e&&(m.value=!0,(g?H:J)(o).then(x=>{m.value=!1,w()}).catch(()=>{m.value=!1}))})},w=()=>{f.push({path:"/cms/article/list"})};return(d,e)=>{const s=X,n=O,x=Y,N=Z,R=T,A=$,E=ee,D=te,L=oe,S=j,q=le,P=ae,B=re;return c(),U("div",ue,[p("div",ce,[p("div",{class:"left",onClick:e[0]||(e[0]=l=>a(f).push({path:"/cms/article/list"}))},[_e,p("span",fe,u(a(t)("returnToPreviousPage")),1)]),ge,p("span",he,u(a(k)),1)]),r(q,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[me((c(),C(S,{model:o,"label-width":"90px",ref_key:"formRef",ref:y,rules:a(F),class:"page-form"},{default:i(()=>[r(n,{label:a(t)("title"),prop:"title"},{default:i(()=>[r(s,{modelValue:o.title,"onUpdate:modelValue":e[1]||(e[1]=l=>o.title=l),clearable:"",placeholder:a(t)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("categoryName"),prop:"category_id"},{default:i(()=>[r(N,{modelValue:o.category_id,"onUpdate:modelValue":e[2]||(e[2]=l=>o.category_id=l),clearable:"",placeholder:a(t)("categoryIdPlaceholder"),class:"input-width"},{default:i(()=>[(c(!0),U(pe,null,de(v.value,l=>(c(),C(x,{label:l.name,value:l.category_id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("intro"),prop:"intro"},{default:i(()=>[r(s,{modelValue:o.intro,"onUpdate:modelValue":e[3]||(e[3]=l=>o.intro=l),type:"textarea",rows:"4",clearable:"",placeholder:a(t)("introPlaceholder"),class:"input-width",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("summary"),prop:"summary"},{default:i(()=>[r(s,{modelValue:o.summary,"onUpdate:modelValue":e[4]||(e[4]=l=>o.summary=l),type:"textarea",rows:"4",clearable:"",placeholder:a(t)("summaryPlaceholder"),class:"input-width",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("image")},{default:i(()=>[r(R,{modelValue:o.image,"onUpdate:modelValue":e[5]||(e[5]=l=>o.image=l)},null,8,["modelValue"])]),_:1},8,["label"]),r(n,{label:a(t)("author"),prop:"author"},{default:i(()=>[r(s,{modelValue:o.author,"onUpdate:modelValue":e[6]||(e[6]=l=>o.author=l),clearable:"",placeholder:a(t)("authorPlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("content"),prop:"content"},{default:i(()=>[r(A,{modelValue:o.content,"onUpdate:modelValue":e[7]||(e[7]=l=>o.content=l)},null,8,["modelValue"])]),_:1},8,["label"]),r(n,{label:a(t)("visitVirtual")},{default:i(()=>[r(s,{modelValue:o.visit_virtual,"onUpdate:modelValue":e[8]||(e[8]=l=>o.visit_virtual=l),clearable:"",placeholder:a(t)("visitVirtualPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("isShow")},{default:i(()=>[r(D,{modelValue:o.is_show,"onUpdate:modelValue":e[9]||(e[9]=l=>o.is_show=l),placeholder:a(t)("isShowPlaceholder")},{default:i(()=>[r(E,{label:1},{default:i(()=>[_(u(a(t)("show")),1)]),_:1}),r(E,{label:0},{default:i(()=>[_(u(a(t)("hidden")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:a(t)("sort"),prop:"sort"},{default:i(()=>[r(L,{modelValue:o.sort,"onUpdate:modelValue":e[10]||(e[10]=l=>o.sort=l),min:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[B,m.value]])]),_:1}),p("div",be,[p("div",ve,[r(P,{type:"primary",onClick:e[11]||(e[11]=l=>I(y.value))},{default:i(()=>[_(u(a(t)("save")),1)]),_:1}),r(P,{onClick:e[12]||(e[12]=l=>w())},{default:i(()=>[_(u(a(t)("cancel")),1)]),_:1})])])])}}});export{Tt as default};
