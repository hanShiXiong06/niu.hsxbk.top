import{g as $,a4 as z,r as C,m as w,n as L,F as o,E as r,q as u,L as m,u as e,K as p,a1 as R,D as U}from"./base-d2ce4248.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  */import"./index-057b5f2c.js";import"./el-tooltip-58212670.js";/* empty css                 *//* empty css                    *//* empty css                        *//* empty css                *//* empty css                     *//* empty css                  */import{t as a}from"./index-578c83eb.js";import{c as j,d as G,f as S}from"./tools-5bb2f0fb.js";import{d as I}from"./storage-e62e496d.js";import{_ as q}from"./add-table.vue_vue_type_script_setup_true_lang-c25999a0.js";import{u as K,a as M}from"./vue-router-d3dc2686.js";import{E as A}from"./index-faa3f8c5.js";import{E as H}from"./index-953c712f.js";import{E as J}from"./index-9997ff5d.js";import{a as O,E as Q}from"./index-f579a83b.js";import{E as W}from"./index-32160c2f.js";import{a as X,E as Y}from"./index-d4538bff.js";import{E as Z}from"./index-aaab07eb.js";import{v as ee}from"./directive-3f066692.js";import"./el-overlay-7451f13b.js";import"./event-f83e96f5.js";import"./index-28969730.js";import"./focus-trap-b41dd321.js";import"./el-radio-b620ac73.js";import"./index-758a5fe7.js";import"./index-92c8bc76.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./el-avatar-4397f45a.js";import"./index-3118dac6.js";import"./common-dd6d00bb.js";import"./common-2cf17469.js";import"./_Uint8Array-6ca580e8.js";import"./_initCloneObject-5fe9c070.js";import"./index-13c7facf.js";import"./isEqual-51ec1a47.js";import"./flatten-2fc24abf.js";import"./_isIterateeCall-9ac2a284.js";import"./index-83fe4dc1.js";import"./index-0ba64799.js";import"./strings-986fee93.js";const te={class:"main-container"},ae={class:"flex justify-between items-center"},oe={class:"text-[24px]"},le={class:"mt-[16px] flex justify-end"},at=$({__name:"index",setup(ne){const y=K().meta.title,E=M();let t=z({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{table_name:"",table_content:""}});const b=C(),x=i=>{i&&(i.resetFields(),s())},s=(i=1)=>{t.loading=!0,t.page=i,j({page:t.page,limit:t.limit,...t.searchParam}).then(l=>{t.loading=!1,t.data=l.data.data,t.total=l.data.total}).catch(()=>{t.loading=!1})};s();const _=C(null),k=()=>{_.value.setFormData(),_.value.showDialog=!0},T=i=>{A.confirm(a("codeDeleteTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{G(i).then(()=>{s()}).catch(()=>{})})},P=i=>{E.push("/tools/code/edit?id="+i.id)},D=i=>{S({id:i}).then(l=>{window.open(I(l.data.file),"_blank")}).catch(()=>{})};return(i,l)=>{const d=H,g=J,f=O,V=Q,h=W,c=X,B=Y,F=Z,N=ee;return w(),L("div",te,[o(h,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[u("div",ae,[u("span",oe,m(e(y)),1),o(d,{type:"primary",class:"w-[100px]",onClick:k},{default:r(()=>[p(m(e(a)("addCode")),1)]),_:1})]),o(h,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[o(V,{inline:!0,model:e(t).searchParam,ref_key:"searchFormRef",ref:b},{default:r(()=>[o(f,{label:e(a)("tableName"),prop:"table_name"},{default:r(()=>[o(g,{modelValue:e(t).searchParam.table_name,"onUpdate:modelValue":l[0]||(l[0]=n=>e(t).searchParam.table_name=n),placeholder:e(a)("tableNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(f,{label:e(a)("tableContent"),prop:"table_content"},{default:r(()=>[o(g,{modelValue:e(t).searchParam.table_content,"onUpdate:modelValue":l[1]||(l[1]=n=>e(t).searchParam.table_content=n),placeholder:e(a)("tableContentPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(f,null,{default:r(()=>[o(d,{type:"primary",onClick:l[2]||(l[2]=n=>s())},{default:r(()=>[p(m(e(a)("search")),1)]),_:1}),o(d,{onClick:l[3]||(l[3]=n=>x(b.value))},{default:r(()=>[p(m(e(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",null,[R((w(),U(B,{data:e(t).data,size:"large"},{empty:r(()=>[u("span",null,m(e(t).loading?"":e(a)("emptyData")),1)]),default:r(()=>[o(c,{prop:"table_name","show-overflow-tooltip":!0,label:e(a)("tableName"),"min-width":"120"},null,8,["label"]),o(c,{prop:"table_content","show-overflow-tooltip":!0,label:e(a)("tableContent"),"min-width":"120"},null,8,["label"]),o(c,{prop:"edit_type",label:e(a)("editType"),"min-width":"150",align:"center"},{default:r(({row:n})=>[p(m(n.edit_type==1?e(a)("popup"):e(a)("page")),1)]),_:1},8,["label"]),o(c,{label:e(a)("createTime"),"min-width":"180",align:"center"},{default:r(({row:n})=>[p(m(n.create_time||""),1)]),_:1},8,["label"]),o(c,{label:e(a)("operation"),fixed:"right",width:"180","show-overflow-tooltip":!0},{default:r(({row:n})=>[o(d,{type:"primary",link:"",onClick:v=>P(n)},{default:r(()=>[p(m(e(a)("edit")),1)]),_:2},1032,["onClick"]),o(d,{type:"primary",link:"",onClick:v=>D(n.id)},{default:r(()=>[p(m(e(a)("download")),1)]),_:2},1032,["onClick"]),o(d,{type:"danger",link:"",onClick:v=>T(n.id)},{default:r(()=>[p(m(e(a)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[N,e(t).loading]]),u("div",le,[o(F,{"current-page":e(t).page,"onUpdate:currentPage":l[4]||(l[4]=n=>e(t).page=n),"page-size":e(t).limit,"onUpdate:pageSize":l[5]||(l[5]=n=>e(t).limit=n),layout:"total, sizes, prev, pager, next, jumper",total:e(t).total,onSizeChange:l[6]||(l[6]=n=>s()),onCurrentChange:s},null,8,["current-page","page-size","total"])])]),o(q,{ref_key:"addCodeDialog",ref:_,onComplete:s},null,512)]),_:1})])}}});export{at as default};
