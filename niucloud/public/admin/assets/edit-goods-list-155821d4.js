/* empty css             *//* empty css                   */import{E as U}from"./el-overlay-380df695.js";/* empty css                  *//* empty css                 *//* empty css                        *//* empty css                        *//* empty css                    *//* empty css               */import{a as $,E as M}from"./el-form-item-144bc604.js";/* empty css                  *//* empty css                        *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                       *//* empty css                 */import{v as V}from"./event-3e082a4a.js";import{_ as q}from"./category_default-9a714445.js";import{g as A}from"./goods-c51e60b4.js";import{t as r}from"./index-6b4cbbe4.js";import{c as O}from"./common-a45d855f.js";import{u as H}from"./diy-20f0c6a3.js";import J from"./goods-select-popup-b39a0a0b.js";import{E as K,a as Q}from"./index-6191b0b4.js";import{E as W,b as X}from"./index-6ff31475.js";import{E as Y}from"./index-8c9fa2a9.js";import{E as Z}from"./index-6701860e.js";import{E as ee}from"./index-6f670765.js";import{v as oe}from"./directive-d226d53f.js";import{d as te,r as v,M as le,o as ae,b as c,e as re,L as S,u as e,f as t,x as n,n as k,q as s,p as a,v as u,m as x,C as w,i as T,g as ie,F as se}from"./runtime-core.esm-bundler-c17ab5bc.js";import"./index-93efb1b5.js";import"./index-9ef6974e.js";import"./plugin-vue_export-helper-c018272e.js";import"./focus-trap-c0148071.js";import"./index-4b62c73a.js";import"./index-332680c2.js";import"./_baseClone-37ba2e68.js";import"./index-596de8a9.js";import"./vue-router-9f815af7.js";import"./index-0d36ccbf.js";import"./el-main-03d12282.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-e42600b8.js";import"./index-a6ffcea0.js";import"./index-5f2625ed.js";import"./index-138bfa06.js";import"./index-72bf6cb5.js";import"./cloneDeep-028669bf.js";import"./index-b74135ff.js";import"./aria-adfa05c5.js";import"./validator-f5e079db.js";/* empty css                      *//* empty css                  *//* empty css                  *//* empty css                          */import"./goods_default-3802d665.js";import"./index-b7b91fcb.js";import"./index-5c20ff8f.js";import"./strings-e72e60f7.js";import"./isEqual-ca98cf0c.js";import"./debounce-196ce6a6.js";import"./index-bfecf17f.js";import"./index-22ce9a15.js";import"./index-784d7581.js";import"./rand-14326ce1.js";import"./arrays-e667dc24.js";import"./index-cefc0b67.js";import"./_isIterateeCall-797defa1.js";import"./index-2f9c8f6b.js";import"./index-43e913f7.js";import"./index-f6eed9e8.js";import"./position-0d02b322.js";const ne={class:"content-wrap"},me={class:"edit-attr-item-wrap"},pe={class:"mb-[10px]"},de={class:"flex items-center mb-[18px] rounded overflow-hidden"},ce={class:"edit-attr-item-wrap"},ue={class:"mb-[10px]"},_e={class:"flex items-center w-full ml-[5px]"},fe={class:"ml-[15px]"},ge={class:"flex items-center w-full"},ye={class:"text-[var(--el-color-primary)]"},xe=t("span",{class:"iconfont iconxiangyoujiantou"},null,-1),Ce={class:"order-2"},he={class:"h-[30px]"},be=t("div",{class:"image-slot"},[t("img",{class:"w-[30px] h-[30px]",src:q})],-1),ve={class:"flex items-center justify-end mt-[15px]"},Se={class:"style-wrap"},Oo=te({__name:"edit-goods-list",setup(we,{expose:D}){const l=H();l.editComponent.ignore=[];let m=v(!1);const p=le({loading:!0,data:[],searchParam:{category_name:""}});ae(()=>{R()});const _=v();let f=null;const R=()=>{p.loading=!0,A({...p.searchParam}).then(d=>{p.loading=!1,p.data=d.data,l.editComponent.source=="category"&&p.data.forEach((o,g)=>{l.editComponent.goods_category==o.category_id&&(h.value=o.category_name,f=o)})}).catch(()=>{p.loading=!1})};let C={},h=v("请选择");const B=d=>{let o="";d&&(o=d[d.length-1]),d.length>1&&_.value.clearSelection(),o&&_.value.toggleRowSelection(o,!0),f=o,C=o},N=()=>{l.editComponent.goods_category=C.category_id,h.value=C.category_name,m.value=!1},P=()=>{m.value=!0,f&&setTimeout(()=>{_.value.toggleRowSelection(f,!0)},200)};return D({}),(d,o)=>{const g=W,G=X,y=$,j=Y,z=M,b=Q,F=Z,E=ee,I=U,L=oe;return c(),re(se,null,[S(t("div",ne,[t("div",me,[t("h3",pe,n(e(r)("selectStyle")),1),t("div",de,[t("span",{class:k(["iconfont icongudingzhanshi border-[1px] border-solid border-[#eee] cursor-pointer flex-1 flex items-center justify-center py-[5px]",{"border-[var(--el-color-primary)] text-[var(--el-color-primary)]":e(l).editComponent.style=="style1"}]),onClick:o[0]||(o[0]=i=>e(l).editComponent.style="style1")},null,2),t("span",{class:k(["iconfont icontuwendaohang3 border-[1px] border-solid border-[#eee] cursor-pointer flex-1 flex items-center justify-center py-[5px]",{"border-[var(--el-color-primary)] text-[var(--el-color-primary)]":e(l).editComponent.style=="style2"}]),onClick:o[1]||(o[1]=i=>e(l).editComponent.style="style2")},null,2)])]),t("div",ce,[t("h3",ue,n(e(r)("selectSource")),1),s(z,{"label-width":"80px",class:"px-[10px]"},{default:a(()=>[s(y,{label:e(r)("goodsSelectPopupSelectGoodsButton")},{default:a(()=>[s(G,{modelValue:e(l).editComponent.source,"onUpdate:modelValue":o[2]||(o[2]=i=>e(l).editComponent.source=i),title:e(r)("goodsSelectPopupSelectGoodsButton"),class:"mb-[18px]"},{default:a(()=>[s(g,{label:"all"},{default:a(()=>[u(n(e(r)("goodsSelectPopupAllGoods")),1)]),_:1}),s(g,{label:"category"},{default:a(()=>[u(n(e(r)("selectCategory")),1)]),_:1}),s(g,{label:"custom"},{default:a(()=>[u(n(e(r)("manualSelectionSources")),1)]),_:1})]),_:1},8,["modelValue","title"])]),_:1},8,["label"]),e(l).editComponent.source=="all"?(c(),x(y,{key:0,label:e(r)("goodsNum")},{default:a(()=>[t("div",_e,[s(j,{class:"flex-1",modelValue:e(l).editComponent.num,"onUpdate:modelValue":o[3]||(o[3]=i=>e(l).editComponent.num=i),max:"20",size:"small"},null,8,["modelValue"]),t("span",fe,n(e(l).editComponent.num),1)])]),_:1},8,["label"])):w("",!0),e(l).editComponent.source=="category"?(c(),x(y,{key:1,label:e(r)("selectCategory")},{default:a(()=>[t("div",ge,[t("div",{class:"cursor-pointer ml-auto",onClick:P},[t("span",ye,n(e(h)),1),xe])])]),_:1},8,["label"])):w("",!0),e(l).editComponent.source=="custom"?(c(),x(y,{key:2,label:e(r)("customGoods")},{default:a(()=>[s(J,{ref:"goodsSelectPopupRef",modelValue:e(l).editComponent.goods_ids,"onUpdate:modelValue":o[4]||(o[4]=i=>e(l).editComponent.goods_ids=i),min:"1",max:"99"},null,8,["modelValue"])]),_:1},8,["label"])):w("",!0)]),_:1}),s(I,{modelValue:e(m),"onUpdate:modelValue":o[6]||(o[6]=i=>T(m)?m.value=i:m=i),title:e(r)("goodsCategoryTitle"),width:"1000px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{default:a(()=>[S((c(),x(e(K),{data:p.data,ref_key:"categoryTableRef",ref:_,size:"large",height:"490px",onSelectionChange:B,"row-key":"category_id","tree-props":{hasChildren:"hasChildren",children:"child_list"}},{empty:a(()=>[t("span",null,n(p.loading?"":e(r)("emptyData")),1)]),default:a(()=>[s(b,{type:"selection",width:"55"}),s(b,{label:e(r)("categoryName"),"min-width":"120"},{default:a(({row:i})=>[t("span",Ce,n(i.category_name),1)]),_:1},8,["label"]),s(b,{label:e(r)("categoryImage"),width:"170",align:"left"},{default:a(({row:i})=>[t("div",he,[s(F,{class:"w-[30px] h-[30px]",src:e(O)(i.image),fit:"contain"},{error:a(()=>[be]),_:2},1032,["src"])])]),_:1},8,["label"])]),_:1},8,["data"])),[[L,p.loading]]),t("div",ve,[s(E,{type:"primary",onClick:N},{default:a(()=>[u(n(e(r)("confirm")),1)]),_:1}),s(E,{onClick:o[5]||(o[5]=i=>T(m)?m.value=!1:m=!1)},{default:a(()=>[u(n(e(r)("cancel")),1)]),_:1})])]),_:1},8,["modelValue","title"])])],512),[[V,e(l).editTab=="content"]]),S(t("div",Se,[ie(d.$slots,"style")],512),[[V,e(l).editTab=="style"]])],64)}}});export{Oo as default};
