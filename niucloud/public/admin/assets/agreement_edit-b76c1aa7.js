import{d as F,r as h,R as P,c as A,e as k,f as N,g as s,u as o,B as c,Q as $,v as j,x as l,y as a,A as x}from"./base-d77b0726.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                */import{_ as I}from"./index.vue_vue_type_script_setup_true_lang-9c1d6fc5.js";import"./el-form-item-4ed993c7.js";/* empty css                 */import{u as O,t as m}from"./index-c7fb4804.js";import{O as S,P as U}from"./sys-cbb25fd8.js";import{u as q,b as T}from"./vue-router-57155f94.js";import{E as z}from"./index-c1eb81db.js";import{a as L,E as Q}from"./index-68c5ad54.js";import{E as G}from"./index-2cf73bf7.js";import{E as H}from"./index-91bdda63.js";import{v as J}from"./directive-08cd03ab.js";import"./index.vue_vue_type_style_index_0_lang-5e490713.js";/* empty css                   */import"./attachment-bb30873b.js";import"./index-331c6de1.js";import"./index-e37943c3.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                    *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                    *//* empty css                         *//* empty css                   */import"./index-9e51ba8b.js";import"./typescript-defaf979.js";import"./aria-60e0cdc6.js";import"./index-de9bede2.js";import"./index-6a46ef13.js";import"./index-45cca80f.js";import"./index-6245131d.js";import"./focus-trap-98fda164.js";import"./dropdown-2ff49e9b.js";import"./index.vue_vue_type_script_setup_true_lang-8d43c28e.js";/* empty css                */import"./common-56ee0a80.js";import"./index-5b262c6a.js";import"./index-b3418ddc.js";import"./event-e06a23af.js";import"./scroll-59301fd6.js";import"./vnode-5920e7a9.js";import"./aria-adfa05c5.js";import"./validator-7b087194.js";import"./index-a20d1a31.js";import"./index-6f5bf0a3.js";import"./index-74352d71.js";import"./index-6a54cf26.js";import"./index-f2dc9b9f.js";import"./index-bbf3e154.js";import"./index-c314892b.js";import"./index-435afe75.js";import"./index-3b19c3d7.js";import"./debounce-8a1738b0.js";import"./index-d1e433eb.js";import"./position-09adcf79.js";import"./index-294b617f.js";import"./index-52f984e1.js";import"./isEqual-030b54ca.js";import"./_Uint8Array-2fd72219.js";import"./index-f956e728.js";import"./index-a997ab1f.js";import"./index-45469947.js";import"./strings-6a15e170.js";import"./index-ef0eb7b1.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-a477ea57.js";import"./index-704f0685.js";import"./_initCloneObject-22d1caee.js";const K={class:"main-container"},M={class:"detail-head"},W=s("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),X={class:"ml-[1px]"},Y=s("span",{class:"adorn"},"|",-1),Z={class:"right"},tt={class:"fixed-footer-wrap"},et={class:"fixed-footer"},Fe=F({__name:"agreement_edit",setup(ot){O();const u=q(),_=T(),f=u.query.key||"",n=h(!1),V=u.meta.title,g={agreement_key:"",content:"",title:"",agreement_key_name:""},e=P({...g});n.value=!0,f&&(async(p="")=>{Object.assign(e,g);const t=await(await S(p)).data;Object.keys(e).forEach(r=>{t[r]!=null&&(e[r]=t[r])}),n.value=!1})(f);const v=h(),w=A(()=>({title:[{required:!0,message:m("titlePlaceholder"),trigger:"blur"}]})),E=async p=>{n.value||!p||await p.validate(async t=>{if(t){n.value=!0;const r=e;r.key=e.agreement_key,U(r).then(d=>{n.value=!1,b()}).catch(()=>{n.value=!1})}})},b=()=>{_.push({path:"/setting/basis/agreement"})};return(p,t)=>{const r=z,d=L,B=I,C=Q,D=G,y=H,R=J;return k(),N("div",K,[s("div",M,[s("div",{class:"left",onClick:t[0]||(t[0]=i=>o(_).push({path:"/setting/basis/agreement"}))},[W,s("span",X,c(o(m)("returnToPreviousPage")),1)]),Y,s("span",Z,c(o(V)),1)]),$((k(),j(D,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[a(C,{model:e,"label-width":"90px",ref_key:"formRef",ref:v,rules:o(w),class:"page-form"},{default:l(()=>[a(d,{label:o(m)("type")},{default:l(()=>[a(r,{modelValue:e.agreement_key_name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.agreement_key_name=i),readonly:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),a(d,{label:o(m)("title"),prop:"title"},{default:l(()=>[a(r,{modelValue:e.title,"onUpdate:modelValue":t[2]||(t[2]=i=>e.title=i),clearable:"",placeholder:o(m)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{label:o(m)("content")},{default:l(()=>[a(B,{modelValue:e.content,"onUpdate:modelValue":t[3]||(t[3]=i=>e.content=i)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[R,n.value]]),s("div",tt,[s("div",et,[a(y,{type:"primary",onClick:t[4]||(t[4]=i=>E(v.value))},{default:l(()=>[x(c(o(m)("save")),1)]),_:1}),a(y,{onClick:t[5]||(t[5]=i=>b())},{default:l(()=>[x(c(o(m)("cancel")),1)]),_:1})])])])}}});export{Fe as default};
