import{d as a,r as t,o as e,f as s,J as l,h as o,M as u,i as r,w as i,j as n,F as c,C as p,D as m,l as d,E as f,O as x,R as y,b4 as _,H as v,q as j,m as h,p as b,aq as g}from"./index-5bb08350.js";import{_ as w}from"./u-button.364aa63d.js";import{_ as T}from"./u-loading-icon.2e89024b.js";import{_ as C}from"./u-modal.64c62d33.js";import{g as F}from"./pay.4e07eed1.js";import"./u-icon.461524ba.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.0c46076e.js";import"./u-popup.7d705de0.js";import"./u-transition.021c4c1c.js";import"./u-safe-bottom.6578a4de.js";const S=a({__name:"result",setup(a){const S=t(null),k=t(!1);let q="",z=0;e((a=>{q=a.code,E()}));const E=()=>{F(q).then((a=>{if(!uni.$u.test.isEmpty(a.data)){if(1==a.data.status&&z<5)return k.value=!0,z++,void setTimeout((()=>{E()}),1e3);S.value=a.data,k.value=!1,s({title:2==S.value.status?l("pay.paySuccess"):l("pay.payFail")})}})).catch((()=>{}))},P=()=>{var a;y({url:_(),param:{code:null==(a=S.value)?void 0:a.out_trade_no},mode:"redirectTo"})};return(a,t)=>{const e=v,s=j,y=h(b("u-button"),w),_=h(b("u-loading-icon"),T),F=h(b("u-modal"),C);return o(),u(x,null,[S.value?(o(),r(s,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:i((()=>[n(s,{class:"flex-1 flex flex-col items-center w-full pt-[100rpx]"},{default:i((()=>[n(e,{class:c(["iconfont text-2xl",2==S.value.status?"text-primary iconduigou":"iconzhifushibai text-red"])},null,8,["class"]),n(s,{class:"text-sm"},{default:i((()=>[p(m(2==S.value.status?d(l)("pay.paySuccess"):d(l)("pay.payFail")),1)])),_:1}),n(s,{class:"text-xl font-bold pt-[30rpx]"},{default:i((()=>[n(e,{class:"text-base"},{default:i((()=>[p(m(d(l)("currency")),1)])),_:1}),n(e,null,{default:i((()=>[p(m(d(g)(S.value.money)),1)])),_:1})])),_:1})])),_:1}),n(s,{class:"pb-[200rpx] w-[240rpx]"},{default:i((()=>[n(y,{type:"primary",text:2==S.value.status?d(l)("complete"):d(l)("close"),plain:!0,onClick:P},null,8,["text"])])),_:1})])),_:1})):f("",!0),n(F,{show:k.value,showCancelButton:!0,confirmText:d(l)("pay.completePay"),cancelText:d(l)("pay.incompletePay"),onCancel:P},{default:i((()=>[n(s,{class:"py-[20rpx]"},{default:i((()=>[n(_,{text:d(l)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])],64)}}});export{S as default};
