import{aG as e,d as a,r,o as t,i as l,j as s,w as o,n as i,k as p,P as u,Q as d,R as n,m as c,a9 as f,aa as x,x as m,a7 as _,q as v,t as g,D as b,G as y,H as h,K as k,y as j,e as C,bl as w,I as S}from"./index-19cdd642.js";import{_ as z}from"./u-icon.608fbfc2.js";import{_ as I}from"./u--image.925f4ba8.js";import{_ as D}from"./pay.39358680.js";import{c as M,d as R,o as U,a as F}from"./order.dabff7ae.js";import{u as P,M as q}from"./useMescroll.566e88d0.js";import{M as E}from"./mescroll-empty.118d7584.js";import{_ as G}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.28b481c5.js";import"./u-transition.862f512b.js";import"./u-button.16c348c3.js";import"./u-loading-icon.448cb1c8.js";import"./u-popup.9c625195.js";import"./u-safe-bottom.c40e3bad.js";import"./pay.cf1e9cdb.js";import"./wechat.e4f076c9.js";/* empty css                                                                       */const K=G(a({__name:"list",setup(a){const{mescrollInit:G,downCallback:K,getMescroll:N}=P(x,f);let O=r([]),Q=r(!1),A=r(!1),H=r(""),Y=r([]);const B=r("");t((e=>{H.value=e.status||"",J(),T()}));const J=()=>{e.get("shop/goods/evaluate/config").then((e=>{B.value=e.data}))},L=e=>{Q.value=!1;let a={page:e.num,limit:e.size,status:H.value};R(a).then((a=>{let r=a.data.data;1==e.num&&(O.value=[]),O.value=O.value.concat(r),e.endSuccess(r.length),Q.value=!0})).catch((()=>{Q.value=!0,e.endErr()}))},T=()=>{A.value=!1,Y.value=[];Y.value.push({name:"全部",status:""}),M().then((e=>{Object.values(e.data).forEach(((e,a)=>{Y.value.push(e)})),A.value=!0})).catch((()=>{A.value=!0}))},V=e=>{C({url:"/shop/pages/order/detail",param:{order_id:e.order_id}})},W=r(null),X=(e,a="")=>{var r;"pay"==a?null==(r=W.value)||r.open(e.order_type,e.order_id):"close"==a?Z(e):"finish"==a?$(e):"evaluate"==a&&(e.is_evaluate?C({url:"/shop/pages/evaluate/order_evaluate_view",param:{order_id:e.order_id}}):C({url:"/shop/pages/evaluate/order_evaluate",param:{order_id:e.order_id}}))},Z=e=>{w({title:"提示",content:"您确定要关闭该订单吗？",success:a=>{a.confirm&&U(e.order_id).then((e=>{N().resetUpScroll()}))}})},$=e=>{w({title:"提示",content:"您确定物品已收到吗？",success:a=>{a.confirm&&F(e.order_id).then((e=>{N().resetUpScroll()}))}})};return(e,a)=>{const r=m,t=_,f=v(g("u-icon"),z),x=v(g("u--image"),I),C=S,w=v(g("pay"),D);return l(),s(r,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden order-list"},{default:o((()=>[i(A)?(l(),s(r,{key:0,class:"fixed left-0 top-0 right-0 z-10"},{default:o((()=>[p(t,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:o((()=>[p(r,{class:"flex whitespace-nowrap justify-around"},{default:o((()=>[(l(!0),u(n,null,d(i(Y),((e,a)=>(l(),s(r,{class:b(["text-sm leading-[90rpx]",{"class-select":i(H)===e.status.toString()}]),onClick:a=>{return r=e.status,H.value=r.toString(),O.value=[],void N().resetUpScroll();var r}},{default:o((()=>[y(h(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})):c("v-if",!0),p(q,{ref:"mescrollRef",top:"104rpx",onInit:i(G),onDown:i(K),onUp:L},{default:o((()=>[p(r,{class:"goods-wrap"},{default:o((()=>[(l(!0),u(n,null,d(i(O),((e,a)=>(l(),s(r,{key:a,class:"mb-[30rpx] bg-[#fff] pb-[24rpx]"},{default:o((()=>[p(r,{onClick:a=>V(e)},{default:o((()=>[p(r,{class:"bg-[#fff] px-[24rpx] py-[24rpx] rounded-[16rpx]"},{default:o((()=>[p(r,{class:"text-[30rpx] text-[#222] flex justify-between"},{default:o((()=>[p(r,{class:""},{default:o((()=>[y(h(i(k)("orderNo"))+"："+h(e.order_no),1)])),_:2},1024),p(r,{class:"text-[var(--primary-color)]"},{default:o((()=>[y(h(e.status_name.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(r,{class:"px-[24rpx]"},{default:o((()=>[(l(!0),u(n,null,d(e.order_goods,((e,a)=>(l(),s(r,{class:"order-goods-item flex mt-[50rpx]",key:a},{default:o((()=>[p(r,{class:"w-[160rpx] h-[160rpx] flex-2"},{default:o((()=>[p(x,{class:"rounded-[10rpx] overflow-hidden",width:"160rpx",height:"160rpx",src:i(j)(e.goods_image_thumb_small?e.goods_image_thumb_small:""),model:"aspectFill"},{error:o((()=>[p(f,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1024),p(r,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:o((()=>[p(r,null,{default:o((()=>[p(C,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:o((()=>[y(h(e.goods_name),1)])),_:2},1024),e.sku_name?(l(),s(r,{key:0,class:"flex"},{default:o((()=>[p(C,{class:"block text-[20rpx] text-item mt-[10rpx] text-[#ccc] bg-[#f5f5f5] px-[16rpx] py-[6rpx] rounded-[999rpx]"},{default:o((()=>[y(h(e.sku_name),1)])),_:2},1024)])),_:2},1024)):c("v-if",!0)])),_:2},1024),p(r,{class:"flex justify-between"},{default:o((()=>[p(C,{class:"text-right text-[28rpx] text-[var(--price-text-color)] price-font"},{default:o((()=>[y("￥"+h(e.price),1)])),_:2},1024),p(C,{class:"text-right text-[24rpx]"},{default:o((()=>[y("x"+h(e.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["onClick"]),p(r,{class:"flex justify-between text-[28rpx] px-[24rpx] mt-[40rpx]"},{default:o((()=>[p(C,{class:"text-[#999]"},{default:o((()=>[y(h(e.create_time),1)])),_:2},1024),p(C,null,{default:o((()=>[y(h(i(k)("actualPayment"))+"：",1),p(C,{class:"text-[var(--price-text-color)] price-font"},{default:o((()=>[y("￥"+h(e.order_money),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(r,{class:"mt-[34rpx] flex justify-end z-10 px-[24rpx]"},{default:o((()=>[1==e.status?(l(),s(r,{key:0,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full",onClick:a=>X(e,"close")},{default:o((()=>[y(h(i(k)("orderClose")),1)])),_:2},1032,["onClick"])):c("v-if",!0),p(r,{class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full ml-[20rpx]",onClick:a=>V(e)},{default:o((()=>[y(h(i(k)("orderDetail")),1)])),_:2},1032,["onClick"]),1==e.status?(l(),s(r,{key:1,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] border-primary bg-primary rounded-full ml-[20rpx]",onClick:a=>X(e,"pay")},{default:o((()=>[y(h(i(k)("topay")),1)])),_:2},1032,["onClick"])):c("v-if",!0),3==e.status?(l(),s(r,{key:2,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] border-primary bg-primary rounded-full ml-[20rpx]",onClick:a=>X(e,"finish")},{default:o((()=>[y(h(i(k)("orderFinish")),1)])),_:2},1032,["onClick"])):c("v-if",!0),5==e.status&&1==B.value.is_evaluate?(l(),s(r,{key:3,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full ml-[20rpx]",onClick:a=>X(e,"evaluate")},{default:o((()=>[y(h(i(k)("evaluate")),1)])),_:2},1032,["onClick"])):c("v-if",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),!i(O).length&&i(Q)?(l(),s(E,{key:0,option:{icon:i(j)("static/resource/images/empty.png")}},null,8,["option"])):c("v-if",!0)])),_:1},8,["onInit","onDown"]),p(w,{ref_key:"payRef",ref:W,onClose:e.payClose},null,8,["onClose"])])),_:1})}}}),[["__scopeId","data-v-56f29aa5"]]);export{K as default};
