import{d as e,r as a,o as l,b4 as r,c as s,i as t,j as d,w as o,m as u,k as i,n,K as m,L as c,a9 as p,Z as b,b5 as v,b6 as f,e as _,b7 as h,x as g,q as x,t as y,ao as V}from"./index-42b5dd66.js";import{_ as j,a as w,b as P}from"./u-form.2259a935.js";import{_ as k}from"./u-icon.d822f266.js";import{_ as U}from"./u-switch.eceda727.js";import{_ as $}from"./u-button.611a1b81.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.9c8e4680.js";import"./u-loading-icon.677af9c0.js";const q=e({__name:"location_address_edit",setup(e){const q=a(""),A=a({id:0,name:"",mobile:"",lat:"",lng:"",address:"",address_name:"学府街",full_address:"",is_default:0,area:"",type:"location_address"});l((e=>{e.id&&r(e.id).then((({data:e})=>{e&&(Object.assign(A.value,e),A.value.area=A.value.full_address.replace(A.value.address,"").replace(A.value.address_name,""))})).catch(),q.value=e.type||""}));const C=a(null),E=s((()=>({address:{type:"string",required:!0,message:b("addressError"),trigger:["blur","change"]},name:{type:"string",required:!0,message:b("namePlaceholder"),trigger:["blur","change"]},mobile:[{type:"string",required:!0,message:b("mobilePlaceholder"),trigger:["blur","change"]},{validator:()=>uni.$u.test.mobile(A.value.mobile),message:b("mobileError")}]}))),R=a(!1),T=()=>{if(uni.$u.test.isEmpty(A.value.area))return void p({title:b("selectAddressPlaceholder"),icon:"none"});const e=A.value.id?v:f;C.value.validate().then((()=>{R.value||(R.value=!0,A.value.full_address=`${A.value.area}${A.value.address_name}${A.value.address}`,e(A.value).then((e=>{R.value=!1,setTimeout((()=>{_({url:"/app/pages/member/address",param:{type:q.value}})}),1e3)})).catch((()=>{R.value=!1})))}))},z=()=>{h({success:e=>{e.latitude&&(A.value.lat=e.latitude),e.longitude&&(A.value.lng=e.longitude),e.address&&(A.value.area=e.address),e.name&&(A.value.address_name=e.name)}})};return(e,a)=>{const l=g,r=x(y("u-input"),j),s=x(y("u-form-item"),w),p=x(y("u-icon"),k),v=x(y("u-switch"),U),f=x(y("u-button"),$),_=x(y("u-form"),P),h=V;return t(),d(h,{"scroll-y":"true",class:"bg-page h-screen"},{default:o((()=>[u(' <view class="h-[88rpx]">\r\n\t\t        <u-navbar title="添加地址" @rightClick="rightClick" :autoBack="true"></u-navbar>\r\n\t\t</view> '),i(l,{class:"h-[30rpx]"}),i(l,{class:"m-[30rpx] mt-0 p-[30rpx] pt-[10rpx] rounded-md bg-white"},{default:o((()=>[i(_,{labelPosition:"left",model:A.value,labelWidth:"200rpx",errorType:"toast",rules:n(E),ref_key:"formRef",ref:C},{default:o((()=>[i(l,{class:"mt-[10rpx]"},{default:o((()=>[i(s,{label:n(b)("name"),prop:"name","border-bottom":!0},{default:o((()=>[i(r,{modelValue:A.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>A.value.name=e),border:"none",clearable:"",placeholder:n(b)("namePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:o((()=>[i(s,{label:n(b)("mobile"),prop:"mobile","border-bottom":!0},{default:o((()=>[i(r,{modelValue:A.value.mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>A.value.mobile=e),border:"none",clearable:"",placeholder:n(b)("mobilePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:o((()=>[i(s,{label:n(b)("deliveryAddress"),prop:"address_name","border-bottom":!0},{default:o((()=>[i(l,{class:"flex justify-between flex-1",onClick:z},{default:o((()=>[i(l,{class:"text-[#c3c4d5] text-[15px]"},{default:o((()=>[m(c(A.value.area?A.value.address_name:n(b)("selectAddressPlaceholder")),1)])),_:1}),i(p,{name:"arrow-right",color:"#c3c4d5"})])),_:1})])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:o((()=>[i(s,{label:n(b)("address"),prop:"address","border-bottom":!0},{default:o((()=>[i(r,{modelValue:A.value.address,"onUpdate:modelValue":a[2]||(a[2]=e=>A.value.address=e),border:"none",clearable:"",placeholder:n(b)("addressPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:o((()=>[i(s,{label:n(b)("defaultAddress"),prop:"name","border-bottom":!0},{default:o((()=>[i(v,{modelValue:A.value.is_default,"onUpdate:modelValue":a[3]||(a[3]=e=>A.value.is_default=e),size:"20",activeValue:1,inactiveValue:0},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[40rpx]"},{default:o((()=>[i(f,{type:"primary",shape:"circle",text:n(b)("save"),onClick:T,loading:R.value},null,8,["text","loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})}}});export{q as default};
