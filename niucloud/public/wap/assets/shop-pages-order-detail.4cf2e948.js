import{d as e,r,o as l,i as t,P as a,n as s,j as o,w as d,k as p,m as i,G as f,H as u,R as x,Q as n,p as _,e as c,bl as m,x as y,I as b,q as v,t as g,y as k,K as h,bm as j}from"./index-c8487b3e.js";import{_ as w}from"./u-icon.e1505caa.js";import{_ as C}from"./u--image.bde6b800.js";import{_ as T}from"./pay.9e381d65.js";import{_ as z}from"./u-loading-page.dfb8f67c.js";import{g as N,o as M,a as E}from"./order.e6f765ef.js";import{l as F}from"./logistics-tracking.b292f40a.js";import{_ as R}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.9b57fa1f.js";import"./u-transition.75acc538.js";import"./u-button.a3ccbdc0.js";import"./u-loading-icon.92d47c06.js";import"./u-popup.41f7f1c4.js";import"./u-safe-bottom.f4b61f4d.js";import"./pay.116f472c.js";import"./wechat.8ecaae3c.js";import"./u-tabs.fa0eaf2b.js";import"./u-badge.97e4ae5b.js";import"./u--text.e0f8727c.js";/* empty css                                                                       */const G=R(e({__name:"detail",setup(e){let R=r({}),G=r(!0);r("");let I=r("");r(1),r(!1),l((e=>{I.value=e.order_id,K(I.value)}));const K=e=>{G.value=!0,N(e).then((e=>{R.value=e.data,G.value=!1})).catch((()=>{G.value=!1}))},P=r(null),S=r(null),q=(e="")=>{var l,t;if("pay"==e)null==(l=P.value)||l.open(R.value.order_type,R.value.order_id);else if("close"==e)t=R.value,j({title:"提示",content:"您确定要关闭该订单吗？",success:e=>{e.confirm&&M(t.order_id).then((e=>{K(t.order_id)}))}});else if("finish"==e)(e=>{j({title:"提示",content:"您确定物品已收到吗？",success:r=>{r.confirm&&E(e.order_id).then((r=>{K(e.order_id)}))}})})(R.value);else if("index"==e)c({url:"/shop/pages/index"});else if("logistics"==e){if(R.value.order_delivery.length>0){let e={id:R.value.order_delivery[0].id,mobile:R.value.taker_mobile},l=r([]);R.value.order_delivery.forEach(((e,r)=>{e.mobile=R.value.taker_mobile,e.parcelName=`包裹${r+1}`,l.value.push(e)})),S.value.open(e),S.value.packageList=l.value}}else"evaluate"==e&&(R.value.is_evaluate?c({url:"/shop/pages/evaluate/order_evaluate_view",param:{order_id:R.value.order_id}}):c({url:"/shop/pages/evaluate/order_evaluate",param:{order_id:R.value.order_id}}))},D=()=>{m({latitude:Number(R.value.taker_latitude),longitude:Number(R.value.taker_longitude),success:function(){}})},H=e=>{let r=!1;return"express"==e.delivery_type&&(e.order_delivery.forEach((l=>{r="express"===l.sub_delivery_type&&"3"===e.status||"express"===l.sub_delivery_type&&"5"===e.status})),r)};return(e,r)=>{const l=y,m=b,j=v(g("u-icon"),w),N=v(g("u--image"),C),M=v(g("pay"),T),E=v(g("u-loading-page"),z);return t(),a(x,null,[s(G)?i("v-if",!0):(t(),o(l,{key:0,class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:d((()=>[s(G)?i("v-if",!0):(t(),o(l,{key:0,class:"pb-20rpx"},{default:d((()=>[s(R).status_name?(t(),o(l,{key:0,class:"flex status-item text-[32rpx] bg-primary h-[240rpx]"},{default:d((()=>[p(l,{class:"ml-[50rpx]"},{default:d((()=>[1==s(R).status?(t(),a("img",{key:0,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/payment.png")},null,8,["src"])):i("v-if",!0),2==s(R).status||3==s(R).status?(t(),a("img",{key:1,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/delivery.png")},null,8,["src"])):i("v-if",!0),5==s(R).status?(t(),a("img",{key:2,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/complete.png")},null,8,["src"])):i("v-if",!0),-1==s(R).status?(t(),a("img",{key:3,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/close.png")},null,8,["src"])):i("v-if",!0)])),_:1}),p(l,{class:"ml-[20rpx] text-[#fff] mt-[50rpx] text-[40rpx]"},{default:d((()=>[f(u(s(R).status_name.name),1)])),_:1})])),_:1})):i("v-if",!0),"virtual"!=s(R).delivery_type?(t(),o(l,{key:1,class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[-70rpx] rounded-[10rpx]"},{default:d((()=>["express"==s(R).delivery_type?(t(),o(l,{key:0},{default:d((()=>[p(l,{class:"text-[28rpx]"},{default:d((()=>[p(m,null,{default:d((()=>[f(u(s(R).taker_name),1)])),_:1}),p(m,{class:"ml-[15rpx]"},{default:d((()=>[f(u(s(R).taker_mobile),1)])),_:1})])),_:1}),p(l,{class:"mt-[15rpx] text-[28rpx]"},{default:d((()=>[f(u(s(R).taker_full_address),1)])),_:1})])),_:1})):i("v-if",!0),"store"==s(R).delivery_type?(t(),o(l,{key:1},{default:d((()=>[p(l,{class:"flex"},{default:d((()=>[p(l,null,{default:d((()=>[p(N,{class:"rounded-[10rpx] overflow-hidden",width:"100rpx",height:"100rpx",src:s(k)(s(R).store.store_logo?s(R).store.store_logo:""),model:"aspectFill"},{error:d((()=>[p(j,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),p(l,{class:"flex flex-col ml-[20rpx]"},{default:d((()=>[p(m,{class:"text-[24rpx]"},{default:d((()=>[f(u(s(R).store.store_name),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[15rpx]"},{default:d((()=>[f(u(s(R).store.trade_time),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[10rpx] leading-[35rpx]"},{default:d((()=>[f(u(s(R).store.full_address),1)])),_:1})])),_:1})])),_:1})])),_:1})):i("v-if",!0),"local_delivery"==s(R).delivery_type?(t(),o(l,{key:2,class:"flex"},{default:d((()=>[p(l,{onClick:D,class:"min-w-[100rpx] flex items-center justify-center"},{default:d((()=>[p(j,{name:"map",size:"25"})])),_:1}),p(l,{class:"flex flex-col ml-[20rpx]"},{default:d((()=>[p(m,{class:"text-[24rpx]"},{default:d((()=>[f(u(s(R).taker_name),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[15rpx]"},{default:d((()=>[f(u(s(R).taker_mobile),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[10rpx] leading-[35rpx]"},{default:d((()=>[f(u(s(R).taker_full_address),1)])),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1})):i("v-if",!0),p(l,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] rounded-[10rpx]",style:_("virtual"==s(R).delivery_type?"margin-top: -70rpx":"margin-top: 30rpx")},{default:d((()=>[(t(!0),a(x,null,n(s(R).order_goods,((e,r)=>(t(),o(l,{class:"order-goods-item flex justify-between flex-wrap mt-[50rpx]",key:r},{default:d((()=>[p(l,{class:"w-[160rpx] h-[160rpx] flex-2",onClick:r=>{return l=e.goods_id,void c({url:"/shop/pages/goods/detail",param:{goods_id:l}});var l}},{default:d((()=>[p(N,{class:"rounded-[10rpx] overflow-hidden",width:"160rpx",height:"160rpx",src:s(k)(e.goods_image_thumb_small?e.goods_image_thumb_small:""),model:"aspectFill"},{error:d((()=>[p(j,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1032,["onClick"]),p(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:d((()=>[p(l,null,{default:d((()=>[p(m,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:d((()=>[f(u(e.goods_name),1)])),_:2},1024),e.sku_name?(t(),o(l,{key:0,class:"flex"},{default:d((()=>[p(m,{class:"block text-[20rpx] text-item mt-[10rpx] text-[#ccc] bg-[#f5f5f5] px-[16rpx] py-[6rpx] rounded-[999rpx]"},{default:d((()=>[f(u(e.sku_name),1)])),_:2},1024)])),_:2},1024)):i("v-if",!0)])),_:2},1024),p(l,{class:"flex justify-between"},{default:d((()=>[p(m,{class:"text-right text-[28rpx] text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(e.price),1)])),_:2},1024),p(m,{class:"text-right text-sm"},{default:d((()=>[p(m,{class:"text-[26rpx]"},{default:d((()=>[f("x")])),_:1}),f(u(e.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(l,{class:"flex justify-end self-end w-[100%] mt-[10rpx]"},{default:d((()=>["1"!=e.status?(t(),o(l,{key:0,class:"text-[26rpx] leading-[40rpx] px-[30rpx] border-[2rpx] border-solid border-[#333] rounded-[20rpx]",onClick:r=>s(c)({url:"/shop/pages/refund/detail",param:{order_refund_no:e.order_refund_no}})},{default:d((()=>[f("查看退款")])),_:2},1032,["onClick"])):1==e.is_enable_refund?(t(),o(l,{key:1,class:"text-[26rpx] leading-[40rpx] px-[30rpx] border-[2rpx] border-solid border-[#333] rounded-[20rpx]",onClick:r=>{return l=e.order_goods_id,void c({url:"/shop/pages/refund/apply",param:{order_id:R.value.order_id,order_goods_id:l}});var l}},{default:d((()=>[f("申请退款")])),_:2},1032,["onClick"])):i("v-if",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["style"]),p(l,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[30rpx] rounded-[10rpx]"},{default:d((()=>[p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("orderNo")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(R).order_no),1)])),_:1})])),_:1}),s(R).out_trade_no?(t(),o(l,{key:0,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("orderTradeNo")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(R).out_trade_no),1)])),_:1})])),_:1})):i("v-if",!0),p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("createTime")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(R).create_time),1)])),_:1})])),_:1}),p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("deliveryType")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(R).delivery_type_name),1)])),_:1})])),_:1}),s(R).pay?(t(),o(l,{key:1,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("payTypeName")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(R).pay.type_name),1)])),_:1})])),_:1})):i("v-if",!0),s(R).pay?(t(),o(l,{key:2,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("payTime")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(R).pay.pay_time),1)])),_:1})])),_:1})):i("v-if",!0)])),_:1}),p(l,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[30rpx] rounded-[10rpx]"},{default:d((()=>[p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("goodsMoney")),1)])),_:1}),p(l,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(R).goods_money),1)])),_:1})])),_:1}),p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("discountMoney")),1)])),_:1}),p(l,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(R).discount_money),1)])),_:1})])),_:1}),p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("deliveryMoney")),1)])),_:1}),p(l,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(R).delivery_money),1)])),_:1})])),_:1}),p(l,{class:"flex justify-end text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[p(m,null,{default:d((()=>[f(u(s(h)("orderMoney"))+"：",1)])),_:1}),p(m,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(R).order_money),1)])),_:1})])),_:1})])),_:1})])),_:1}),p(l,{class:"flex z-2 justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] px-1 flex-wrap pb-[env(safe-area-inset-bottom)]"},{default:d((()=>[p(l,{class:"flex ml-[30rpx] w-[70rpx] flex-col justify-center items-center",onClick:r[0]||(r[0]=e=>q("index"))},{default:d((()=>[p(m,{class:"iconfont iconshouye text-[32rpx]"}),p(m,{class:"text-xs mt-1"},{default:d((()=>[f(u(s(h)("index")),1)])),_:1})])),_:1}),p(l,{class:"flex justify-end mr-[30rpx]"},{default:d((()=>[H(s(R))?(t(),o(l,{key:0,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full mr-[20rpx]",onClick:r[1]||(r[1]=e=>q("logistics"))},{default:d((()=>[f(u(s(h)("logisticsTracking")),1)])),_:1})):i("v-if",!0),1==s(R).status?(t(),o(l,{key:1,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full",onClick:r[2]||(r[2]=e=>q("close"))},{default:d((()=>[f(u(s(h)("orderClose")),1)])),_:1})):i("v-if",!0),1==s(R).status?(t(),o(l,{key:2,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] bg-primary border-primary rounded-full ml-[20rpx]",onClick:r[3]||(r[3]=e=>q("pay"))},{default:d((()=>[f(u(s(h)("topay")),1)])),_:1})):i("v-if",!0),3==s(R).status?(t(),o(l,{key:3,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] bg-primary border-primary rounded-full ml-[20rpx]",onClick:r[4]||(r[4]=e=>q("finish"))},{default:d((()=>[f(u(s(h)("orderFinish")),1)])),_:1})):i("v-if",!0),5==s(R).status?(t(),o(l,{key:4,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full",onClick:r[5]||(r[5]=e=>q("evaluate"))},{default:d((()=>[f(u(s(h)("evaluate")),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1})),p(l,{class:"tab-bar-placeholder"}),p(M,{ref_key:"payRef",ref:P,onClose:e.payClose},null,8,["onClose"]),p(F,{ref_key:"materialRef",ref:S},null,512)])),_:1})),p(E,{"bg-color":"rgb(248,248,248)",loading:s(G),fontSize:"16",color:"#333"},null,8,["loading"])],64)}}}),[["__scopeId","data-v-7e9d2704"]]);export{G as default};
