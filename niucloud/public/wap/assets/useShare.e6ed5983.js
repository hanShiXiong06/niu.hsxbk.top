import{q as e,ai as a,a6 as t,aj as l,ak as i,al as r,am as n,an as s}from"./index-b8ec63bc.js";import{w as o}from"./wechat.ff6a0967.js";const p=()=>{let p={title:"",link:""},c={};const h=()=>{s()&&o.share(p)};return{setShare:(r={})=>{let n=e();if(r&&r.wechat&&r.weapp){let e=a().params;n.info&&e.push("mid="+n.info.member_id);let i=location.origin+location.pathname+(e.length>0?"?"+e.join("&"):"");p={title:r.wechat.title||"",link:r.wechat.link||i,desc:r.wechat.desc||"",imgUrl:r.wechat.url?t(r.wechat.url):""},h(),c={title:r.weapp.title||"",query:r.weapp.path||"/"+l()+(e.length>0?"?"+e.join("&"):""),imageUrl:r.weapp.url?t(r.weapp.url):""}}else i({route:"/"+l(),params:a().params.toString()}).then((e=>{if(200==e.code){let a=e.data,l=a.wechat;if(l){let e=location.origin+location.pathname+(a.query?"?"+a.query:"");p={link:e,title:l.title,desc:l.desc,imgUrl:l.url?t(l.url):""}}h();let i=a.weapp;i&&(c={query:a.url,title:i.title,imageUrl:i.url?t(i.url):""})}}))},onShareAppMessage:(e={})=>{r((()=>({...c,...e})))},onShareTimeline:(e={})=>{n((()=>({...c,...e})))}}};export{p as u};
