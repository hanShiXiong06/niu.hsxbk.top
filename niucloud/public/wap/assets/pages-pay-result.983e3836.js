import{d as a,r as t,o as e,s,G as l,e as o,K as u,f as r,w as c,h as n,D as i,A as p,B as m,j as d,C as f,M as x,P as y,b4 as _,F as v,m as j,k as h,l as b,ao as g}from"./index-e3cbb98d.js";import{_ as w}from"./u-button.d50399ad.js";import{_ as T}from"./u-loading-icon.2ac4a7f2.js";import{_ as C}from"./u-modal.da54bc7a.js";import{g as k}from"./pay.372a9294.js";import"./u-icon.88a425c1.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.6619d7b4.js";import"./u-popup.a4366412.js";import"./u-transition.c6fa3287.js";import"./u-safe-bottom.a57492fd.js";const F=a({__name:"result",setup(a){const F=t(null),P=t(!1);let S="",z=0;e((a=>{S=a.code,B()}));const B=()=>{k(S).then((a=>{if(!uni.$u.test.isEmpty(a.data)){if(1==a.data.status&&z<5)return P.value=!0,z++,void setTimeout((()=>{B()}),1e3);F.value=a.data,P.value=!1,s({title:2==F.value.status?l("pay.paySuccess"):l("pay.payFail")})}})).catch((()=>{}))},A=()=>{var a;y({url:_(),param:{code:null==(a=F.value)?void 0:a.out_trade_no},mode:"redirectTo"})};return(a,t)=>{const e=v,s=j,y=h(b("u-button"),w),_=h(b("u-loading-icon"),T),k=h(b("u-modal"),C);return o(),u(x,null,[F.value?(o(),r(s,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:c((()=>[n(s,{class:"flex-1 flex flex-col items-center w-full pt-[100rpx]"},{default:c((()=>[n(e,{class:i(["iconfont text-2xl",2==F.value.status?"text-primary iconduigou":"iconzhifushibai text-red"])},null,8,["class"]),n(s,{class:"text-sm"},{default:c((()=>[p(m(2==F.value.status?d(l)("pay.paySuccess"):d(l)("pay.payFail")),1)])),_:1}),n(s,{class:"text-xl font-bold pt-[30rpx]"},{default:c((()=>[n(e,{class:"text-base"},{default:c((()=>[p(m(d(l)("currency")),1)])),_:1}),n(e,null,{default:c((()=>[p(m(d(g)(F.value.money)),1)])),_:1})])),_:1})])),_:1}),n(s,{class:"pb-[200rpx] w-[240rpx]"},{default:c((()=>[n(y,{type:"primary",text:2==F.value.status?d(l)("complete"):d(l)("close"),plain:!0,onClick:A},null,8,["text"])])),_:1})])),_:1})):f("",!0),n(k,{show:P.value,showCancelButton:!0,confirmText:d(l)("pay.completePay"),cancelText:d(l)("pay.incompletePay"),onCancel:A},{default:c((()=>[n(s,{class:"py-[20rpx]"},{default:c((()=>[n(_,{text:d(l)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])],64)}}});export{F as default};
