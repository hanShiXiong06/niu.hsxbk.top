import{d as e,r as a,o as l,av as r,c as s,i as t,j as d,w as u,m as o,k as i,n,G as m,H as c,_ as p,K as b,aw as v,ax as f,e as _,ay as h,x as g,q as x,t as y,a7 as V}from"./index-98826dc8.js";import{u as j,_ as w,a as k}from"./u-form.4859819c.js";import{_ as P}from"./u-icon.f3535e52.js";import{_ as $}from"./u-switch.34b75d65.js";import{_ as q}from"./u-button.3ca081fb.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.04b866e6.js";import"./u-loading-icon.9963a5a3.js";const A=e({__name:"location_address_edit",setup(e){const A=a(""),C=a({id:0,name:"",mobile:"",lat:"",lng:"",address:"",address_name:"学府街",full_address:"",is_default:0,area:"",type:"location_address"});l((e=>{e.id&&r(e.id).then((({data:e})=>{e&&(Object.assign(C.value,e),C.value.area=C.value.full_address.replace(C.value.address,"").replace(C.value.address_name,""))})).catch(),A.value=e.type||""}));const E=a(null),U=s((()=>({address:{type:"string",required:!0,message:b("addressError"),trigger:["blur","change"]},name:{type:"string",required:!0,message:b("namePlaceholder"),trigger:["blur","change"]},mobile:[{type:"string",required:!0,message:b("mobilePlaceholder"),trigger:["blur","change"]},{validator:()=>uni.$u.test.mobile(C.value.mobile),message:b("mobileError")}]}))),B=a(!1),T=()=>{if(uni.$u.test.isEmpty(C.value.area))return void p({title:b("selectAddressPlaceholder"),icon:"none"});const e=C.value.id?v:f;E.value.validate().then((()=>{B.value||(B.value=!0,C.value.full_address=`${C.value.area}${C.value.address_name}${C.value.address}`,e(C.value).then((e=>{B.value=!1,setTimeout((()=>{_({url:"/app/pages/member/address",param:{type:A.value}})}),1e3)})).catch((()=>{B.value=!1})))}))},z=()=>{h({success:e=>{e.latitude&&(C.value.lat=e.latitude),e.longitude&&(C.value.lng=e.longitude),e.address&&(C.value.area=e.address),e.name&&(C.value.address_name=e.name)}})};return(e,a)=>{const l=g,r=x(y("u-input"),j),s=x(y("u-form-item"),w),p=x(y("u-icon"),P),v=x(y("u-switch"),$),f=x(y("u-button"),q),_=x(y("u-form"),k),h=V;return t(),d(h,{"scroll-y":"true",class:"bg-page h-screen"},{default:u((()=>[o(' <view class="h-[88rpx]">\n\t\t        <u-navbar title="添加地址" @rightClick="rightClick" :autoBack="true"></u-navbar>\n\t\t</view> '),i(l,{class:"h-[30rpx]"}),i(l,{class:"m-[30rpx] mt-0 p-[30rpx] pt-[10rpx] rounded-md bg-white"},{default:u((()=>[i(_,{labelPosition:"left",model:C.value,labelWidth:"200rpx",errorType:"toast",rules:n(U),ref_key:"formRef",ref:E},{default:u((()=>[i(l,{class:"mt-[10rpx]"},{default:u((()=>[i(s,{label:n(b)("name"),prop:"name","border-bottom":!0},{default:u((()=>[i(r,{modelValue:C.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value.name=e),border:"none",clearable:"",placeholder:n(b)("namePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:u((()=>[i(s,{label:n(b)("mobile"),prop:"mobile","border-bottom":!0},{default:u((()=>[i(r,{modelValue:C.value.mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>C.value.mobile=e),border:"none",clearable:"",placeholder:n(b)("mobilePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:u((()=>[i(s,{label:n(b)("deliveryAddress"),prop:"address_name","border-bottom":!0},{default:u((()=>[i(l,{class:"flex justify-between flex-1",onClick:z},{default:u((()=>[i(l,{class:"text-[#c3c4d5] text-[15px]"},{default:u((()=>[m(c(C.value.area?C.value.address_name:n(b)("selectAddressPlaceholder")),1)])),_:1}),i(p,{name:"arrow-right",color:"#c3c4d5"})])),_:1})])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:u((()=>[i(s,{label:n(b)("address"),prop:"address","border-bottom":!0},{default:u((()=>[i(r,{modelValue:C.value.address,"onUpdate:modelValue":a[2]||(a[2]=e=>C.value.address=e),border:"none",clearable:"",placeholder:n(b)("addressPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[10rpx]"},{default:u((()=>[i(s,{label:n(b)("defaultAddress"),prop:"name","border-bottom":!0},{default:u((()=>[i(v,{modelValue:C.value.is_default,"onUpdate:modelValue":a[3]||(a[3]=e=>C.value.is_default=e),size:"20",activeValue:1,inactiveValue:0},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),i(l,{class:"mt-[40rpx]"},{default:u((()=>[i(f,{type:"primary",shape:"circle",text:n(b)("save"),onClick:T,loading:B.value},null,8,["text","loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})}}});export{A as default};
