import{d as e,r as t,i as r,j as l,w as a,k as s,P as p,Q as o,n as x,R as d,m as u,a9 as n,aa as f,x as c,a7 as i,q as _,t as m,D as b,G as g,H as v,y as h,e as w,I as y,W as j,aP as k}from"./index-c8487b3e.js";import{_ as E}from"./pay.9e381d65.js";import{c as F}from"./coupon.b3c2fd21.js";import{u as D,M as C}from"./useMescroll.16a36445.js";import{M as I}from"./mescroll-empty.e6398411.js";import{_ as M}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.9b57fa1f.js";import"./u-icon.e1505caa.js";import"./u-transition.75acc538.js";import"./u-button.a3ccbdc0.js";import"./u-loading-icon.92d47c06.js";import"./u-popup.41f7f1c4.js";import"./u-safe-bottom.f4b61f4d.js";import"./pay.116f472c.js";import"./wechat.8ecaae3c.js";/* empty css                                                                       */const z=M(e({__name:"my_coupon",setup(e){const{mescrollInit:M,downCallback:z,getMescroll:P}=D(f,n),R=t([]),S=t(!1),U=[{status:1,name:"待使用"},{status:2,name:"已使用"},{status:3,name:"已过期"}],A=t(1),W=e=>{S.value=!1;let t={page:e.num,limit:e.size,status:A.value};F(t).then((t=>{let r=t.data.data;1==e.num&&(R.value=[]),R.value=R.value.concat(r),e.endSuccess(r.length),S.value=!0})).catch((()=>{S.value=!0,e.endErr()}))};return(e,t)=>{const n=c,f=i,F=y,D=j,q=k,G=_(m("pay"),E);return r(),l(n,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:a((()=>[s(n,{class:"fixed left-0 top-0 right-0 z-10"},{default:a((()=>[s(f,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:a((()=>[s(n,{class:"flex whitespace-nowrap justify-around"},{default:a((()=>[(r(!0),p(d,null,o(x(U),((e,t)=>(r(),l(n,{class:b(["text-[27rpx] leading-[90rpx]",{"class-select":A.value===e.status}]),onClick:t=>{return r=e.status,A.value=r,R.value=[],void P().resetUpScroll();var r}},{default:a((()=>[g(v(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1}),s(C,{ref:"mescrollRef",top:"90rpx",onInit:x(M),onDown:x(z),onUp:W},{default:a((()=>[s(n,{class:"py-[20rpx] px-[24rpx]"},{default:a((()=>[(r(!0),p(d,null,o(R.value,((e,t)=>(r(),p(d,null,[1!=A.value?(r(),l(n,{key:0,class:b(["flex items-center relative w-[100%] rounded-[12rpx] overflow-hidden bg-[#EEEEEE]",{"mt-[20rpx]":t}])},{default:a((()=>[s(n,{class:"relative pt-[50rpx] w-[244rpx] h-[222rpx] bg-[#93979D] text-[#fff] text-center box-border px-[40rpx] box-border"},{default:a((()=>[s(n,{class:"w-[100%]"},{default:a((()=>[s(n,{class:"leading-[40rpx] font-500 price-font"},{default:a((()=>[s(F,{class:"text-[28rpx]"},{default:a((()=>[g("￥")])),_:1}),s(F,{class:"text-[50rpx]"},{default:a((()=>[g(v(e.coupon_price),1)])),_:2},1024)])),_:2},1024),s(n,{class:"mt-[35rpx] text-[23rpx] leading-[32rpx] font-500"},{default:a((()=>["0.00"===e.min_condition_money?(r(),l(F,{key:0},{default:a((()=>[g("无门槛")])),_:1})):(r(),l(F,{key:1},{default:a((()=>[g("满"+v(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024)])),_:2},1024),s(D,{class:"w-[10rpx] h-[222rpx] absolute right-[-2rpx] top-0",src:x(h)("addon/shop/coupon/coupon_border.png"),mode:"aspectFill"},null,8,["src"])])),_:2},1024),s(n,{class:"h-[222rpx] flex flex-1 flex-wrap pt-[24rpx] box-border ml-[19rpx] mr-[9rpx]"},{default:a((()=>[s(n,{class:"text-[27rpx] text-[#303133] leading-[38rpx] w-[100%]"},{default:a((()=>[s(n,null,{default:a((()=>[g(v(e.title),1)])),_:2},1024),s(n,{class:"flex mt-[5rpx]"},{default:a((()=>[s(F,{class:"flex items-center bg-[#93979D] text-[#fff] text-[20rpx] h-[32rpx] px-[16rpx] rounded-[16rpx]"},{default:a((()=>[g(v(e.type_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),s(n,{class:"self-end w-[100%] pt-[19rpx] pb-[20rpx] text-[22rpx] leading-[30rpx] text-[#90939A] border-0 border-t-[1px] border-dashed border-[#ccc]"},{default:a((()=>[1==e.valid_type?(r(),l(F,{key:0},{default:a((()=>[g("领取之日起"+v(e.length||"")+"天内有效",1)])),_:2},1024)):(r(),l(F,{key:1},{default:a((()=>[g(" 有效期至"+v(e.valid_end_time?e.valid_end_time.slice(0,10):""),1)])),_:2},1024))])),_:2},1024)])),_:2},1024),s(q,{class:"!w-[128rpx] !h-[50rpx] text-[23rpx] !border-0 !mr-[34rpx] !bg-[#EEEEEE] leading-[50rpx] text-[#93979D] remove-border",disabled:""},{default:a((()=>[g(v(x(U)[A.value-1].name),1)])),_:1}),s(n,{class:"absolute top-[50%] left-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tr-[20rpx] rounded-br-[20rpx] bg-[#fff]"}),s(n,{class:"absolute top-[50%] right-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tl-[20rpx] rounded-bl-[20rpx] bg-[#fff]"})])),_:2},1032,["class"])):(r(),l(n,{key:1,class:b(["flex items-center relative w-[100%] rounded-[12rpx] overflow-hidden bg-[#FFF4F4]",t?"mt-[20rpx]":""])},{default:a((()=>[s(n,{class:"relative pt-[50rpx] w-[244rpx] h-[222rpx] bg-[#FF4646] text-[#fff] text-center box-border px-[40rpx] box-border"},{default:a((()=>[s(n,{class:"w-[100%]"},{default:a((()=>[s(n,{class:"leading-[40rpx] font-500 price-font"},{default:a((()=>[s(F,{class:"text-[28rpx]"},{default:a((()=>[g("￥")])),_:1}),s(F,{class:"text-[50rpx]"},{default:a((()=>[g(v(e.coupon_price),1)])),_:2},1024)])),_:2},1024),s(n,{class:"mt-[35rpx] text-[23rpx] leading-[32rpx] font-500"},{default:a((()=>["0.00"===e.min_condition_money?(r(),l(F,{key:0},{default:a((()=>[g("无门槛")])),_:1})):(r(),l(F,{key:1},{default:a((()=>[g("满"+v(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024)])),_:2},1024),s(D,{class:"w-[10rpx] h-[222rpx] absolute right-[-2rpx] top-0",src:x(h)("addon/shop/coupon/coupon_border_active.png"),mode:"aspectFill"},null,8,["src"])])),_:2},1024),s(n,{class:b(["h-[222rpx] flex flex-1 flex-wrap pt-[24rpx] box-border ml-[19rpx]",1===A.value?"mr-[9rpx]":"mr-[34rpx]"])},{default:a((()=>[s(n,{class:"text-[27rpx] text-[#303133] leading-[38rpx] w-[100%]"},{default:a((()=>[s(n,null,{default:a((()=>[g(v(e.title),1)])),_:2},1024),s(n,{class:"flex mt-[5rpx]"},{default:a((()=>[s(F,{class:"flex items-center bg-[#FF4646] text-[#fff] text-[20rpx] h-[32rpx] px-[16rpx] rounded-[16rpx]"},{default:a((()=>[g(v(e.type_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),s(n,{class:"self-end w-[100%] pt-[19rpx] pb-[20rpx] text-[20rpx] leading-[30rpx] text-[#90939A] border-0 border-t-[1px] border-dashed border-[#ccc]"},{default:a((()=>[s(F,null,{default:a((()=>[g(" 有效期至"),s(F,{class:"text-[#FF4543]"},{default:a((()=>[g(v(e.expire_time?e.expire_time.slice(0,10):""),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"]),1===A.value?(r(),l(q,{key:0,class:"!w-[128rpx] !h-[50rpx] text-[23rpx] !border-0 !mr-[34rpx] !bg-[#FF4646] leading-[50rpx] rounded-full text-white remove-border",onClick:t=>{return r=e.id,void w({url:"/shop/pages/goods/list",param:{coupon_id:r}});var r}},{default:a((()=>[g("去使用")])),_:2},1032,["onClick"])):u("v-if",!0),s(n,{class:"absolute top-[50%] left-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tr-[20rpx] rounded-br-[20rpx] bg-[#fff]"}),s(n,{class:"absolute top-[50%] right-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tl-[20rpx] rounded-bl-[20rpx] bg-[#fff]"})])),_:2},1032,["class"]))],64)))),256))])),_:1}),!R.value.length&&S.value?(r(),l(I,{key:0,option:{icon:x(h)("static/resource/images/empty.png")}},null,8,["option"])):u("v-if",!0)])),_:1},8,["onInit","onDown"]),s(G,{ref:"payRef"},null,512)])),_:1})}}}),[["__scopeId","data-v-8f369ffd"]]);export{z as default};
