import{d as e,r,o as t,i as l,P as a,n as s,j as o,w as d,k as p,m as i,G as f,H as u,R as x,Q as n,p as _,e as c,bk as m,x as y,I as b,q as v,t as g,y as k,K as h,bl as j}from"./index-19cdd642.js";import{_ as w}from"./u-icon.608fbfc2.js";import{_ as C}from"./u--image.925f4ba8.js";import{_ as N}from"./pay.39358680.js";import{_ as z}from"./u-loading-page.1349466f.js";import{g as T,o as F,a as M}from"./order.dabff7ae.js";import{l as R}from"./logistics-tracking.be97ad5a.js";import{_ as q}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.28b481c5.js";import"./u-transition.862f512b.js";import"./u-button.16c348c3.js";import"./u-loading-icon.448cb1c8.js";import"./u-popup.9c625195.js";import"./u-safe-bottom.c40e3bad.js";import"./pay.cf1e9cdb.js";import"./wechat.e4f076c9.js";import"./u-tabs.07abd6a5.js";import"./u-badge.23b944d1.js";import"./u--text.dc272ea6.js";/* empty css                                                                       */const E=q(e({__name:"detail",setup(e){let q=r({}),E=r(!0);r("");let I=r("");r(1),r(!1),t((e=>{I.value=e.order_id,K(I.value)}));const K=e=>{E.value=!0,T(e).then((e=>{q.value=e.data,E.value=!1})).catch((()=>{E.value=!1}))},A=r(null),G=r(null),H=(e="")=>{var t,l;if("pay"==e)null==(t=A.value)||t.open(q.value.order_type,q.value.order_id);else if("close"==e)l=q.value,j({title:"提示",content:"您确定要关闭该订单吗？",success:e=>{e.confirm&&F(l.order_id).then((e=>{K(l.order_id)}))}});else if("finish"==e)(e=>{j({title:"提示",content:"您确定物品已收到吗？",success:r=>{r.confirm&&M(e.order_id).then((r=>{K(e.order_id)}))}})})(q.value);else if("index"==e)c({url:"/shop/pages/index"});else if("logistics"==e){if(q.value.order_delivery.length>0){let e={id:q.value.order_delivery[0].id,mobile:q.value.taker_mobile},t=r([]);q.value.order_delivery.forEach(((e,r)=>{e.mobile=q.value.taker_mobile,e.parcelName=`包裹${r+1}`,t.value.push(e)})),G.value.open(e),G.value.packageList=t.value}}else"evaluate"==e&&(q.value.is_evaluate?c({url:"/shop/pages/evaluate/order_evaluate_view",param:{order_id:q.value.order_id}}):c({url:"/shop/pages/evaluate/order_evaluate",param:{order_id:q.value.order_id}}))},L=()=>{m({latitude:Number(q.value.taker_latitude),longitude:Number(q.value.taker_longitude),success:function(){}})},O=e=>{let r=!1;return"express"==e.delivery_type&&(e.order_delivery.forEach((t=>{r="express"===t.sub_delivery_type&&"3"===e.status||"express"===t.sub_delivery_type&&"5"===e.status})),r)};return(e,r)=>{const t=y,m=b,j=v(g("u-icon"),w),T=v(g("u--image"),C),F=v(g("pay"),N),M=v(g("u-loading-page"),z);return l(),a(x,null,[s(E)?i("v-if",!0):(l(),o(t,{key:0,class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:d((()=>[s(E)?i("v-if",!0):(l(),o(t,{key:0,class:"pb-20rpx"},{default:d((()=>[s(q).status_name?(l(),o(t,{key:0,class:"flex status-item text-[32rpx] bg-primary h-[240rpx]"},{default:d((()=>[p(t,{class:"ml-[50rpx]"},{default:d((()=>[1==s(q).status?(l(),a("img",{key:0,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/payment.png")},null,8,["src"])):i("v-if",!0),2==s(q).status||3==s(q).status?(l(),a("img",{key:1,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/delivery.png")},null,8,["src"])):i("v-if",!0),5==s(q).status?(l(),a("img",{key:2,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/complete.png")},null,8,["src"])):i("v-if",!0),-1==s(q).status?(l(),a("img",{key:3,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/close.png")},null,8,["src"])):i("v-if",!0)])),_:1}),p(t,{class:"ml-[20rpx] text-[#fff] mt-[50rpx] text-[40rpx]"},{default:d((()=>[f(u(s(q).status_name.name),1)])),_:1})])),_:1})):i("v-if",!0),"virtual"!=s(q).delivery_type?(l(),o(t,{key:1,class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[-70rpx] rounded-[10rpx]"},{default:d((()=>["express"==s(q).delivery_type?(l(),o(t,{key:0},{default:d((()=>[p(t,{class:"text-[28rpx]"},{default:d((()=>[p(m,null,{default:d((()=>[f(u(s(q).taker_name),1)])),_:1}),p(m,{class:"ml-[15rpx]"},{default:d((()=>[f(u(s(q).taker_mobile),1)])),_:1})])),_:1}),p(t,{class:"mt-[15rpx] text-[28rpx]"},{default:d((()=>[f(u(s(q).taker_full_address),1)])),_:1})])),_:1})):i("v-if",!0),"store"==s(q).delivery_type?(l(),o(t,{key:1},{default:d((()=>[p(t,{class:"flex"},{default:d((()=>[p(t,null,{default:d((()=>[p(T,{class:"rounded-[10rpx] overflow-hidden",width:"100rpx",height:"100rpx",src:s(k)(s(q).store.store_logo?s(q).store.store_logo:""),model:"aspectFill"},{error:d((()=>[p(j,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),p(t,{class:"flex flex-col ml-[20rpx]"},{default:d((()=>[p(m,{class:"text-[24rpx]"},{default:d((()=>[f(u(s(q).store.store_name),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[15rpx]"},{default:d((()=>[f(u(s(q).store.trade_time),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[10rpx] leading-[35rpx]"},{default:d((()=>[f(u(s(q).store.full_address),1)])),_:1})])),_:1})])),_:1})])),_:1})):i("v-if",!0),"local_delivery"==s(q).delivery_type?(l(),o(t,{key:2,class:"flex"},{default:d((()=>[p(t,{onClick:L,class:"min-w-[100rpx] flex items-center justify-center"},{default:d((()=>[p(j,{name:"map",size:"25"})])),_:1}),p(t,{class:"flex flex-col ml-[20rpx]"},{default:d((()=>[p(m,{class:"text-[24rpx]"},{default:d((()=>[f(u(s(q).taker_name),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[15rpx]"},{default:d((()=>[f(u(s(q).taker_mobile),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[10rpx] leading-[35rpx]"},{default:d((()=>[f(u(s(q).taker_full_address),1)])),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1})):i("v-if",!0),p(t,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] rounded-[10rpx]",style:_("virtual"==s(q).delivery_type?"margin-top: -70rpx":"margin-top: 30rpx")},{default:d((()=>[(l(!0),a(x,null,n(s(q).order_goods,((e,r)=>(l(),o(t,{class:"order-goods-item flex justify-between flex-wrap mt-[50rpx]",key:r},{default:d((()=>[p(t,{class:"w-[160rpx] h-[160rpx] flex-2",onClick:r=>{return t=e.goods_id,void c({url:"/shop/pages/goods/detail",param:{goods_id:t}});var t}},{default:d((()=>[p(T,{class:"rounded-[10rpx] overflow-hidden",width:"160rpx",height:"160rpx",src:s(k)(e.goods_image_thumb_small?e.goods_image_thumb_small:""),model:"aspectFill"},{error:d((()=>[p(j,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1032,["onClick"]),p(t,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:d((()=>[p(t,null,{default:d((()=>[p(m,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:d((()=>[f(u(e.goods_name),1)])),_:2},1024),e.sku_name?(l(),o(t,{key:0,class:"flex"},{default:d((()=>[p(m,{class:"block text-[20rpx] text-item mt-[10rpx] text-[#ccc] bg-[#f5f5f5] px-[16rpx] py-[6rpx] rounded-[999rpx]"},{default:d((()=>[f(u(e.sku_name),1)])),_:2},1024)])),_:2},1024)):i("v-if",!0)])),_:2},1024),p(t,{class:"flex justify-between"},{default:d((()=>[p(m,{class:"text-right text-[28rpx] text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(e.price),1)])),_:2},1024),p(m,{class:"text-right text-sm"},{default:d((()=>[p(m,{class:"text-[26rpx]"},{default:d((()=>[f("x")])),_:1}),f(u(e.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(t,{class:"flex justify-end self-end w-[100%] mt-[10rpx]"},{default:d((()=>["1"!=e.status?(l(),o(t,{key:0,class:"text-[26rpx] leading-[40rpx] px-[30rpx] border-[2rpx] border-solid border-[#333] rounded-[20rpx]",onClick:r=>s(c)({url:"/shop/pages/refund/detail",param:{order_refund_no:e.order_refund_no}})},{default:d((()=>[f("查看退款")])),_:2},1032,["onClick"])):1==e.is_enable_refund?(l(),o(t,{key:1,class:"text-[26rpx] leading-[40rpx] px-[30rpx] border-[2rpx] border-solid border-[#333] rounded-[20rpx]",onClick:r=>{return t=e.order_goods_id,void c({url:"/shop/pages/refund/apply",param:{order_id:q.value.order_id,order_goods_id:t}});var t}},{default:d((()=>[f("申请退款")])),_:2},1032,["onClick"])):i("v-if",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["style"]),p(t,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[30rpx] rounded-[10rpx]"},{default:d((()=>[p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("orderNo")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).order_no),1)])),_:1})])),_:1}),s(q).out_trade_no?(l(),o(t,{key:0,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("orderTradeNo")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).out_trade_no),1)])),_:1})])),_:1})):i("v-if",!0),p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("createTime")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).create_time),1)])),_:1})])),_:1}),p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("deliveryType")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).delivery_type_name),1)])),_:1})])),_:1}),s(q).pay?(l(),o(t,{key:1,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("payTypeName")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).pay.type_name),1)])),_:1})])),_:1})):i("v-if",!0),s(q).pay?(l(),o(t,{key:2,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("payTime")),1)])),_:1}),p(t,null,{default:d((()=>[f(u(s(q).pay.pay_time),1)])),_:1})])),_:1})):i("v-if",!0)])),_:1}),p(t,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[30rpx] rounded-[10rpx]"},{default:d((()=>[p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("goodsMoney")),1)])),_:1}),p(t,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(q).goods_money),1)])),_:1})])),_:1}),p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("discountMoney")),1)])),_:1}),p(t,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(q).discount_money),1)])),_:1})])),_:1}),p(t,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[f(u(s(h)("deliveryMoney")),1)])),_:1}),p(t,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(q).delivery_money),1)])),_:1})])),_:1}),p(t,{class:"flex justify-end text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(t,null,{default:d((()=>[p(m,null,{default:d((()=>[f(u(s(h)("orderMoney"))+"：",1)])),_:1}),p(m,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(q).order_money),1)])),_:1})])),_:1})])),_:1})])),_:1}),p(t,{class:"flex z-2 justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] px-1 flex-wrap pb-[env(safe-area-inset-bottom)]"},{default:d((()=>[p(t,{class:"flex ml-[30rpx] w-[70rpx] flex-col justify-center items-center",onClick:r[0]||(r[0]=e=>H("index"))},{default:d((()=>[p(m,{class:"iconfont iconshouye text-[32rpx]"}),p(m,{class:"text-xs mt-1"},{default:d((()=>[f(u(s(h)("index")),1)])),_:1})])),_:1}),p(t,{class:"flex justify-end mr-[30rpx]"},{default:d((()=>[O(s(q))?(l(),o(t,{key:0,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full mr-[20rpx]",onClick:r[1]||(r[1]=e=>H("logistics"))},{default:d((()=>[f(u(s(h)("logisticsTracking")),1)])),_:1})):i("v-if",!0),1==s(q).status?(l(),o(t,{key:1,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full",onClick:r[2]||(r[2]=e=>H("close"))},{default:d((()=>[f(u(s(h)("orderClose")),1)])),_:1})):i("v-if",!0),1==s(q).status?(l(),o(t,{key:2,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] bg-primary border-primary rounded-full ml-[20rpx]",onClick:r[3]||(r[3]=e=>H("pay"))},{default:d((()=>[f(u(s(h)("topay")),1)])),_:1})):i("v-if",!0),3==s(q).status?(l(),o(t,{key:3,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] bg-primary border-primary rounded-full ml-[20rpx]",onClick:r[4]||(r[4]=e=>H("finish"))},{default:d((()=>[f(u(s(h)("orderFinish")),1)])),_:1})):i("v-if",!0),5==s(q).status?(l(),o(t,{key:4,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full",onClick:r[5]||(r[5]=e=>H("evaluate"))},{default:d((()=>[f(u(s(h)("evaluate")),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1})),p(t,{class:"tab-bar-placeholder"}),p(F,{ref_key:"payRef",ref:A,onClose:e.payClose},null,8,["onClose"]),p(R,{ref_key:"materialRef",ref:G},null,512)])),_:1})),p(M,{"bg-color":"rgb(248,248,248)",loading:s(E),fontSize:"16",color:"#333"},null,8,["loading"])],64)}}}),[["__scopeId","data-v-7e9d2704"]]);export{E as default};
