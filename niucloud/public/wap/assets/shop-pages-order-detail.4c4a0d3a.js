import{d as e,r,o as l,i as t,P as a,n as s,j as o,w as d,k as p,m as i,G as f,H as u,R as x,Q as n,p as _,e as c,bk as m,x as y,I as b,q as v,t as g,y as k,K as h,bl as j}from"./index-98826dc8.js";import{_ as w}from"./u-icon.f3535e52.js";import{_ as C}from"./u--image.6ab34ad7.js";import{_ as N}from"./pay.8b76560d.js";import{_ as T}from"./u-loading-page.336cca7c.js";import{g as z,o as M,a as F}from"./order.f5c4f493.js";import{l as R}from"./logistics-tracking.7f92acbb.js";import{_ as E}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.0f87688c.js";import"./u-transition.b9a2700d.js";import"./u-button.3ca081fb.js";import"./u-loading-icon.9963a5a3.js";import"./u-popup.5ab022a0.js";import"./u-safe-bottom.35e4ae97.js";import"./pay.4363ff80.js";import"./wechat.c07b9f08.js";import"./u-tabs.fcf0ccab.js";import"./u-badge.8fcbc170.js";import"./u--text.c7d330c4.js";/* empty css                                                                       */const G=E(e({__name:"detail",setup(e){let E=r({}),G=r(!0);r("");let H=r("");r(1),r(!1),l((e=>{H.value=e.order_id,I(H.value)}));const I=e=>{G.value=!0,z(e).then((e=>{E.value=e.data,G.value=!1})).catch((()=>{G.value=!1}))},K=r(null),q=r(null),D=(e="")=>{var l,t;if("pay"==e)null==(l=K.value)||l.open(E.value.order_type,E.value.order_id);else if("close"==e)t=E.value,j({title:"提示",content:"您确定要关闭该订单吗？",success:e=>{e.confirm&&M(t.order_id).then((e=>{I(t.order_id)}))}});else if("finish"==e)(e=>{j({title:"提示",content:"您确定物品已收到吗？",success:r=>{r.confirm&&F(e.order_id).then((r=>{I(e.order_id)}))}})})(E.value);else if("index"==e)c({url:"/shop/pages/index"});else if("logistics"==e){if(E.value.order_delivery.length>0){let e={id:E.value.order_delivery[0].id,mobile:E.value.taker_mobile},l=r([]);E.value.order_delivery.forEach(((e,r)=>{e.mobile=E.value.taker_mobile,e.parcelName=`包裹${r+1}`,l.value.push(e)})),q.value.open(e),q.value.packageList=l.value}}else"evaluate"==e&&(E.value.is_evaluate?c({url:"/shop/pages/evaluate/order_evaluate_view",param:{order_id:E.value.order_id}}):c({url:"/shop/pages/evaluate/order_evaluate",param:{order_id:E.value.order_id}}))},L=()=>{m({latitude:Number(E.value.taker_latitude),longitude:Number(E.value.taker_longitude),success:function(){}})},P=e=>{let r=!1;return"express"==e.delivery_type&&(e.order_delivery.forEach((l=>{r="express"===l.sub_delivery_type&&"3"===e.status||"express"===l.sub_delivery_type&&"5"===e.status})),r)};return(e,r)=>{const l=y,m=b,j=v(g("u-icon"),w),z=v(g("u--image"),C),M=v(g("pay"),N),F=v(g("u-loading-page"),T);return t(),a(x,null,[s(G)?i("v-if",!0):(t(),o(l,{key:0,class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:d((()=>[s(G)?i("v-if",!0):(t(),o(l,{key:0,class:"pb-20rpx"},{default:d((()=>[s(E).status_name?(t(),o(l,{key:0,class:"flex status-item text-[32rpx] bg-primary h-[240rpx]"},{default:d((()=>[p(l,{class:"ml-[50rpx]"},{default:d((()=>[1==s(E).status?(t(),a("img",{key:0,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/payment.png")},null,8,["src"])):i("v-if",!0),2==s(E).status||3==s(E).status?(t(),a("img",{key:1,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/delivery.png")},null,8,["src"])):i("v-if",!0),5==s(E).status?(t(),a("img",{key:2,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/complete.png")},null,8,["src"])):i("v-if",!0),-1==s(E).status?(t(),a("img",{key:3,class:"w-[70rpx] h-[70rpx] mt-[45rpx]",src:s(k)("addon/shop/close.png")},null,8,["src"])):i("v-if",!0)])),_:1}),p(l,{class:"ml-[20rpx] text-[#fff] mt-[50rpx] text-[40rpx]"},{default:d((()=>[f(u(s(E).status_name.name),1)])),_:1})])),_:1})):i("v-if",!0),"virtual"!=s(E).delivery_type?(t(),o(l,{key:1,class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[-70rpx] rounded-[10rpx]"},{default:d((()=>["express"==s(E).delivery_type?(t(),o(l,{key:0},{default:d((()=>[p(l,{class:"text-[28rpx]"},{default:d((()=>[p(m,null,{default:d((()=>[f(u(s(E).taker_name),1)])),_:1}),p(m,{class:"ml-[15rpx]"},{default:d((()=>[f(u(s(E).taker_mobile),1)])),_:1})])),_:1}),p(l,{class:"mt-[15rpx] text-[28rpx]"},{default:d((()=>[f(u(s(E).taker_full_address),1)])),_:1})])),_:1})):i("v-if",!0),"store"==s(E).delivery_type?(t(),o(l,{key:1},{default:d((()=>[p(l,{class:"flex"},{default:d((()=>[p(l,null,{default:d((()=>[p(z,{class:"rounded-[10rpx] overflow-hidden",width:"100rpx",height:"100rpx",src:s(k)(s(E).store.store_logo?s(E).store.store_logo:""),model:"aspectFill"},{error:d((()=>[p(j,{name:"photo",color:"#999",size:"50"})])),_:1},8,["src"])])),_:1}),p(l,{class:"flex flex-col ml-[20rpx]"},{default:d((()=>[p(m,{class:"text-[24rpx]"},{default:d((()=>[f(u(s(E).store.store_name),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[15rpx]"},{default:d((()=>[f(u(s(E).store.trade_time),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[10rpx] leading-[35rpx]"},{default:d((()=>[f(u(s(E).store.full_address),1)])),_:1})])),_:1})])),_:1})])),_:1})):i("v-if",!0),"local_delivery"==s(E).delivery_type?(t(),o(l,{key:2,class:"flex"},{default:d((()=>[p(l,{onClick:L,class:"min-w-[100rpx] flex items-center justify-center"},{default:d((()=>[p(j,{name:"map",size:"25"})])),_:1}),p(l,{class:"flex flex-col ml-[20rpx]"},{default:d((()=>[p(m,{class:"text-[24rpx]"},{default:d((()=>[f(u(s(E).taker_name),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[15rpx]"},{default:d((()=>[f(u(s(E).taker_mobile),1)])),_:1}),p(m,{class:"text-[24rpx] mt-[10rpx] leading-[35rpx]"},{default:d((()=>[f(u(s(E).taker_full_address),1)])),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1})):i("v-if",!0),p(l,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] rounded-[10rpx]",style:_("virtual"==s(E).delivery_type?"margin-top: -70rpx":"margin-top: 30rpx")},{default:d((()=>[(t(!0),a(x,null,n(s(E).order_goods,((e,r)=>(t(),o(l,{class:"order-goods-item flex justify-between flex-wrap mt-[50rpx]",key:r},{default:d((()=>[p(l,{class:"w-[160rpx] h-[160rpx] flex-2",onClick:r=>{return l=e.goods_id,void c({url:"/shop/pages/goods/detail",param:{goods_id:l}});var l}},{default:d((()=>[p(z,{class:"rounded-[10rpx] overflow-hidden",width:"160rpx",height:"160rpx",src:s(k)(e.goods_image_thumb_small?e.goods_image_thumb_small:""),model:"aspectFill"},{error:d((()=>[p(j,{name:"photo",color:"#999",size:"50"})])),_:2},1032,["src"])])),_:2},1032,["onClick"]),p(l,{class:"ml-[20rpx] flex flex-1 flex-col justify-between"},{default:d((()=>[p(l,null,{default:d((()=>[p(m,{class:"text-[28rpx] text-item leading-[40rpx]"},{default:d((()=>[f(u(e.goods_name),1)])),_:2},1024),e.sku_name?(t(),o(l,{key:0,class:"flex"},{default:d((()=>[p(m,{class:"block text-[20rpx] text-item mt-[10rpx] text-[#ccc] bg-[#f5f5f5] px-[16rpx] py-[6rpx] rounded-[999rpx]"},{default:d((()=>[f(u(e.sku_name),1)])),_:2},1024)])),_:2},1024)):i("v-if",!0)])),_:2},1024),p(l,{class:"flex justify-between"},{default:d((()=>[p(m,{class:"text-right text-[28rpx] text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(e.price),1)])),_:2},1024),p(m,{class:"text-right text-sm"},{default:d((()=>[p(m,{class:"text-[26rpx]"},{default:d((()=>[f("x")])),_:1}),f(u(e.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),p(l,{class:"flex justify-end self-end w-[100%] mt-[10rpx]"},{default:d((()=>["1"!=e.status?(t(),o(l,{key:0,class:"text-[26rpx] leading-[40rpx] px-[30rpx] border-[2rpx] border-solid border-[#333] rounded-[20rpx]",onClick:r=>s(c)({url:"/shop/pages/refund/detail",param:{order_refund_no:e.order_refund_no}})},{default:d((()=>[f("查看退款")])),_:2},1032,["onClick"])):1==e.is_enable_refund?(t(),o(l,{key:1,class:"text-[26rpx] leading-[40rpx] px-[30rpx] border-[2rpx] border-solid border-[#333] rounded-[20rpx]",onClick:r=>{return l=e.order_goods_id,void c({url:"/shop/pages/refund/apply",param:{order_id:E.value.order_id,order_goods_id:l}});var l}},{default:d((()=>[f("申请退款")])),_:2},1032,["onClick"])):i("v-if",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["style"]),p(l,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[30rpx] rounded-[10rpx]"},{default:d((()=>[p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("orderNo")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(E).order_no),1)])),_:1})])),_:1}),s(E).out_trade_no?(t(),o(l,{key:0,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("orderTradeNo")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(E).out_trade_no),1)])),_:1})])),_:1})):i("v-if",!0),p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("createTime")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(E).create_time),1)])),_:1})])),_:1}),p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("deliveryType")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(E).delivery_type_name),1)])),_:1})])),_:1}),s(E).pay?(t(),o(l,{key:1,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("payTypeName")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(E).pay.type_name),1)])),_:1})])),_:1})):i("v-if",!0),s(E).pay?(t(),o(l,{key:2,class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("payTime")),1)])),_:1}),p(l,null,{default:d((()=>[f(u(s(E).pay.pay_time),1)])),_:1})])),_:1})):i("v-if",!0)])),_:1}),p(l,{class:"bg-[#fff] mx-[30rpx] p-[30rpx] mt-[30rpx] rounded-[10rpx]"},{default:d((()=>[p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("goodsMoney")),1)])),_:1}),p(l,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(E).goods_money),1)])),_:1})])),_:1}),p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("discountMoney")),1)])),_:1}),p(l,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(E).discount_money),1)])),_:1})])),_:1}),p(l,{class:"flex justify-between text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[f(u(s(h)("deliveryMoney")),1)])),_:1}),p(l,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(E).delivery_money),1)])),_:1})])),_:1}),p(l,{class:"flex justify-end text-[28rpx] pt-[20rpx] border-top-[2rpx] border-[solid] border-[#f1f1f1] mt-[40rpx]"},{default:d((()=>[p(l,null,{default:d((()=>[p(m,null,{default:d((()=>[f(u(s(h)("orderMoney"))+"：",1)])),_:1}),p(m,{class:"text-[var(--price-text-color)] price-font"},{default:d((()=>[f("￥"+u(s(E).order_money),1)])),_:1})])),_:1})])),_:1})])),_:1}),p(l,{class:"flex z-2 justify-between items-center bg-[#fff] fixed left-0 right-0 bottom-0 min-h-[100rpx] px-1 flex-wrap pb-[env(safe-area-inset-bottom)]"},{default:d((()=>[p(l,{class:"flex ml-[30rpx] w-[70rpx] flex-col justify-center items-center",onClick:r[0]||(r[0]=e=>D("index"))},{default:d((()=>[p(m,{class:"iconfont iconshouye text-[32rpx]"}),p(m,{class:"text-xs mt-1"},{default:d((()=>[f(u(s(h)("index")),1)])),_:1})])),_:1}),p(l,{class:"flex justify-end mr-[30rpx]"},{default:d((()=>[P(s(E))?(t(),o(l,{key:0,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full mr-[20rpx]",onClick:r[1]||(r[1]=e=>D("logistics"))},{default:d((()=>[f(u(s(h)("logisticsTracking")),1)])),_:1})):i("v-if",!0),1==s(E).status?(t(),o(l,{key:1,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full",onClick:r[2]||(r[2]=e=>D("close"))},{default:d((()=>[f(u(s(h)("orderClose")),1)])),_:1})):i("v-if",!0),1==s(E).status?(t(),o(l,{key:2,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] bg-primary border-primary rounded-full ml-[20rpx]",onClick:r[3]||(r[3]=e=>D("pay"))},{default:d((()=>[f(u(s(h)("topay")),1)])),_:1})):i("v-if",!0),3==s(E).status?(t(),o(l,{key:3,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid text-[#fff] bg-primary border-primary rounded-full ml-[20rpx]",onClick:r[4]||(r[4]=e=>D("finish"))},{default:d((()=>[f(u(s(h)("orderFinish")),1)])),_:1})):i("v-if",!0),5==s(E).status?(t(),o(l,{key:4,class:"inline-block text-[26rpx] leading-[56rpx] px-[30rpx] border-[3rpx] border-solid border-[#999] rounded-full",onClick:r[5]||(r[5]=e=>D("evaluate"))},{default:d((()=>[f(u(s(h)("evaluate")),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1})),p(l,{class:"tab-bar-placeholder"}),p(M,{ref_key:"payRef",ref:K,onClose:e.payClose},null,8,["onClose"]),p(R,{ref_key:"materialRef",ref:q},null,512)])),_:1})),p(F,{"bg-color":"rgb(248,248,248)",loading:s(G),fontSize:"16",color:"#333"},null,8,["loading"])],64)}}}),[["__scopeId","data-v-7e9d2704"]]);export{G as default};
