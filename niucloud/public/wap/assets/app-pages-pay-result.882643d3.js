import{d as a,r as e,o as t,f as s,Z as l,i as r,F as o,j as u,w as p,k as c,n,K as i,L as m,m as x,G as d,a4 as f,h as y,b1 as _,M as v,x as j,N as g,q as b,t as h,y as w,ak as T}from"./index-aafd04f6.js";import{_ as k}from"./u-button.7a78cac5.js";import{_ as F}from"./u-loading-icon.660c9bdb.js";import{_ as C}from"./u-modal.bdceb19a.js";import{g as S}from"./pay.2807685a.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.0ce29e5a.js";import"./u-line.689cce91.js";import"./u-popup.2be273f7.js";import"./u-transition.14e36316.js";import"./u-safe-bottom.1659b859.js";const L=I(a({__name:"result",setup(a){const I=e(null),L=e(!1);let M="",N=0,P=0;t((a=>{M=a.trade_type,N=a.trade_id,R()}));const R=()=>{S(M,N).then((a=>{if(!uni.$u.test.isEmpty(a.data)){if(1==a.data.status&&P<5)return L.value=!0,P++,void setTimeout((()=>{R()}),1e3);I.value=a.data,L.value=!1,s({title:2==I.value.status?l("pay.paySuccess"):l("pay.payFail")})}})).catch((()=>{}))},Z=()=>{var a;const e=decodeURIComponent(f("payReturn"));y(e?{url:e,mode:"redirectTo"}:{url:_(),param:{code:null==(a=I.value)?void 0:a.out_trade_no},mode:"redirectTo"})};return(a,e)=>{const t=v,s=j,f=g,y=b(h("u-button"),k),_=b(h("u-loading-icon"),F),S=b(h("u-modal"),C);return r(),o(d,null,[I.value?(r(),u(s,{key:0,class:"w-screen bg-[#fff] flex flex-col items-center"},{default:p((()=>[c(s,{class:"flex-1 flex flex-col items-center w-full pt-[100rpx]"},{default:p((()=>[2==I.value.status?(r(),u(t,{key:0,class:"max-w-[144rpx] max-h-[88rpx]",src:n(w)("static/resource/images/result/pay_succeed.png")},null,8,["src"])):(r(),u(t,{key:1,class:"max-w-[144rpx] max-h-[88rpx]",src:n(w)("static/resource/images/result/pay_error.png")},null,8,["src"])),c(s,{class:"text-[32rpx] font-bold mt-[22rpx]"},{default:p((()=>[i(m(2==I.value.status?n(l)("pay.paySuccess"):n(l)("pay.payFail")),1)])),_:1}),c(s,{class:"text-[40rpx] font-bold mt-[40rpx] text-[#FF4646]"},{default:p((()=>[c(f,{class:"text-base"},{default:p((()=>[i(m(n(l)("currency")),1)])),_:1}),c(f,null,{default:p((()=>[i(m(n(T)(I.value.money)),1)])),_:1})])),_:1})])),_:1}),c(s,{class:"pb-[80rpx] pt-[40rpx] w-[240rpx]"},{default:p((()=>[c(y,{type:"primary",text:2==I.value.status?n(l)("complete"):n(l)("close"),plain:!0,onClick:Z},null,8,["text"])])),_:1})])),_:1})):x("v-if",!0),c(S,{show:L.value,showCancelButton:!0,confirmText:n(l)("pay.completePay"),cancelText:n(l)("pay.incompletePay"),onCancel:Z},{default:p((()=>[c(s,{class:"py-[20rpx]"},{default:p((()=>[c(_,{text:n(l)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])],64)}}}),[["__scopeId","data-v-03e1fe0c"]]);export{L as default};
