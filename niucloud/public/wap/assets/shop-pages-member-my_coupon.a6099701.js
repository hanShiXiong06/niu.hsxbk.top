import{d as e,r as t,i as r,j as l,w as a,k as s,P as p,Q as o,n as x,R as d,m as n,a9 as u,aa as f,x as c,a7 as i,q as m,t as _,D as b,G as g,H as v,y as h,e as w,I as y,W as j,aG as k}from"./index-98826dc8.js";import{_ as F}from"./pay.8b76560d.js";import{c as E}from"./coupon.37489a1a.js";import{u as D,M as I}from"./useMescroll.27ac4f6e.js";import{M as C}from"./mescroll-empty.ffb3bc6d.js";import{_ as M}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-image.0f87688c.js";import"./u-icon.f3535e52.js";import"./u-transition.b9a2700d.js";import"./u-button.3ca081fb.js";import"./u-loading-icon.9963a5a3.js";import"./u-popup.5ab022a0.js";import"./u-safe-bottom.35e4ae97.js";import"./pay.4363ff80.js";import"./wechat.c07b9f08.js";/* empty css                                                                       */const R=M(e({__name:"my_coupon",setup(e){const{mescrollInit:M,downCallback:R,getMescroll:z}=D(f,u),G=t([]),A=t(!1),H=[{status:1,name:"待使用"},{status:2,name:"已使用"},{status:3,name:"已过期"}],S=t(1),U=e=>{A.value=!1;let t={page:e.num,limit:e.size,status:S.value};E(t).then((t=>{let r=t.data.data;1==e.num&&(G.value=[]),G.value=G.value.concat(r),e.endSuccess(r.length),A.value=!0})).catch((()=>{A.value=!0,e.endErr()}))};return(e,t)=>{const u=c,f=i,E=y,D=j,q=k,J=m(_("pay"),F);return r(),l(u,{class:"bg-[#f8f8f8] min-h-screen overflow-hidden"},{default:a((()=>[s(u,{class:"fixed left-0 top-0 right-0 z-10"},{default:a((()=>[s(f,{"scroll-x":"true",class:"scroll-Y box-border px-[24rpx] bg-white"},{default:a((()=>[s(u,{class:"flex whitespace-nowrap justify-around"},{default:a((()=>[(r(!0),p(d,null,o(x(H),((e,t)=>(r(),l(u,{class:b(["text-[27rpx] leading-[90rpx]",{"class-select":S.value===e.status}]),onClick:t=>{return r=e.status,S.value=r,G.value=[],void z().resetUpScroll();var r}},{default:a((()=>[g(v(e.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1}),s(I,{ref:"mescrollRef",top:"90rpx",onInit:x(M),onDown:x(R),onUp:U},{default:a((()=>[s(u,{class:"py-[20rpx] px-[24rpx]"},{default:a((()=>[(r(!0),p(d,null,o(G.value,((e,t)=>(r(),p(d,null,[1!=S.value?(r(),l(u,{key:0,class:b(["flex items-center relative w-[100%] rounded-[12rpx] overflow-hidden bg-[#EEEEEE]",{"mt-[20rpx]":t}])},{default:a((()=>[s(u,{class:"relative pt-[50rpx] w-[244rpx] h-[222rpx] bg-[#93979D] text-[#fff] text-center box-border px-[40rpx] box-border"},{default:a((()=>[s(u,{class:"w-[100%]"},{default:a((()=>[s(u,{class:"leading-[40rpx] font-500 price-font"},{default:a((()=>[s(E,{class:"text-[28rpx]"},{default:a((()=>[g("￥")])),_:1}),s(E,{class:"text-[50rpx]"},{default:a((()=>[g(v(e.coupon_price),1)])),_:2},1024)])),_:2},1024),s(u,{class:"mt-[35rpx] text-[23rpx] leading-[32rpx] font-500"},{default:a((()=>["0.00"===e.min_condition_money?(r(),l(E,{key:0},{default:a((()=>[g("无门槛")])),_:1})):(r(),l(E,{key:1},{default:a((()=>[g("满"+v(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024)])),_:2},1024),s(D,{class:"w-[10rpx] h-[222rpx] absolute right-[-2rpx] top-0",src:x(h)("addon/shop/coupon/coupon_border.png"),mode:"aspectFill"},null,8,["src"])])),_:2},1024),s(u,{class:"h-[222rpx] flex flex-1 flex-wrap pt-[24rpx] box-border ml-[19rpx] mr-[9rpx]"},{default:a((()=>[s(u,{class:"text-[27rpx] text-[#303133] leading-[38rpx] w-[100%]"},{default:a((()=>[s(u,null,{default:a((()=>[g(v(e.title),1)])),_:2},1024),s(u,{class:"flex mt-[5rpx]"},{default:a((()=>[s(E,{class:"flex items-center bg-[#93979D] text-[#fff] text-[20rpx] h-[32rpx] px-[16rpx] rounded-[16rpx]"},{default:a((()=>[g(v(e.type_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),s(u,{class:"self-end w-[100%] pt-[19rpx] pb-[20rpx] text-[22rpx] leading-[30rpx] text-[#90939A] border-0 border-t-[1px] border-dashed border-[#ccc]"},{default:a((()=>[1==e.valid_type?(r(),l(E,{key:0},{default:a((()=>[g("领取之日起"+v(e.length||"")+"天内有效",1)])),_:2},1024)):(r(),l(E,{key:1},{default:a((()=>[g(" 有效期至"+v(e.valid_end_time?e.valid_end_time.slice(0,10):""),1)])),_:2},1024))])),_:2},1024)])),_:2},1024),s(q,{class:"!w-[128rpx] !h-[50rpx] text-[23rpx] !border-0 !mr-[34rpx] !bg-[#EEEEEE] leading-[50rpx] text-[#93979D] remove-border",disabled:""},{default:a((()=>[g(v(x(H)[S.value-1].name),1)])),_:1}),s(u,{class:"absolute top-[50%] left-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tr-[20rpx] rounded-br-[20rpx] bg-[#fff]"}),s(u,{class:"absolute top-[50%] right-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tl-[20rpx] rounded-bl-[20rpx] bg-[#fff]"})])),_:2},1032,["class"])):(r(),l(u,{key:1,class:b(["flex items-center relative w-[100%] rounded-[12rpx] overflow-hidden bg-[#FFF4F4]",t?"mt-[20rpx]":""])},{default:a((()=>[s(u,{class:"relative pt-[50rpx] w-[244rpx] h-[222rpx] bg-[#FF4646] text-[#fff] text-center box-border px-[40rpx] box-border"},{default:a((()=>[s(u,{class:"w-[100%]"},{default:a((()=>[s(u,{class:"leading-[40rpx] font-500 price-font"},{default:a((()=>[s(E,{class:"text-[28rpx]"},{default:a((()=>[g("￥")])),_:1}),s(E,{class:"text-[50rpx]"},{default:a((()=>[g(v(e.coupon_price),1)])),_:2},1024)])),_:2},1024),s(u,{class:"mt-[35rpx] text-[23rpx] leading-[32rpx] font-500"},{default:a((()=>["0.00"===e.min_condition_money?(r(),l(E,{key:0},{default:a((()=>[g("无门槛")])),_:1})):(r(),l(E,{key:1},{default:a((()=>[g("满"+v(e.coupon_min_price)+"元可用",1)])),_:2},1024))])),_:2},1024)])),_:2},1024),s(D,{class:"w-[10rpx] h-[222rpx] absolute right-[-2rpx] top-0",src:x(h)("addon/shop/coupon/coupon_border_active.png"),mode:"aspectFill"},null,8,["src"])])),_:2},1024),s(u,{class:b(["h-[222rpx] flex flex-1 flex-wrap pt-[24rpx] box-border ml-[19rpx]",1===S.value?"mr-[9rpx]":"mr-[34rpx]"])},{default:a((()=>[s(u,{class:"text-[27rpx] text-[#303133] leading-[38rpx] w-[100%]"},{default:a((()=>[s(u,null,{default:a((()=>[g(v(e.title),1)])),_:2},1024),s(u,{class:"flex mt-[5rpx]"},{default:a((()=>[s(E,{class:"flex items-center bg-[#FF4646] text-[#fff] text-[20rpx] h-[32rpx] px-[16rpx] rounded-[16rpx]"},{default:a((()=>[g(v(e.type_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),s(u,{class:"self-end w-[100%] pt-[19rpx] pb-[20rpx] text-[20rpx] leading-[30rpx] text-[#90939A] border-0 border-t-[1px] border-dashed border-[#ccc]"},{default:a((()=>[s(E,null,{default:a((()=>[g(" 有效期至"),s(E,{class:"text-[#FF4543]"},{default:a((()=>[g(v(e.expire_time?e.expire_time.slice(0,10):""),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"]),1===S.value?(r(),l(q,{key:0,class:"!w-[128rpx] !h-[50rpx] text-[23rpx] !border-0 !mr-[34rpx] !bg-[#FF4646] leading-[50rpx] rounded-full text-white remove-border",onClick:t=>{return r=e.id,void w({url:"/shop/pages/goods/list",param:{coupon_id:r}});var r}},{default:a((()=>[g("去使用")])),_:2},1032,["onClick"])):n("v-if",!0),s(u,{class:"absolute top-[50%] left-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tr-[20rpx] rounded-br-[20rpx] bg-[#fff]"}),s(u,{class:"absolute top-[50%] right-0 mt-[-20rpx] h-[40rpx] w-[20rpx] rounded-tl-[20rpx] rounded-bl-[20rpx] bg-[#fff]"})])),_:2},1032,["class"]))],64)))),256))])),_:1}),!G.value.length&&A.value?(r(),l(C,{key:0,option:{icon:x(h)("static/resource/images/empty.png")}},null,8,["option"])):n("v-if",!0)])),_:1},8,["onInit","onDown"]),s(J,{ref:"payRef"},null,512)])),_:1})}}}),[["__scopeId","data-v-8f369ffd"]]);export{R as default};
