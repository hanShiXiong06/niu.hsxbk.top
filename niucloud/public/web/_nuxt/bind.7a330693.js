import{E as x}from"./el-input.aad4d645.js";import{E as B,a as R}from"./el-overlay.7cf62588.js";import{u as S,t as q,_ as I}from"./test.1106c125.js";import{E as P}from"./el-button.2773bbbd.js";import{a as U,S as D,s as h,r as f,D as F,T as N,o as T,e as j,j as u,t as v,u as n,U as t,f as a,w as i,h as L,V as M,W as $}from"./entry.86379606.js";import{u as z}from"./useLogin.9e72b638.js";import{_ as W}from"./_plugin-vue_export-helper.c27b6911.js";import"./use-form-item.9f8807ca.js";import"./index.2a3f4a08.js";import"./_initCloneObject.11332fb1.js";import"./vnode.18b2b700.js";import"./throttle.c4698afb.js";import"./debounce.78272a2e.js";import"./system.4c787703.js";const A={class:"w-full h-full bg-page flex items-center justify-center"},G={class:"flex bg-white"},H={class:"bg-white w-[380px] p-[30px]"},J={class:"flex items-end mb-[30px] mt-[15px]"},K={class:"mr-[20px] text-base cursor-pointer leading-none font-bold"},O=U({__name:"bind",setup(Q){const _=D(),y=h(()=>_.info),r=f(!1),l=F({mobile:"",mobile_code:"",mobile_key:"",openid:N("openId").value}),k=h(()=>({mobile:[{type:"string",required:!0,message:t("mobilePlaceholder"),trigger:["blur","change"]},{validator(e,o,m){return q.mobile(o)},message:t("mobileError"),trigger:["change","blur"]}],mobile_code:{type:"string",required:!0,message:t("codePlaceholder"),trigger:["blur","change"]}})),c=f(),V=async()=>{var e;await((e=c.value)==null?void 0:e.validate(async(o,m)=>{if(o){if(r.value)return;r.value=!0,(y.value?M:$)(l).then(p=>{_.setToken(p.data.token),z().handleLoginBack()}).catch(()=>{r.value=!1,b.refresh()})}}))},b=S(l);b.refresh();const g=f(null),w=async()=>{var e;await((e=c.value)==null?void 0:e.validateField("mobile",async(o,m)=>{var s;o&&((s=g.value)==null||s.send())}))};return(e,o)=>{const m=x,s=B,p=I,C=P,E=R;return T(),j("div",A,[u("div",G,[u("div",H,[u("div",J,[u("div",K,v(("t"in e?e.t:n(t))("mobileBind")),1)]),a(E,{model:l,ref_key:"formRef",ref:c,rules:n(k),"validate-on-rule-change":!1},{default:i(()=>[u("div",null,[a(s,{prop:"mobile"},{default:i(()=>[a(m,{modelValue:l.mobile,"onUpdate:modelValue":o[0]||(o[0]=d=>l.mobile=d),placeholder:("t"in e?e.t:n(t))("mobilePlaceholder"),clearable:""},null,8,["modelValue","placeholder"])]),_:1}),a(s,{prop:"mobile_code"},{default:i(()=>[a(m,{modelValue:l.mobile_code,"onUpdate:modelValue":o[2]||(o[2]=d=>l.mobile_code=d),placeholder:("t"in e?e.t:n(t))("codePlaceholder")},{suffix:i(()=>[a(p,{mobile:l.mobile,type:"login",modelValue:l.mobile_key,"onUpdate:modelValue":o[1]||(o[1]=d=>l.mobile_key=d),onClick:w,ref_key:"smsCodeRef",ref:g},null,8,["mobile","modelValue"])]),_:1},8,["modelValue","placeholder"])]),_:1})]),a(s,null,{default:i(()=>[a(C,{type:"primary",class:"mt-[20px] w-full",size:"large",onClick:V,loading:r.value},{default:i(()=>[L(v(r.value?("t"in e?e.t:n(t))("binding"):("t"in e?e.t:n(t))("bind")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])])}}});const ue=W(O,[["__scopeId","data-v-693f19ae"]]);export{ue as default};
